f3550344048e0c42154926d2d0cd925b
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _express = /*#__PURE__*/ _interop_require_default(require("express"));
const _PromptAnalyzer = require("../services/optimization/PromptAnalyzer");
const _OptimizationEngine = require("../services/optimization/OptimizationEngine");
const _SecurityAnalyzer = require("../services/optimization/SecurityAnalyzer");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const router = _express.default.Router();
/**
 * POST /api/optimization/analyze
 * Analyze prompt effectiveness and generate insights
 */ router.post('/analyze', async (req, res)=>{
    try {
        const { promptId, promptText, timeRange } = req.body;
        if (!promptId || !promptText) {
            return res.status(400).json({
                error: 'Missing required fields: promptId, promptText'
            });
        }
        const analysis = await _PromptAnalyzer.promptAnalyzer.analyzePrompt(promptId, promptText, timeRange);
        res.json({
            success: true,
            data: analysis
        });
    } catch (error) {
        console.error('Prompt analysis error:', error);
        res.status(500).json({
            error: 'Prompt analysis failed',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/compare
 * Compare two prompts and determine which performs better
 */ router.post('/compare', async (req, res)=>{
    try {
        const { promptA, promptB, testCases, model } = req.body;
        if (!promptA || !promptB) {
            return res.status(400).json({
                error: 'Missing required fields: promptA, promptB'
            });
        }
        if (!testCases || !Array.isArray(testCases) || testCases.length === 0) {
            return res.status(400).json({
                error: 'testCases must be a non-empty array'
            });
        }
        const comparison = await _PromptAnalyzer.promptAnalyzer.comparePrompts(promptA, promptB, testCases, model);
        res.json({
            success: true,
            data: comparison
        });
    } catch (error) {
        console.error('Prompt comparison error:', error);
        res.status(500).json({
            error: 'Prompt comparison failed',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * GET /api/optimization/suggestions/:promptId
 * Get AI-powered optimization suggestions for a prompt
 */ router.get('/suggestions/:promptId', async (req, res)=>{
    try {
        const { promptId } = req.params;
        const { originalPrompt, targetMetrics, constraints } = req.query;
        if (!originalPrompt) {
            return res.status(400).json({
                error: 'Missing required query parameter: originalPrompt'
            });
        }
        const parsedTargetMetrics = targetMetrics ? JSON.parse(targetMetrics) : {};
        const parsedConstraints = constraints ? JSON.parse(constraints) : {};
        const suggestions = await _OptimizationEngine.optimizationEngine.generateOptimizationSuggestions(originalPrompt, parsedTargetMetrics, parsedConstraints);
        res.json({
            success: true,
            data: suggestions
        });
    } catch (error) {
        console.error('Optimization suggestions error:', error);
        res.status(500).json({
            error: 'Failed to generate optimization suggestions',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/suggestions
 * Generate optimization suggestions with POST data
 */ router.post('/suggestions', async (req, res)=>{
    try {
        const { originalPrompt, targetMetrics, constraints } = req.body;
        if (!originalPrompt) {
            return res.status(400).json({
                error: 'Missing required field: originalPrompt'
            });
        }
        const suggestions = await _OptimizationEngine.optimizationEngine.generateOptimizationSuggestions(originalPrompt, targetMetrics || {}, constraints || {});
        res.json({
            success: true,
            data: suggestions
        });
    } catch (error) {
        console.error('Optimization suggestions error:', error);
        res.status(500).json({
            error: 'Failed to generate optimization suggestions',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/ab-test
 * Create and start an A/B test for prompt variations
 */ router.post('/ab-test', async (req, res)=>{
    try {
        const testConfig = req.body;
        if (!testConfig.name || !testConfig.variants || !Array.isArray(testConfig.variants)) {
            return res.status(400).json({
                error: 'Missing required fields: name, variants (array)'
            });
        }
        if (testConfig.variants.length < 2) {
            return res.status(400).json({
                error: 'At least 2 variants are required for A/B testing'
            });
        }
        const abTest = await _OptimizationEngine.optimizationEngine.createABTest(testConfig);
        res.json({
            success: true,
            data: abTest
        });
    } catch (error) {
        console.error('A/B test creation error:', error);
        res.status(500).json({
            error: 'Failed to create A/B test',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/ab-test/:testId/start
 * Start an A/B test
 */ router.post('/ab-test/:testId/start', async (req, res)=>{
    try {
        const { testId } = req.params;
        await _OptimizationEngine.optimizationEngine.startABTest(testId);
        res.json({
            success: true,
            message: `A/B test ${testId} started successfully`
        });
    } catch (error) {
        console.error('A/B test start error:', error);
        res.status(500).json({
            error: 'Failed to start A/B test',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/ab-test/:testId/result
 * Record A/B test execution result
 */ router.post('/ab-test/:testId/result', async (req, res)=>{
    try {
        const { testId } = req.params;
        const { variantId, result } = req.body;
        if (!variantId || !result) {
            return res.status(400).json({
                error: 'Missing required fields: variantId, result'
            });
        }
        await _OptimizationEngine.optimizationEngine.recordABTestResult(testId, variantId, result);
        res.json({
            success: true,
            message: 'A/B test result recorded successfully'
        });
    } catch (error) {
        console.error('A/B test result recording error:', error);
        res.status(500).json({
            error: 'Failed to record A/B test result',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * GET /api/optimization/ab-test/:testId/results
 * Get A/B test results and analysis
 */ router.get('/ab-test/:testId/results', async (req, res)=>{
    try {
        const { testId } = req.params;
        const results = await _OptimizationEngine.optimizationEngine.analyzeABTestResults(testId);
        res.json({
            success: true,
            data: results
        });
    } catch (error) {
        console.error('A/B test results error:', error);
        res.status(500).json({
            error: 'Failed to analyze A/B test results',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/tune
 * Start automated prompt tuning
 */ router.post('/tune', async (req, res)=>{
    try {
        const tuningConfig = req.body;
        if (!tuningConfig.originalPrompt || !tuningConfig.objectives) {
            return res.status(400).json({
                error: 'Missing required fields: originalPrompt, objectives'
            });
        }
        const tuningProcess = await _OptimizationEngine.optimizationEngine.startPromptTuning(tuningConfig);
        res.json({
            success: true,
            data: tuningProcess
        });
    } catch (error) {
        console.error('Prompt tuning error:', error);
        res.status(500).json({
            error: 'Failed to start prompt tuning',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * GET /api/optimization/tune/:tuningId/progress
 * Get prompt tuning progress
 */ router.get('/tune/:tuningId/progress', async (req, res)=>{
    try {
        const { tuningId } = req.params;
        const progress = await _OptimizationEngine.optimizationEngine.getTuningProgress(tuningId);
        res.json({
            success: true,
            data: progress
        });
    } catch (error) {
        console.error('Tuning progress error:', error);
        res.status(500).json({
            error: 'Failed to get tuning progress',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/validate-security
 * Validate prompt security and detect threats
 */ router.post('/validate-security', async (req, res)=>{
    try {
        const { promptId, prompt, context } = req.body;
        if (!promptId || !prompt) {
            return res.status(400).json({
                error: 'Missing required fields: promptId, prompt'
            });
        }
        const securityAnalysis = await _SecurityAnalyzer.securityAnalyzer.analyzePromptSecurity(promptId, prompt, context || {});
        res.json({
            success: true,
            data: securityAnalysis
        });
    } catch (error) {
        console.error('Security validation error:', error);
        res.status(500).json({
            error: 'Security validation failed',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/detect-injection
 * Detect prompt injection attempts
 */ router.post('/detect-injection', async (req, res)=>{
    try {
        const { prompt } = req.body;
        if (!prompt) {
            return res.status(400).json({
                error: 'Missing required field: prompt'
            });
        }
        const injectionResult = await _SecurityAnalyzer.securityAnalyzer.detectPromptInjection(prompt);
        res.json({
            success: true,
            data: injectionResult
        });
    } catch (error) {
        console.error('Injection detection error:', error);
        res.status(500).json({
            error: 'Injection detection failed',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/test-jailbreak
 * Test prompt resistance to jailbreak attempts
 */ router.post('/test-jailbreak', async (req, res)=>{
    try {
        const { prompt, model } = req.body;
        if (!prompt) {
            return res.status(400).json({
                error: 'Missing required field: prompt'
            });
        }
        const jailbreakTests = await _SecurityAnalyzer.securityAnalyzer.testJailbreakResistance(prompt, model || 'llama3');
        res.json({
            success: true,
            data: jailbreakTests
        });
    } catch (error) {
        console.error('Jailbreak testing error:', error);
        res.status(500).json({
            error: 'Jailbreak testing failed',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/analyze-safety
 * Analyze content safety
 */ router.post('/analyze-safety', async (req, res)=>{
    try {
        const { content } = req.body;
        if (!content) {
            return res.status(400).json({
                error: 'Missing required field: content'
            });
        }
        const safetyAnalysis = await _SecurityAnalyzer.securityAnalyzer.analyzeContentSafety(content);
        res.json({
            success: true,
            data: safetyAnalysis
        });
    } catch (error) {
        console.error('Safety analysis error:', error);
        res.status(500).json({
            error: 'Safety analysis failed',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/validate-compliance
 * Validate prompt compliance with regulations
 */ router.post('/validate-compliance', async (req, res)=>{
    try {
        const { prompt, regulations } = req.body;
        if (!prompt || !regulations || !Array.isArray(regulations)) {
            return res.status(400).json({
                error: 'Missing required fields: prompt, regulations (array)'
            });
        }
        const complianceResults = await _SecurityAnalyzer.securityAnalyzer.validateCompliance(prompt, regulations);
        res.json({
            success: true,
            data: complianceResults
        });
    } catch (error) {
        console.error('Compliance validation error:', error);
        res.status(500).json({
            error: 'Compliance validation failed',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * POST /api/optimization/generate-secure
 * Generate security-hardened prompt
 */ router.post('/generate-secure', async (req, res)=>{
    try {
        const { originalPrompt, securityLevel } = req.body;
        if (!originalPrompt) {
            return res.status(400).json({
                error: 'Missing required field: originalPrompt'
            });
        }
        const securePrompt = await _SecurityAnalyzer.securityAnalyzer.generateSecurePrompt(originalPrompt, securityLevel || 'enhanced');
        res.json({
            success: true,
            data: securePrompt
        });
    } catch (error) {
        console.error('Secure prompt generation error:', error);
        res.status(500).json({
            error: 'Secure prompt generation failed',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * GET /api/optimization/evolution/:promptId
 * Get prompt evolution history
 */ router.get('/evolution/:promptId', async (req, res)=>{
    try {
        const { promptId } = req.params;
        const evolution = await _PromptAnalyzer.promptAnalyzer.getPromptEvolution(promptId);
        res.json({
            success: true,
            data: evolution
        });
    } catch (error) {
        console.error('Prompt evolution error:', error);
        res.status(500).json({
            error: 'Failed to get prompt evolution',
            details: error instanceof Error ? error.message : 'Unknown error'
        });
    }
});
/**
 * GET /api/optimization/health
 * Health check for optimization services
 */ router.get('/health', (req, res)=>{
    res.json({
        success: true,
        message: 'AI-powered prompt optimization services are running',
        services: {
            promptAnalyzer: 'active',
            optimizationEngine: 'active',
            securityAnalyzer: 'active'
        },
        timestamp: new Date().toISOString()
    });
});
const _default = router;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL3Byb21wdC1jYXJkLXN5c3RlbS9iYWNrZW5kL3NyYy9yb3V0ZXMvb3B0aW1pemF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IHByb21wdEFuYWx5emVyIH0gZnJvbSAnLi4vc2VydmljZXMvb3B0aW1pemF0aW9uL1Byb21wdEFuYWx5emVyJztcbmltcG9ydCB7IG9wdGltaXphdGlvbkVuZ2luZSB9IGZyb20gJy4uL3NlcnZpY2VzL29wdGltaXphdGlvbi9PcHRpbWl6YXRpb25FbmdpbmUnO1xuaW1wb3J0IHsgc2VjdXJpdHlBbmFseXplciB9IGZyb20gJy4uL3NlcnZpY2VzL29wdGltaXphdGlvbi9TZWN1cml0eUFuYWx5emVyJztcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLyoqXG4gKiBQT1NUIC9hcGkvb3B0aW1pemF0aW9uL2FuYWx5emVcbiAqIEFuYWx5emUgcHJvbXB0IGVmZmVjdGl2ZW5lc3MgYW5kIGdlbmVyYXRlIGluc2lnaHRzXG4gKi9cbnJvdXRlci5wb3N0KCcvYW5hbHl6ZScsIGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHByb21wdElkLCBwcm9tcHRUZXh0LCB0aW1lUmFuZ2UgfSA9IHJlcS5ib2R5O1xuICAgIFxuICAgIGlmICghcHJvbXB0SWQgfHwgIXByb21wdFRleHQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IHByb21wdElkLCBwcm9tcHRUZXh0J1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGFuYWx5c2lzID0gYXdhaXQgcHJvbXB0QW5hbHl6ZXIuYW5hbHl6ZVByb21wdChcbiAgICAgIHByb21wdElkLFxuICAgICAgcHJvbXB0VGV4dCxcbiAgICAgIHRpbWVSYW5nZVxuICAgICk7XG4gICAgXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGFuYWx5c2lzXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUHJvbXB0IGFuYWx5c2lzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ1Byb21wdCBhbmFseXNpcyBmYWlsZWQnLFxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogUE9TVCAvYXBpL29wdGltaXphdGlvbi9jb21wYXJlXG4gKiBDb21wYXJlIHR3byBwcm9tcHRzIGFuZCBkZXRlcm1pbmUgd2hpY2ggcGVyZm9ybXMgYmV0dGVyXG4gKi9cbnJvdXRlci5wb3N0KCcvY29tcGFyZScsIGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHByb21wdEEsIHByb21wdEIsIHRlc3RDYXNlcywgbW9kZWwgfSA9IHJlcS5ib2R5O1xuICAgIFxuICAgIGlmICghcHJvbXB0QSB8fCAhcHJvbXB0Qikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogcHJvbXB0QSwgcHJvbXB0QidcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXRlc3RDYXNlcyB8fCAhQXJyYXkuaXNBcnJheSh0ZXN0Q2FzZXMpIHx8IHRlc3RDYXNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiAndGVzdENhc2VzIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXknXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgY29tcGFyaXNvbiA9IGF3YWl0IHByb21wdEFuYWx5emVyLmNvbXBhcmVQcm9tcHRzKFxuICAgICAgcHJvbXB0QSxcbiAgICAgIHByb21wdEIsXG4gICAgICB0ZXN0Q2FzZXMsXG4gICAgICBtb2RlbFxuICAgICk7XG4gICAgXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGNvbXBhcmlzb25cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdQcm9tcHQgY29tcGFyaXNvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdQcm9tcHQgY29tcGFyaXNvbiBmYWlsZWQnLFxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogR0VUIC9hcGkvb3B0aW1pemF0aW9uL3N1Z2dlc3Rpb25zLzpwcm9tcHRJZFxuICogR2V0IEFJLXBvd2VyZWQgb3B0aW1pemF0aW9uIHN1Z2dlc3Rpb25zIGZvciBhIHByb21wdFxuICovXG5yb3V0ZXIuZ2V0KCcvc3VnZ2VzdGlvbnMvOnByb21wdElkJywgYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcHJvbXB0SWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgeyBvcmlnaW5hbFByb21wdCwgdGFyZ2V0TWV0cmljcywgY29uc3RyYWludHMgfSA9IHJlcS5xdWVyeTtcbiAgICBcbiAgICBpZiAoIW9yaWdpbmFsUHJvbXB0KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgcXVlcnkgcGFyYW1ldGVyOiBvcmlnaW5hbFByb21wdCdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBwYXJzZWRUYXJnZXRNZXRyaWNzID0gdGFyZ2V0TWV0cmljcyA/IEpTT04ucGFyc2UodGFyZ2V0TWV0cmljcyBhcyBzdHJpbmcpIDoge307XG4gICAgY29uc3QgcGFyc2VkQ29uc3RyYWludHMgPSBjb25zdHJhaW50cyA/IEpTT04ucGFyc2UoY29uc3RyYWludHMgYXMgc3RyaW5nKSA6IHt9O1xuICAgIFxuICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gYXdhaXQgb3B0aW1pemF0aW9uRW5naW5lLmdlbmVyYXRlT3B0aW1pemF0aW9uU3VnZ2VzdGlvbnMoXG4gICAgICBvcmlnaW5hbFByb21wdCBhcyBzdHJpbmcsXG4gICAgICBwYXJzZWRUYXJnZXRNZXRyaWNzLFxuICAgICAgcGFyc2VkQ29uc3RyYWludHNcbiAgICApO1xuICAgIFxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBzdWdnZXN0aW9uc1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ09wdGltaXphdGlvbiBzdWdnZXN0aW9ucyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgb3B0aW1pemF0aW9uIHN1Z2dlc3Rpb25zJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFBPU1QgL2FwaS9vcHRpbWl6YXRpb24vc3VnZ2VzdGlvbnNcbiAqIEdlbmVyYXRlIG9wdGltaXphdGlvbiBzdWdnZXN0aW9ucyB3aXRoIFBPU1QgZGF0YVxuICovXG5yb3V0ZXIucG9zdCgnL3N1Z2dlc3Rpb25zJywgYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgb3JpZ2luYWxQcm9tcHQsIHRhcmdldE1ldHJpY3MsIGNvbnN0cmFpbnRzIH0gPSByZXEuYm9keTtcbiAgICBcbiAgICBpZiAoIW9yaWdpbmFsUHJvbXB0KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGQ6IG9yaWdpbmFsUHJvbXB0J1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gYXdhaXQgb3B0aW1pemF0aW9uRW5naW5lLmdlbmVyYXRlT3B0aW1pemF0aW9uU3VnZ2VzdGlvbnMoXG4gICAgICBvcmlnaW5hbFByb21wdCxcbiAgICAgIHRhcmdldE1ldHJpY3MgfHwge30sXG4gICAgICBjb25zdHJhaW50cyB8fCB7fVxuICAgICk7XG4gICAgXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHN1Z2dlc3Rpb25zXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignT3B0aW1pemF0aW9uIHN1Z2dlc3Rpb25zIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSBvcHRpbWl6YXRpb24gc3VnZ2VzdGlvbnMnLFxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogUE9TVCAvYXBpL29wdGltaXphdGlvbi9hYi10ZXN0XG4gKiBDcmVhdGUgYW5kIHN0YXJ0IGFuIEEvQiB0ZXN0IGZvciBwcm9tcHQgdmFyaWF0aW9uc1xuICovXG5yb3V0ZXIucG9zdCgnL2FiLXRlc3QnLCBhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdGVzdENvbmZpZyA9IHJlcS5ib2R5O1xuICAgIFxuICAgIGlmICghdGVzdENvbmZpZy5uYW1lIHx8ICF0ZXN0Q29uZmlnLnZhcmlhbnRzIHx8ICFBcnJheS5pc0FycmF5KHRlc3RDb25maWcudmFyaWFudHMpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiBuYW1lLCB2YXJpYW50cyAoYXJyYXkpJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGlmICh0ZXN0Q29uZmlnLnZhcmlhbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiAnQXQgbGVhc3QgMiB2YXJpYW50cyBhcmUgcmVxdWlyZWQgZm9yIEEvQiB0ZXN0aW5nJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGFiVGVzdCA9IGF3YWl0IG9wdGltaXphdGlvbkVuZ2luZS5jcmVhdGVBQlRlc3QodGVzdENvbmZpZyk7XG4gICAgXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGFiVGVzdFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0EvQiB0ZXN0IGNyZWF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgQS9CIHRlc3QnLFxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogUE9TVCAvYXBpL29wdGltaXphdGlvbi9hYi10ZXN0Lzp0ZXN0SWQvc3RhcnRcbiAqIFN0YXJ0IGFuIEEvQiB0ZXN0XG4gKi9cbnJvdXRlci5wb3N0KCcvYWItdGVzdC86dGVzdElkL3N0YXJ0JywgYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdGVzdElkIH0gPSByZXEucGFyYW1zO1xuICAgIFxuICAgIGF3YWl0IG9wdGltaXphdGlvbkVuZ2luZS5zdGFydEFCVGVzdCh0ZXN0SWQpO1xuICAgIFxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiBgQS9CIHRlc3QgJHt0ZXN0SWR9IHN0YXJ0ZWQgc3VjY2Vzc2Z1bGx5YFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0EvQiB0ZXN0IHN0YXJ0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBzdGFydCBBL0IgdGVzdCcsXG4gICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBQT1NUIC9hcGkvb3B0aW1pemF0aW9uL2FiLXRlc3QvOnRlc3RJZC9yZXN1bHRcbiAqIFJlY29yZCBBL0IgdGVzdCBleGVjdXRpb24gcmVzdWx0XG4gKi9cbnJvdXRlci5wb3N0KCcvYWItdGVzdC86dGVzdElkL3Jlc3VsdCcsIGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHRlc3RJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCB7IHZhcmlhbnRJZCwgcmVzdWx0IH0gPSByZXEuYm9keTtcbiAgICBcbiAgICBpZiAoIXZhcmlhbnRJZCB8fCAhcmVzdWx0KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiB2YXJpYW50SWQsIHJlc3VsdCdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBhd2FpdCBvcHRpbWl6YXRpb25FbmdpbmUucmVjb3JkQUJUZXN0UmVzdWx0KHRlc3RJZCwgdmFyaWFudElkLCByZXN1bHQpO1xuICAgIFxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnQS9CIHRlc3QgcmVzdWx0IHJlY29yZGVkIHN1Y2Nlc3NmdWxseSdcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBL0IgdGVzdCByZXN1bHQgcmVjb3JkaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byByZWNvcmQgQS9CIHRlc3QgcmVzdWx0JyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEdFVCAvYXBpL29wdGltaXphdGlvbi9hYi10ZXN0Lzp0ZXN0SWQvcmVzdWx0c1xuICogR2V0IEEvQiB0ZXN0IHJlc3VsdHMgYW5kIGFuYWx5c2lzXG4gKi9cbnJvdXRlci5nZXQoJy9hYi10ZXN0Lzp0ZXN0SWQvcmVzdWx0cycsIGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHRlc3RJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgb3B0aW1pemF0aW9uRW5naW5lLmFuYWx5emVBQlRlc3RSZXN1bHRzKHRlc3RJZCk7XG4gICAgXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3VsdHNcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBL0IgdGVzdCByZXN1bHRzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBhbmFseXplIEEvQiB0ZXN0IHJlc3VsdHMnLFxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogUE9TVCAvYXBpL29wdGltaXphdGlvbi90dW5lXG4gKiBTdGFydCBhdXRvbWF0ZWQgcHJvbXB0IHR1bmluZ1xuICovXG5yb3V0ZXIucG9zdCgnL3R1bmUnLCBhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHVuaW5nQ29uZmlnID0gcmVxLmJvZHk7XG4gICAgXG4gICAgaWYgKCF0dW5pbmdDb25maWcub3JpZ2luYWxQcm9tcHQgfHwgIXR1bmluZ0NvbmZpZy5vYmplY3RpdmVzKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiBvcmlnaW5hbFByb21wdCwgb2JqZWN0aXZlcydcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB0dW5pbmdQcm9jZXNzID0gYXdhaXQgb3B0aW1pemF0aW9uRW5naW5lLnN0YXJ0UHJvbXB0VHVuaW5nKHR1bmluZ0NvbmZpZyk7XG4gICAgXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHR1bmluZ1Byb2Nlc3NcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdQcm9tcHQgdHVuaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBzdGFydCBwcm9tcHQgdHVuaW5nJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEdFVCAvYXBpL29wdGltaXphdGlvbi90dW5lLzp0dW5pbmdJZC9wcm9ncmVzc1xuICogR2V0IHByb21wdCB0dW5pbmcgcHJvZ3Jlc3NcbiAqL1xucm91dGVyLmdldCgnL3R1bmUvOnR1bmluZ0lkL3Byb2dyZXNzJywgYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdHVuaW5nSWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBhd2FpdCBvcHRpbWl6YXRpb25FbmdpbmUuZ2V0VHVuaW5nUHJvZ3Jlc3ModHVuaW5nSWQpO1xuICAgIFxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBwcm9ncmVzc1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1R1bmluZyBwcm9ncmVzcyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZ2V0IHR1bmluZyBwcm9ncmVzcycsXG4gICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBQT1NUIC9hcGkvb3B0aW1pemF0aW9uL3ZhbGlkYXRlLXNlY3VyaXR5XG4gKiBWYWxpZGF0ZSBwcm9tcHQgc2VjdXJpdHkgYW5kIGRldGVjdCB0aHJlYXRzXG4gKi9cbnJvdXRlci5wb3N0KCcvdmFsaWRhdGUtc2VjdXJpdHknLCBhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBwcm9tcHRJZCwgcHJvbXB0LCBjb250ZXh0IH0gPSByZXEuYm9keTtcbiAgICBcbiAgICBpZiAoIXByb21wdElkIHx8ICFwcm9tcHQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IHByb21wdElkLCBwcm9tcHQnXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgc2VjdXJpdHlBbmFseXNpcyA9IGF3YWl0IHNlY3VyaXR5QW5hbHl6ZXIuYW5hbHl6ZVByb21wdFNlY3VyaXR5KFxuICAgICAgcHJvbXB0SWQsXG4gICAgICBwcm9tcHQsXG4gICAgICBjb250ZXh0IHx8IHt9XG4gICAgKTtcbiAgICBcbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogc2VjdXJpdHlBbmFseXNpc1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1NlY3VyaXR5IHZhbGlkYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnU2VjdXJpdHkgdmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogUE9TVCAvYXBpL29wdGltaXphdGlvbi9kZXRlY3QtaW5qZWN0aW9uXG4gKiBEZXRlY3QgcHJvbXB0IGluamVjdGlvbiBhdHRlbXB0c1xuICovXG5yb3V0ZXIucG9zdCgnL2RldGVjdC1pbmplY3Rpb24nLCBhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBwcm9tcHQgfSA9IHJlcS5ib2R5O1xuICAgIFxuICAgIGlmICghcHJvbXB0KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGQ6IHByb21wdCdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBpbmplY3Rpb25SZXN1bHQgPSBhd2FpdCBzZWN1cml0eUFuYWx5emVyLmRldGVjdFByb21wdEluamVjdGlvbihwcm9tcHQpO1xuICAgIFxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBpbmplY3Rpb25SZXN1bHRcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbmplY3Rpb24gZGV0ZWN0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0luamVjdGlvbiBkZXRlY3Rpb24gZmFpbGVkJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFBPU1QgL2FwaS9vcHRpbWl6YXRpb24vdGVzdC1qYWlsYnJlYWtcbiAqIFRlc3QgcHJvbXB0IHJlc2lzdGFuY2UgdG8gamFpbGJyZWFrIGF0dGVtcHRzXG4gKi9cbnJvdXRlci5wb3N0KCcvdGVzdC1qYWlsYnJlYWsnLCBhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBwcm9tcHQsIG1vZGVsIH0gPSByZXEuYm9keTtcbiAgICBcbiAgICBpZiAoIXByb21wdCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkOiBwcm9tcHQnXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgamFpbGJyZWFrVGVzdHMgPSBhd2FpdCBzZWN1cml0eUFuYWx5emVyLnRlc3RKYWlsYnJlYWtSZXNpc3RhbmNlKFxuICAgICAgcHJvbXB0LFxuICAgICAgbW9kZWwgfHwgJ2xsYW1hMydcbiAgICApO1xuICAgIFxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBqYWlsYnJlYWtUZXN0c1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0phaWxicmVhayB0ZXN0aW5nIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0phaWxicmVhayB0ZXN0aW5nIGZhaWxlZCcsXG4gICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBQT1NUIC9hcGkvb3B0aW1pemF0aW9uL2FuYWx5emUtc2FmZXR5XG4gKiBBbmFseXplIGNvbnRlbnQgc2FmZXR5XG4gKi9cbnJvdXRlci5wb3N0KCcvYW5hbHl6ZS1zYWZldHknLCBhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBjb250ZW50IH0gPSByZXEuYm9keTtcbiAgICBcbiAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZDogY29udGVudCdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzYWZldHlBbmFseXNpcyA9IGF3YWl0IHNlY3VyaXR5QW5hbHl6ZXIuYW5hbHl6ZUNvbnRlbnRTYWZldHkoY29udGVudCk7XG4gICAgXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHNhZmV0eUFuYWx5c2lzXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU2FmZXR5IGFuYWx5c2lzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ1NhZmV0eSBhbmFseXNpcyBmYWlsZWQnLFxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogUE9TVCAvYXBpL29wdGltaXphdGlvbi92YWxpZGF0ZS1jb21wbGlhbmNlXG4gKiBWYWxpZGF0ZSBwcm9tcHQgY29tcGxpYW5jZSB3aXRoIHJlZ3VsYXRpb25zXG4gKi9cbnJvdXRlci5wb3N0KCcvdmFsaWRhdGUtY29tcGxpYW5jZScsIGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHByb21wdCwgcmVndWxhdGlvbnMgfSA9IHJlcS5ib2R5O1xuICAgIFxuICAgIGlmICghcHJvbXB0IHx8ICFyZWd1bGF0aW9ucyB8fCAhQXJyYXkuaXNBcnJheShyZWd1bGF0aW9ucykpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IHByb21wdCwgcmVndWxhdGlvbnMgKGFycmF5KSdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjb21wbGlhbmNlUmVzdWx0cyA9IGF3YWl0IHNlY3VyaXR5QW5hbHl6ZXIudmFsaWRhdGVDb21wbGlhbmNlKFxuICAgICAgcHJvbXB0LFxuICAgICAgcmVndWxhdGlvbnNcbiAgICApO1xuICAgIFxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBjb21wbGlhbmNlUmVzdWx0c1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NvbXBsaWFuY2UgdmFsaWRhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdDb21wbGlhbmNlIHZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFBPU1QgL2FwaS9vcHRpbWl6YXRpb24vZ2VuZXJhdGUtc2VjdXJlXG4gKiBHZW5lcmF0ZSBzZWN1cml0eS1oYXJkZW5lZCBwcm9tcHRcbiAqL1xucm91dGVyLnBvc3QoJy9nZW5lcmF0ZS1zZWN1cmUnLCBhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBvcmlnaW5hbFByb21wdCwgc2VjdXJpdHlMZXZlbCB9ID0gcmVxLmJvZHk7XG4gICAgXG4gICAgaWYgKCFvcmlnaW5hbFByb21wdCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkOiBvcmlnaW5hbFByb21wdCdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZWN1cmVQcm9tcHQgPSBhd2FpdCBzZWN1cml0eUFuYWx5emVyLmdlbmVyYXRlU2VjdXJlUHJvbXB0KFxuICAgICAgb3JpZ2luYWxQcm9tcHQsXG4gICAgICBzZWN1cml0eUxldmVsIHx8ICdlbmhhbmNlZCdcbiAgICApO1xuICAgIFxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBzZWN1cmVQcm9tcHRcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTZWN1cmUgcHJvbXB0IGdlbmVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnU2VjdXJlIHByb21wdCBnZW5lcmF0aW9uIGZhaWxlZCcsXG4gICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBHRVQgL2FwaS9vcHRpbWl6YXRpb24vZXZvbHV0aW9uLzpwcm9tcHRJZFxuICogR2V0IHByb21wdCBldm9sdXRpb24gaGlzdG9yeVxuICovXG5yb3V0ZXIuZ2V0KCcvZXZvbHV0aW9uLzpwcm9tcHRJZCcsIGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHByb21wdElkIH0gPSByZXEucGFyYW1zO1xuICAgIFxuICAgIGNvbnN0IGV2b2x1dGlvbiA9IGF3YWl0IHByb21wdEFuYWx5emVyLmdldFByb21wdEV2b2x1dGlvbihwcm9tcHRJZCk7XG4gICAgXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGV2b2x1dGlvblxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Byb21wdCBldm9sdXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGdldCBwcm9tcHQgZXZvbHV0aW9uJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEdFVCAvYXBpL29wdGltaXphdGlvbi9oZWFsdGhcbiAqIEhlYWx0aCBjaGVjayBmb3Igb3B0aW1pemF0aW9uIHNlcnZpY2VzXG4gKi9cbnJvdXRlci5nZXQoJy9oZWFsdGgnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIG1lc3NhZ2U6ICdBSS1wb3dlcmVkIHByb21wdCBvcHRpbWl6YXRpb24gc2VydmljZXMgYXJlIHJ1bm5pbmcnLFxuICAgIHNlcnZpY2VzOiB7XG4gICAgICBwcm9tcHRBbmFseXplcjogJ2FjdGl2ZScsXG4gICAgICBvcHRpbWl6YXRpb25FbmdpbmU6ICdhY3RpdmUnLFxuICAgICAgc2VjdXJpdHlBbmFseXplcjogJ2FjdGl2ZSdcbiAgICB9LFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gIH0pO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibmFtZXMiOlsicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInBvc3QiLCJyZXEiLCJyZXMiLCJwcm9tcHRJZCIsInByb21wdFRleHQiLCJ0aW1lUmFuZ2UiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiYW5hbHlzaXMiLCJwcm9tcHRBbmFseXplciIsImFuYWx5emVQcm9tcHQiLCJzdWNjZXNzIiwiZGF0YSIsImNvbnNvbGUiLCJkZXRhaWxzIiwiRXJyb3IiLCJtZXNzYWdlIiwicHJvbXB0QSIsInByb21wdEIiLCJ0ZXN0Q2FzZXMiLCJtb2RlbCIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImNvbXBhcmlzb24iLCJjb21wYXJlUHJvbXB0cyIsImdldCIsInBhcmFtcyIsIm9yaWdpbmFsUHJvbXB0IiwidGFyZ2V0TWV0cmljcyIsImNvbnN0cmFpbnRzIiwicXVlcnkiLCJwYXJzZWRUYXJnZXRNZXRyaWNzIiwiSlNPTiIsInBhcnNlIiwicGFyc2VkQ29uc3RyYWludHMiLCJzdWdnZXN0aW9ucyIsIm9wdGltaXphdGlvbkVuZ2luZSIsImdlbmVyYXRlT3B0aW1pemF0aW9uU3VnZ2VzdGlvbnMiLCJ0ZXN0Q29uZmlnIiwibmFtZSIsInZhcmlhbnRzIiwiYWJUZXN0IiwiY3JlYXRlQUJUZXN0IiwidGVzdElkIiwic3RhcnRBQlRlc3QiLCJ2YXJpYW50SWQiLCJyZXN1bHQiLCJyZWNvcmRBQlRlc3RSZXN1bHQiLCJyZXN1bHRzIiwiYW5hbHl6ZUFCVGVzdFJlc3VsdHMiLCJ0dW5pbmdDb25maWciLCJvYmplY3RpdmVzIiwidHVuaW5nUHJvY2VzcyIsInN0YXJ0UHJvbXB0VHVuaW5nIiwidHVuaW5nSWQiLCJwcm9ncmVzcyIsImdldFR1bmluZ1Byb2dyZXNzIiwicHJvbXB0IiwiY29udGV4dCIsInNlY3VyaXR5QW5hbHlzaXMiLCJzZWN1cml0eUFuYWx5emVyIiwiYW5hbHl6ZVByb21wdFNlY3VyaXR5IiwiaW5qZWN0aW9uUmVzdWx0IiwiZGV0ZWN0UHJvbXB0SW5qZWN0aW9uIiwiamFpbGJyZWFrVGVzdHMiLCJ0ZXN0SmFpbGJyZWFrUmVzaXN0YW5jZSIsImNvbnRlbnQiLCJzYWZldHlBbmFseXNpcyIsImFuYWx5emVDb250ZW50U2FmZXR5IiwicmVndWxhdGlvbnMiLCJjb21wbGlhbmNlUmVzdWx0cyIsInZhbGlkYXRlQ29tcGxpYW5jZSIsInNlY3VyaXR5TGV2ZWwiLCJzZWN1cmVQcm9tcHQiLCJnZW5lcmF0ZVNlY3VyZVByb21wdCIsImV2b2x1dGlvbiIsImdldFByb21wdEV2b2x1dGlvbiIsInNlcnZpY2VzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7OytCQTZoQkE7OztlQUFBOzs7Z0VBN2hCb0I7Z0NBRVc7b0NBQ0k7a0NBQ0Y7Ozs7OztBQUVqQyxNQUFNQSxTQUFTQyxnQkFBTyxDQUFDQyxNQUFNO0FB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