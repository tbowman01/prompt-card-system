9b477e4fa375b7b75193daaa51f5dff1
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get AlertingSystem () {
        return AlertingSystem;
    },
    get alertingSystem () {
        return alertingSystem;
    }
});
const _events = require("events");
const _crypto = /*#__PURE__*/ _interop_require_default(require("crypto"));
const _SecurityMonitor = require("./SecurityMonitor");
const _LogAggregator = require("./LogAggregator");
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
class AlertingSystem extends _events.EventEmitter {
    // Alert management
    createAlert(alertData) {
        const alert = {
            id: _crypto.default.randomUUID(),
            timestamp: new Date(),
            acknowledged: false,
            resolved: false,
            actions: [],
            ...alertData
        };
        this.alerts.push(alert);
        this.emit('alert', alert);
        // Execute alert actions
        this.executeAlertActions(alert);
        // Maintain alert limit
        if (this.alerts.length > this.options.maxAlerts) {
            this.alerts = this.alerts.slice(-this.options.maxAlerts);
        }
        return alert;
    }
    acknowledgeAlert(alertId, acknowledgedBy) {
        const alert = this.alerts.find((a)=>a.id === alertId);
        if (!alert || alert.acknowledged) {
            return false;
        }
        alert.acknowledged = true;
        alert.acknowledgedBy = acknowledgedBy;
        alert.acknowledgedAt = new Date();
        this.emit('alertAcknowledged', alert);
        return true;
    }
    resolveAlert(alertId, resolvedBy) {
        const alert = this.alerts.find((a)=>a.id === alertId);
        if (!alert || alert.resolved) {
            return false;
        }
        alert.resolved = true;
        alert.resolvedBy = resolvedBy;
        alert.resolvedAt = new Date();
        this.emit('alertResolved', alert);
        return true;
    }
    getAlerts(filters) {
        let filteredAlerts = [
            ...this.alerts
        ];
        if (filters) {
            if (filters.severity) {
                filteredAlerts = filteredAlerts.filter((a)=>filters.severity.includes(a.severity));
            }
            if (filters.type) {
                filteredAlerts = filteredAlerts.filter((a)=>filters.type.includes(a.type));
            }
            if (filters.acknowledged !== undefined) {
                filteredAlerts = filteredAlerts.filter((a)=>a.acknowledged === filters.acknowledged);
            }
            if (filters.resolved !== undefined) {
                filteredAlerts = filteredAlerts.filter((a)=>a.resolved === filters.resolved);
            }
            if (filters.since) {
                filteredAlerts = filteredAlerts.filter((a)=>a.timestamp >= filters.since);
            }
            if (filters.limit) {
                filteredAlerts = filteredAlerts.slice(-filters.limit);
            }
        }
        return filteredAlerts.sort((a, b)=>b.timestamp.getTime() - a.timestamp.getTime());
    }
    // Rule management
    addRule(rule) {
        const newRule = {
            id: _crypto.default.randomUUID(),
            ...rule
        };
        this.rules.push(newRule);
        this.emit('ruleAdded', newRule);
        return newRule;
    }
    updateRule(ruleId, updates) {
        const ruleIndex = this.rules.findIndex((r)=>r.id === ruleId);
        if (ruleIndex === -1) {
            return false;
        }
        this.rules[ruleIndex] = {
            ...this.rules[ruleIndex],
            ...updates
        };
        this.emit('ruleUpdated', this.rules[ruleIndex]);
        return true;
    }
    removeRule(ruleId) {
        const ruleIndex = this.rules.findIndex((r)=>r.id === ruleId);
        if (ruleIndex === -1) {
            return false;
        }
        const rule = this.rules.splice(ruleIndex, 1)[0];
        this.emit('ruleRemoved', rule);
        return true;
    }
    getRules() {
        return [
            ...this.rules
        ];
    }
    // Notification channel management
    addChannel(channel) {
        const newChannel = {
            id: _crypto.default.randomUUID(),
            ...channel
        };
        this.channels.push(newChannel);
        this.emit('channelAdded', newChannel);
        return newChannel;
    }
    updateChannel(channelId, updates) {
        const channelIndex = this.channels.findIndex((c)=>c.id === channelId);
        if (channelIndex === -1) {
            return false;
        }
        this.channels[channelIndex] = {
            ...this.channels[channelIndex],
            ...updates
        };
        this.emit('channelUpdated', this.channels[channelIndex]);
        return true;
    }
    removeChannel(channelId) {
        const channelIndex = this.channels.findIndex((c)=>c.id === channelId);
        if (channelIndex === -1) {
            return false;
        }
        const channel = this.channels.splice(channelIndex, 1)[0];
        this.emit('channelRemoved', channel);
        return true;
    }
    getChannels() {
        return [
            ...this.channels
        ];
    }
    // Alert processing
    async executeAlertActions(alert) {
        const matchingRules = this.rules.filter((rule)=>rule.enabled && this.doesEventMatchRule(alert, rule));
        for (const rule of matchingRules){
            // Check cooldown
            if (rule.cooldown && rule.lastTriggered) {
                const cooldownEnd = new Date(rule.lastTriggered.getTime() + rule.cooldown * 60 * 1000);
                if (new Date() < cooldownEnd) {
                    continue;
                }
            }
            // Execute rule actions
            for (const actionTemplate of rule.actions){
                const action = {
                    id: _crypto.default.randomUUID(),
                    executed: false,
                    ...actionTemplate
                };
                try {
                    await this.executeAction(action, alert);
                    action.executed = true;
                    action.executedAt = new Date();
                    action.result = 'success';
                } catch (error) {
                    action.executed = false;
                    action.error = error instanceof Error ? error.message : 'Unknown error';
                }
                alert.actions.push(action);
            }
            rule.lastTriggered = new Date();
        }
    }
    doesEventMatchRule(alert, rule) {
        const { conditions } = rule;
        if (conditions.eventType && !conditions.eventType.includes(alert.type)) {
            return false;
        }
        if (conditions.severity && !conditions.severity.includes(alert.severity)) {
            return false;
        }
        if (conditions.source && !conditions.source.some((s)=>alert.source.includes(s))) {
            return false;
        }
        if (conditions.pattern && !conditions.pattern.test(alert.message)) {
            return false;
        }
        if (conditions.threshold) {
            const key = `${rule.id}_${alert.type}_${alert.source}`;
            const now = new Date();
            if (!this.eventCounts.has(key)) {
                this.eventCounts.set(key, {
                    count: 1,
                    firstSeen: now
                });
                return false;
            }
            const eventData = this.eventCounts.get(key);
            const windowStart = new Date(now.getTime() - conditions.threshold.timeWindow * 60 * 1000);
            if (eventData.firstSeen < windowStart) {
                // Reset counter for new window
                this.eventCounts.set(key, {
                    count: 1,
                    firstSeen: now
                });
                return false;
            }
            eventData.count++;
            return eventData.count >= conditions.threshold.count;
        }
        return true;
    }
    async executeAction(action, alert) {
        const channel = this.channels.find((c)=>c.id === action.target && c.enabled);
        if (!channel) {
            throw new Error(`Channel ${action.target} not found or disabled`);
        }
        switch(action.type){
            case 'email':
                await this.sendEmailAlert(channel, alert, action);
                break;
            case 'webhook':
                await this.sendWebhookAlert(channel, alert, action);
                break;
            case 'slack':
                await this.sendSlackAlert(channel, alert, action);
                break;
            case 'sms':
                await this.sendSMSAlert(channel, alert, action);
                break;
            case 'log':
                await this.logAlert(alert, action);
                break;
            case 'auto-remediate':
                if (this.options.enableAutoRemediation) {
                    await this.executeAutoRemediation(alert, action);
                }
                break;
            default:
                throw new Error(`Unknown action type: ${action.type}`);
        }
    }
    async sendEmailAlert(channel, alert, action) {
        // Email implementation would go here
        // For now, just log the action
        _LogAggregator.logAggregator.info('alerting-system', `Email alert sent: ${alert.title}`, {
            channel: channel.name,
            alert: alert.id,
            severity: alert.severity
        }, [
            'alert',
            'email'
        ]);
    }
    async sendWebhookAlert(channel, alert, action) {
        const { webhook } = channel.config;
        if (!webhook) {
            throw new Error('Webhook configuration missing');
        }
        const payload = {
            alert: {
                id: alert.id,
                timestamp: alert.timestamp,
                severity: alert.severity,
                type: alert.type,
                title: alert.title,
                message: alert.message,
                source: alert.source,
                metadata: alert.metadata
            },
            action: action.config || {}
        };
        try {
            const response = await fetch(webhook.url, {
                method: webhook.method || 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    ...webhook.headers
                },
                body: JSON.stringify(payload)
            });
            if (!response.ok) {
                throw new Error(`Webhook returned ${response.status}: ${response.statusText}`);
            }
            _LogAggregator.logAggregator.info('alerting-system', `Webhook alert sent: ${alert.title}`, {
                channel: channel.name,
                alert: alert.id,
                webhook: webhook.url,
                status: response.status
            }, [
                'alert',
                'webhook'
            ]);
        } catch (error) {
            throw new Error(`Webhook failed: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    async sendSlackAlert(channel, alert, action) {
        const { slack } = channel.config;
        if (!slack) {
            throw new Error('Slack configuration missing');
        }
        const severityEmoji = {
            low: '🟢',
            medium: '🟡',
            high: '🟠',
            critical: '🔴'
        };
        const payload = {
            channel: slack.channel,
            text: `${severityEmoji[alert.severity]} Security Alert: ${alert.title}`,
            attachments: [
                {
                    color: alert.severity === 'critical' ? 'danger' : alert.severity === 'high' ? 'warning' : 'good',
                    fields: [
                        {
                            title: 'Severity',
                            value: alert.severity.toUpperCase(),
                            short: true
                        },
                        {
                            title: 'Type',
                            value: alert.type,
                            short: true
                        },
                        {
                            title: 'Source',
                            value: alert.source,
                            short: true
                        },
                        {
                            title: 'Time',
                            value: alert.timestamp.toISOString(),
                            short: true
                        },
                        {
                            title: 'Message',
                            value: alert.message,
                            short: false
                        }
                    ],
                    timestamp: Math.floor(alert.timestamp.getTime() / 1000)
                }
            ]
        };
        try {
            const response = await fetch(slack.webhook, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            });
            if (!response.ok) {
                throw new Error(`Slack webhook returned ${response.status}: ${response.statusText}`);
            }
            _LogAggregator.logAggregator.info('alerting-system', `Slack alert sent: ${alert.title}`, {
                channel: channel.name,
                alert: alert.id,
                slackChannel: slack.channel
            }, [
                'alert',
                'slack'
            ]);
        } catch (error) {
            throw new Error(`Slack alert failed: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    async sendSMSAlert(channel, alert, action) {
        // SMS implementation would go here
        _LogAggregator.logAggregator.info('alerting-system', `SMS alert sent: ${alert.title}`, {
            channel: channel.name,
            alert: alert.id,
            severity: alert.severity
        }, [
            'alert',
            'sms'
        ]);
    }
    async logAlert(alert, action) {
        _LogAggregator.logAggregator.warn('alerting-system', `ALERT: ${alert.title}`, {
            alertId: alert.id,
            severity: alert.severity,
            type: alert.type,
            source: alert.source,
            message: alert.message,
            metadata: alert.metadata
        }, [
            'alert',
            'logged'
        ]);
    }
    async executeAutoRemediation(alert, action) {
        // Auto-remediation logic would go here
        _LogAggregator.logAggregator.info('alerting-system', `Auto-remediation triggered for: ${alert.title}`, {
            alert: alert.id,
            remediation: action.config
        }, [
            'alert',
            'auto-remediation'
        ]);
    }
    // Event listeners setup
    setupEventListeners() {
        // Listen to security events
        _SecurityMonitor.securityMonitor.on('securityEvent', (event)=>{
            this.createAlert({
                severity: event.severity,
                type: 'security',
                title: `Security Event: ${event.type}`,
                message: event.message,
                source: event.source,
                metadata: {
                    eventId: event.id,
                    eventType: event.type,
                    eventDetails: event.details
                }
            });
        });
        _SecurityMonitor.securityMonitor.on('criticalAlert', (event)=>{
            this.createAlert({
                severity: 'critical',
                type: 'security',
                title: `CRITICAL: ${event.type}`,
                message: event.message,
                source: event.source,
                metadata: {
                    eventId: event.id,
                    eventType: event.type,
                    eventDetails: event.details,
                    critical: true
                }
            });
        });
        // Listen to log analysis events
        _LogAggregator.logAggregator.on('analysisComplete', (analysis)=>{
            const criticalPatterns = analysis.patterns.filter((p)=>p.severity === 'critical');
            const highPatterns = analysis.patterns.filter((p)=>p.severity === 'high');
            if (criticalPatterns.length > 0) {
                this.createAlert({
                    severity: 'critical',
                    type: 'system',
                    title: 'Critical Log Patterns Detected',
                    message: `${criticalPatterns.length} critical patterns found in log analysis`,
                    source: 'log-analyzer',
                    metadata: {
                        analysisId: analysis.id,
                        patterns: criticalPatterns,
                        timeRange: analysis.timeRange
                    }
                });
            } else if (highPatterns.length > 0) {
                this.createAlert({
                    severity: 'high',
                    type: 'system',
                    title: 'High-Severity Log Patterns Detected',
                    message: `${highPatterns.length} high-severity patterns found in log analysis`,
                    source: 'log-analyzer',
                    metadata: {
                        analysisId: analysis.id,
                        patterns: highPatterns,
                        timeRange: analysis.timeRange
                    }
                });
            }
        });
        _LogAggregator.logAggregator.on('patternDetected', (data)=>{
            if (data.pattern.severity === 'critical' || data.pattern.severity === 'high') {
                this.createAlert({
                    severity: data.pattern.severity,
                    type: data.pattern.type,
                    title: `Pattern Detected: ${data.pattern.description}`,
                    message: data.logEntry.message,
                    source: data.logEntry.source,
                    metadata: {
                        pattern: data.pattern,
                        logEntry: data.logEntry
                    }
                });
            }
        });
    }
    // Default rules setup
    setupDefaultRules() {
        const defaultRules = [
            {
                name: 'Critical Security Events',
                description: 'Alert on any critical security events',
                enabled: true,
                conditions: {
                    eventType: [
                        'security'
                    ],
                    severity: [
                        'critical'
                    ]
                },
                actions: [
                    {
                        type: 'log',
                        target: 'system',
                        config: {}
                    }
                ],
                cooldown: 5
            },
            {
                name: 'Multiple Authentication Failures',
                description: 'Alert when multiple authentication failures occur',
                enabled: true,
                conditions: {
                    pattern: /authentication.*failed|login.*failed/i,
                    threshold: {
                        count: 5,
                        timeWindow: 15
                    }
                },
                actions: [
                    {
                        type: 'log',
                        target: 'system',
                        config: {}
                    }
                ],
                cooldown: 10
            },
            {
                name: 'System Performance Issues',
                description: 'Alert on system performance degradation',
                enabled: true,
                conditions: {
                    eventType: [
                        'performance'
                    ],
                    severity: [
                        'high',
                        'critical'
                    ]
                },
                actions: [
                    {
                        type: 'log',
                        target: 'system',
                        config: {}
                    }
                ],
                cooldown: 15
            }
        ];
        defaultRules.forEach((rule)=>this.addRule(rule));
    }
    // Analytics
    getAlertStatistics() {
        const stats = {
            total: this.alerts.length,
            bySeverity: {
                low: 0,
                medium: 0,
                high: 0,
                critical: 0
            },
            byType: {
                security: 0,
                performance: 0,
                system: 0,
                compliance: 0
            },
            acknowledged: this.alerts.filter((a)=>a.acknowledged).length,
            resolved: this.alerts.filter((a)=>a.resolved).length,
            recentActivity: []
        };
        this.alerts.forEach((alert)=>{
            stats.bySeverity[alert.severity]++;
            stats.byType[alert.type]++;
        });
        // Recent activity (last 7 days)
        const now = new Date();
        for(let i = 6; i >= 0; i--){
            const date = new Date(now.getTime() - i * 24 * 60 * 60 * 1000);
            const dayStart = new Date(date.getFullYear(), date.getMonth(), date.getDate());
            const dayEnd = new Date(dayStart.getTime() + 24 * 60 * 60 * 1000);
            const count = this.alerts.filter((alert)=>alert.timestamp >= dayStart && alert.timestamp < dayEnd).length;
            stats.recentActivity.push({
                date: dayStart.toISOString().split('T')[0],
                count
            });
        }
        return {
            ...stats,
            critical: stats.bySeverity.critical
        };
    }
    // Cleanup
    setupCleanup() {
        this.cleanupInterval = setInterval(()=>{
            const cutoffDate = new Date();
            cutoffDate.setDate(cutoffDate.getDate() - this.options.alertRetentionDays);
            this.alerts = this.alerts.filter((alert)=>alert.timestamp >= cutoffDate);
            // Clean up event counts older than 24 hours
            const eventCutoff = new Date(Date.now() - 24 * 60 * 60 * 1000);
            for (const [key, data] of this.eventCounts.entries()){
                if (data.firstSeen < eventCutoff) {
                    this.eventCounts.delete(key);
                }
            }
        }, 24 * 60 * 60 * 1000); // Daily cleanup
    }
    // Cleanup resources
    destroy() {
        if (this.cleanupInterval) {
            clearInterval(this.cleanupInterval);
        }
        this.removeAllListeners();
    }
    constructor(options = {}){
        super(), _define_property(this, "options", void 0), _define_property(this, "alerts", void 0), _define_property(this, "rules", void 0), _define_property(this, "channels", void 0), _define_property(this, "eventCounts", void 0), _define_property(this, "cleanupInterval", void 0), this.options = options, this.alerts = [], this.rules = [], this.channels = [], this.eventCounts = new Map();
        const { maxAlerts = 5000, alertRetentionDays = 90, enableAutoRemediation = false } = options;
        this.options = {
            maxAlerts,
            alertRetentionDays,
            enableAutoRemediation
        };
        this.setupDefaultRules();
        this.setupEventListeners();
        this.setupCleanup();
    }
}
const alertingSystem = new AlertingSystem({
    maxAlerts: 5000,
    alertRetentionDays: 90,
    enableAutoRemediation: process.env.NODE_ENV === 'production'
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL3Byb21wdC1jYXJkLXN5c3RlbS9iYWNrZW5kL3NyYy9zZXJ2aWNlcy9zZWN1cml0eS9BbGVydGluZ1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuaW1wb3J0IHsgc2VjdXJpdHlNb25pdG9yLCBTZWN1cml0eUV2ZW50IH0gZnJvbSAnLi9TZWN1cml0eU1vbml0b3InO1xuaW1wb3J0IHsgbG9nQWdncmVnYXRvciwgTG9nQW5hbHlzaXMgfSBmcm9tICcuL0xvZ0FnZ3JlZ2F0b3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFsZXJ0IHtcbiAgaWQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBzZXZlcml0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCc7XG4gIHR5cGU6ICdzZWN1cml0eScgfCAncGVyZm9ybWFuY2UnIHwgJ3N5c3RlbScgfCAnY29tcGxpYW5jZSc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgc291cmNlOiBzdHJpbmc7XG4gIG1ldGFkYXRhOiBhbnk7XG4gIGFja25vd2xlZGdlZDogYm9vbGVhbjtcbiAgYWNrbm93bGVkZ2VkQnk/OiBzdHJpbmc7XG4gIGFja25vd2xlZGdlZEF0PzogRGF0ZTtcbiAgcmVzb2x2ZWQ6IGJvb2xlYW47XG4gIHJlc29sdmVkQnk/OiBzdHJpbmc7XG4gIHJlc29sdmVkQXQ/OiBEYXRlO1xuICBhY3Rpb25zOiBBbGVydEFjdGlvbltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFsZXJ0QWN0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogJ2VtYWlsJyB8ICd3ZWJob29rJyB8ICdzbXMnIHwgJ3NsYWNrJyB8ICdsb2cnIHwgJ2F1dG8tcmVtZWRpYXRlJztcbiAgdGFyZ2V0OiBzdHJpbmc7XG4gIGNvbmZpZzogYW55O1xuICBleGVjdXRlZDogYm9vbGVhbjtcbiAgZXhlY3V0ZWRBdD86IERhdGU7XG4gIHJlc3VsdD86IHN0cmluZztcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnRSdWxlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBlbmFibGVkOiBib29sZWFuO1xuICBjb25kaXRpb25zOiB7XG4gICAgZXZlbnRUeXBlPzogc3RyaW5nW107XG4gICAgc2V2ZXJpdHk/OiBzdHJpbmdbXTtcbiAgICBzb3VyY2U/OiBzdHJpbmdbXTtcbiAgICBwYXR0ZXJuPzogUmVnRXhwO1xuICAgIHRocmVzaG9sZD86IHtcbiAgICAgIGNvdW50OiBudW1iZXI7XG4gICAgICB0aW1lV2luZG93OiBudW1iZXI7IC8vIGluIG1pbnV0ZXNcbiAgICB9O1xuICB9O1xuICBhY3Rpb25zOiBPbWl0PEFsZXJ0QWN0aW9uLCAnaWQnIHwgJ2V4ZWN1dGVkJyB8ICdleGVjdXRlZEF0JyB8ICdyZXN1bHQnIHwgJ2Vycm9yJz5bXTtcbiAgY29vbGRvd24/OiBudW1iZXI7IC8vIG1pbnV0ZXNcbiAgbGFzdFRyaWdnZXJlZD86IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uQ2hhbm5lbCB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICdlbWFpbCcgfCAnd2ViaG9vaycgfCAnc2xhY2snIHwgJ3Ntcyc7XG4gIG5hbWU6IHN0cmluZztcbiAgY29uZmlnOiB7XG4gICAgZW1haWw/OiB7IHRvOiBzdHJpbmdbXTsgZnJvbTogc3RyaW5nOyBzbXRwPzogYW55IH07XG4gICAgd2ViaG9vaz86IHsgdXJsOiBzdHJpbmc7IGhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+OyBtZXRob2Q/OiBzdHJpbmcgfTtcbiAgICBzbGFjaz86IHsgd2ViaG9vazogc3RyaW5nOyBjaGFubmVsOiBzdHJpbmcgfTtcbiAgICBzbXM/OiB7IHByb3ZpZGVyOiBzdHJpbmc7IGNyZWRlbnRpYWxzOiBhbnk7IHRvOiBzdHJpbmdbXSB9O1xuICB9O1xuICBlbmFibGVkOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgQWxlcnRpbmdTeXN0ZW0gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIGFsZXJ0czogQWxlcnRbXSA9IFtdO1xuICBwcml2YXRlIHJ1bGVzOiBBbGVydFJ1bGVbXSA9IFtdO1xuICBwcml2YXRlIGNoYW5uZWxzOiBOb3RpZmljYXRpb25DaGFubmVsW10gPSBbXTtcbiAgcHJpdmF0ZSBldmVudENvdW50czogTWFwPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyBmaXJzdFNlZW46IERhdGUgfT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgY2xlYW51cEludGVydmFsPzogTm9kZUpTLlRpbWVvdXQ7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBvcHRpb25zOiB7XG4gICAgbWF4QWxlcnRzPzogbnVtYmVyO1xuICAgIGFsZXJ0UmV0ZW50aW9uRGF5cz86IG51bWJlcjtcbiAgICBlbmFibGVBdXRvUmVtZWRpYXRpb24/OiBib29sZWFuO1xuICB9ID0ge30pIHtcbiAgICBzdXBlcigpO1xuICAgIFxuICAgIGNvbnN0IHtcbiAgICAgIG1heEFsZXJ0cyA9IDUwMDAsXG4gICAgICBhbGVydFJldGVudGlvbkRheXMgPSA5MCxcbiAgICAgIGVuYWJsZUF1dG9SZW1lZGlhdGlvbiA9IGZhbHNlXG4gICAgfSA9IG9wdGlvbnM7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBtYXhBbGVydHMsXG4gICAgICBhbGVydFJldGVudGlvbkRheXMsXG4gICAgICBlbmFibGVBdXRvUmVtZWRpYXRpb25cbiAgICB9O1xuXG4gICAgdGhpcy5zZXR1cERlZmF1bHRSdWxlcygpO1xuICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuc2V0dXBDbGVhbnVwKCk7XG4gIH1cblxuICAvLyBBbGVydCBtYW5hZ2VtZW50XG4gIGNyZWF0ZUFsZXJ0KGFsZXJ0RGF0YTogT21pdDxBbGVydCwgJ2lkJyB8ICd0aW1lc3RhbXAnIHwgJ2Fja25vd2xlZGdlZCcgfCAncmVzb2x2ZWQnIHwgJ2FjdGlvbnMnPik6IEFsZXJ0IHtcbiAgICBjb25zdCBhbGVydDogQWxlcnQgPSB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIGFja25vd2xlZGdlZDogZmFsc2UsXG4gICAgICByZXNvbHZlZDogZmFsc2UsXG4gICAgICBhY3Rpb25zOiBbXSxcbiAgICAgIC4uLmFsZXJ0RGF0YVxuICAgIH07XG5cbiAgICB0aGlzLmFsZXJ0cy5wdXNoKGFsZXJ0KTtcbiAgICB0aGlzLmVtaXQoJ2FsZXJ0JywgYWxlcnQpO1xuXG4gICAgLy8gRXhlY3V0ZSBhbGVydCBhY3Rpb25zXG4gICAgdGhpcy5leGVjdXRlQWxlcnRBY3Rpb25zKGFsZXJ0KTtcblxuICAgIC8vIE1haW50YWluIGFsZXJ0IGxpbWl0XG4gICAgaWYgKHRoaXMuYWxlcnRzLmxlbmd0aCA+IHRoaXMub3B0aW9ucy5tYXhBbGVydHMhKSB7XG4gICAgICB0aGlzLmFsZXJ0cyA9IHRoaXMuYWxlcnRzLnNsaWNlKC10aGlzLm9wdGlvbnMubWF4QWxlcnRzISk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFsZXJ0O1xuICB9XG5cbiAgYWNrbm93bGVkZ2VBbGVydChhbGVydElkOiBzdHJpbmcsIGFja25vd2xlZGdlZEJ5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBhbGVydCA9IHRoaXMuYWxlcnRzLmZpbmQoYSA9PiBhLmlkID09PSBhbGVydElkKTtcbiAgICBpZiAoIWFsZXJ0IHx8IGFsZXJ0LmFja25vd2xlZGdlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGFsZXJ0LmFja25vd2xlZGdlZCA9IHRydWU7XG4gICAgYWxlcnQuYWNrbm93bGVkZ2VkQnkgPSBhY2tub3dsZWRnZWRCeTtcbiAgICBhbGVydC5hY2tub3dsZWRnZWRBdCA9IG5ldyBEYXRlKCk7XG5cbiAgICB0aGlzLmVtaXQoJ2FsZXJ0QWNrbm93bGVkZ2VkJywgYWxlcnQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmVzb2x2ZUFsZXJ0KGFsZXJ0SWQ6IHN0cmluZywgcmVzb2x2ZWRCeTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWxlcnQgPSB0aGlzLmFsZXJ0cy5maW5kKGEgPT4gYS5pZCA9PT0gYWxlcnRJZCk7XG4gICAgaWYgKCFhbGVydCB8fCBhbGVydC5yZXNvbHZlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGFsZXJ0LnJlc29sdmVkID0gdHJ1ZTtcbiAgICBhbGVydC5yZXNvbHZlZEJ5ID0gcmVzb2x2ZWRCeTtcbiAgICBhbGVydC5yZXNvbHZlZEF0ID0gbmV3IERhdGUoKTtcblxuICAgIHRoaXMuZW1pdCgnYWxlcnRSZXNvbHZlZCcsIGFsZXJ0KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldEFsZXJ0cyhmaWx0ZXJzPzoge1xuICAgIHNldmVyaXR5PzogQWxlcnRbJ3NldmVyaXR5J11bXTtcbiAgICB0eXBlPzogQWxlcnRbJ3R5cGUnXVtdO1xuICAgIGFja25vd2xlZGdlZD86IGJvb2xlYW47XG4gICAgcmVzb2x2ZWQ/OiBib29sZWFuO1xuICAgIHNpbmNlPzogRGF0ZTtcbiAgICBsaW1pdD86IG51bWJlcjtcbiAgfSk6IEFsZXJ0W10ge1xuICAgIGxldCBmaWx0ZXJlZEFsZXJ0cyA9IFsuLi50aGlzLmFsZXJ0c107XG5cbiAgICBpZiAoZmlsdGVycykge1xuICAgICAgaWYgKGZpbHRlcnMuc2V2ZXJpdHkpIHtcbiAgICAgICAgZmlsdGVyZWRBbGVydHMgPSBmaWx0ZXJlZEFsZXJ0cy5maWx0ZXIoYSA9PiBmaWx0ZXJzLnNldmVyaXR5IS5pbmNsdWRlcyhhLnNldmVyaXR5KSk7XG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVycy50eXBlKSB7XG4gICAgICAgIGZpbHRlcmVkQWxlcnRzID0gZmlsdGVyZWRBbGVydHMuZmlsdGVyKGEgPT4gZmlsdGVycy50eXBlIS5pbmNsdWRlcyhhLnR5cGUpKTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXJzLmFja25vd2xlZGdlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpbHRlcmVkQWxlcnRzID0gZmlsdGVyZWRBbGVydHMuZmlsdGVyKGEgPT4gYS5hY2tub3dsZWRnZWQgPT09IGZpbHRlcnMuYWNrbm93bGVkZ2VkKTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXJzLnJlc29sdmVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZmlsdGVyZWRBbGVydHMgPSBmaWx0ZXJlZEFsZXJ0cy5maWx0ZXIoYSA9PiBhLnJlc29sdmVkID09PSBmaWx0ZXJzLnJlc29sdmVkKTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXJzLnNpbmNlKSB7XG4gICAgICAgIGZpbHRlcmVkQWxlcnRzID0gZmlsdGVyZWRBbGVydHMuZmlsdGVyKGEgPT4gYS50aW1lc3RhbXAgPj0gZmlsdGVycy5zaW5jZSEpO1xuICAgICAgfVxuICAgICAgaWYgKGZpbHRlcnMubGltaXQpIHtcbiAgICAgICAgZmlsdGVyZWRBbGVydHMgPSBmaWx0ZXJlZEFsZXJ0cy5zbGljZSgtZmlsdGVycy5saW1pdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlcmVkQWxlcnRzLnNvcnQoKGEsIGIpID0+IGIudGltZXN0YW1wLmdldFRpbWUoKSAtIGEudGltZXN0YW1wLmdldFRpbWUoKSk7XG4gIH1cblxuICAvLyBSdWxlIG1hbmFnZW1lbnRcbiAgYWRkUnVsZShydWxlOiBPbWl0PEFsZXJ0UnVsZSwgJ2lkJz4pOiBBbGVydFJ1bGUge1xuICAgIGNvbnN0IG5ld1J1bGU6IEFsZXJ0UnVsZSA9IHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgLi4ucnVsZVxuICAgIH07XG5cbiAgICB0aGlzLnJ1bGVzLnB1c2gobmV3UnVsZSk7XG4gICAgdGhpcy5lbWl0KCdydWxlQWRkZWQnLCBuZXdSdWxlKTtcbiAgICByZXR1cm4gbmV3UnVsZTtcbiAgfVxuXG4gIHVwZGF0ZVJ1bGUocnVsZUlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8QWxlcnRSdWxlPik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHJ1bGVJbmRleCA9IHRoaXMucnVsZXMuZmluZEluZGV4KHIgPT4gci5pZCA9PT0gcnVsZUlkKTtcbiAgICBpZiAocnVsZUluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMucnVsZXNbcnVsZUluZGV4XSA9IHsgLi4udGhpcy5ydWxlc1tydWxlSW5kZXhdLCAuLi51cGRhdGVzIH07XG4gICAgdGhpcy5lbWl0KCdydWxlVXBkYXRlZCcsIHRoaXMucnVsZXNbcnVsZUluZGV4XSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZW1vdmVSdWxlKHJ1bGVJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcnVsZUluZGV4ID0gdGhpcy5ydWxlcy5maW5kSW5kZXgociA9PiByLmlkID09PSBydWxlSWQpO1xuICAgIGlmIChydWxlSW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgcnVsZSA9IHRoaXMucnVsZXMuc3BsaWNlKHJ1bGVJbmRleCwgMSlbMF07XG4gICAgdGhpcy5lbWl0KCdydWxlUmVtb3ZlZCcsIHJ1bGUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0UnVsZXMoKTogQWxlcnRSdWxlW10ge1xuICAgIHJldHVybiBbLi4udGhpcy5ydWxlc107XG4gIH1cblxuICAvLyBOb3RpZmljYXRpb24gY2hhbm5lbCBtYW5hZ2VtZW50XG4gIGFkZENoYW5uZWwoY2hhbm5lbDogT21pdDxOb3RpZmljYXRpb25DaGFubmVsLCAnaWQnPik6IE5vdGlmaWNhdGlvbkNoYW5uZWwge1xuICAgIGNvbnN0IG5ld0NoYW5uZWw6IE5vdGlmaWNhdGlvbkNoYW5uZWwgPSB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgIC4uLmNoYW5uZWxcbiAgICB9O1xuXG4gICAgdGhpcy5jaGFubmVscy5wdXNoKG5ld0NoYW5uZWwpO1xuICAgIHRoaXMuZW1pdCgnY2hhbm5lbEFkZGVkJywgbmV3Q2hhbm5lbCk7XG4gICAgcmV0dXJuIG5ld0NoYW5uZWw7XG4gIH1cblxuICB1cGRhdGVDaGFubmVsKGNoYW5uZWxJZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPE5vdGlmaWNhdGlvbkNoYW5uZWw+KTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2hhbm5lbEluZGV4ID0gdGhpcy5jaGFubmVscy5maW5kSW5kZXgoYyA9PiBjLmlkID09PSBjaGFubmVsSWQpO1xuICAgIGlmIChjaGFubmVsSW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5jaGFubmVsc1tjaGFubmVsSW5kZXhdID0geyAuLi50aGlzLmNoYW5uZWxzW2NoYW5uZWxJbmRleF0sIC4uLnVwZGF0ZXMgfTtcbiAgICB0aGlzLmVtaXQoJ2NoYW5uZWxVcGRhdGVkJywgdGhpcy5jaGFubmVsc1tjaGFubmVsSW5kZXhdKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJlbW92ZUNoYW5uZWwoY2hhbm5lbElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBjaGFubmVsSW5kZXggPSB0aGlzLmNoYW5uZWxzLmZpbmRJbmRleChjID0+IGMuaWQgPT09IGNoYW5uZWxJZCk7XG4gICAgaWYgKGNoYW5uZWxJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFubmVsID0gdGhpcy5jaGFubmVscy5zcGxpY2UoY2hhbm5lbEluZGV4LCAxKVswXTtcbiAgICB0aGlzLmVtaXQoJ2NoYW5uZWxSZW1vdmVkJywgY2hhbm5lbCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBnZXRDaGFubmVscygpOiBOb3RpZmljYXRpb25DaGFubmVsW10ge1xuICAgIHJldHVybiBbLi4udGhpcy5jaGFubmVsc107XG4gIH1cblxuICAvLyBBbGVydCBwcm9jZXNzaW5nXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUFsZXJ0QWN0aW9ucyhhbGVydDogQWxlcnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBtYXRjaGluZ1J1bGVzID0gdGhpcy5ydWxlcy5maWx0ZXIocnVsZSA9PiBcbiAgICAgIHJ1bGUuZW5hYmxlZCAmJiB0aGlzLmRvZXNFdmVudE1hdGNoUnVsZShhbGVydCwgcnVsZSlcbiAgICApO1xuXG4gICAgZm9yIChjb25zdCBydWxlIG9mIG1hdGNoaW5nUnVsZXMpIHtcbiAgICAgIC8vIENoZWNrIGNvb2xkb3duXG4gICAgICBpZiAocnVsZS5jb29sZG93biAmJiBydWxlLmxhc3RUcmlnZ2VyZWQpIHtcbiAgICAgICAgY29uc3QgY29vbGRvd25FbmQgPSBuZXcgRGF0ZShydWxlLmxhc3RUcmlnZ2VyZWQuZ2V0VGltZSgpICsgcnVsZS5jb29sZG93biAqIDYwICogMTAwMCk7XG4gICAgICAgIGlmIChuZXcgRGF0ZSgpIDwgY29vbGRvd25FbmQpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBFeGVjdXRlIHJ1bGUgYWN0aW9uc1xuICAgICAgZm9yIChjb25zdCBhY3Rpb25UZW1wbGF0ZSBvZiBydWxlLmFjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYWN0aW9uOiBBbGVydEFjdGlvbiA9IHtcbiAgICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgICBleGVjdXRlZDogZmFsc2UsXG4gICAgICAgICAgLi4uYWN0aW9uVGVtcGxhdGVcbiAgICAgICAgfTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZXhlY3V0ZUFjdGlvbihhY3Rpb24sIGFsZXJ0KTtcbiAgICAgICAgICBhY3Rpb24uZXhlY3V0ZWQgPSB0cnVlO1xuICAgICAgICAgIGFjdGlvbi5leGVjdXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICBhY3Rpb24ucmVzdWx0ID0gJ3N1Y2Nlc3MnO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGFjdGlvbi5leGVjdXRlZCA9IGZhbHNlO1xuICAgICAgICAgIGFjdGlvbi5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgICB9XG5cbiAgICAgICAgYWxlcnQuYWN0aW9ucy5wdXNoKGFjdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHJ1bGUubGFzdFRyaWdnZXJlZCA9IG5ldyBEYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkb2VzRXZlbnRNYXRjaFJ1bGUoYWxlcnQ6IEFsZXJ0LCBydWxlOiBBbGVydFJ1bGUpOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGNvbmRpdGlvbnMgfSA9IHJ1bGU7XG5cbiAgICBpZiAoY29uZGl0aW9ucy5ldmVudFR5cGUgJiYgIWNvbmRpdGlvbnMuZXZlbnRUeXBlLmluY2x1ZGVzKGFsZXJ0LnR5cGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGNvbmRpdGlvbnMuc2V2ZXJpdHkgJiYgIWNvbmRpdGlvbnMuc2V2ZXJpdHkuaW5jbHVkZXMoYWxlcnQuc2V2ZXJpdHkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGNvbmRpdGlvbnMuc291cmNlICYmICFjb25kaXRpb25zLnNvdXJjZS5zb21lKHMgPT4gYWxlcnQuc291cmNlLmluY2x1ZGVzKHMpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChjb25kaXRpb25zLnBhdHRlcm4gJiYgIWNvbmRpdGlvbnMucGF0dGVybi50ZXN0KGFsZXJ0Lm1lc3NhZ2UpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGNvbmRpdGlvbnMudGhyZXNob2xkKSB7XG4gICAgICBjb25zdCBrZXkgPSBgJHtydWxlLmlkfV8ke2FsZXJ0LnR5cGV9XyR7YWxlcnQuc291cmNlfWA7XG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuZXZlbnRDb3VudHMuaGFzKGtleSkpIHtcbiAgICAgICAgdGhpcy5ldmVudENvdW50cy5zZXQoa2V5LCB7IGNvdW50OiAxLCBmaXJzdFNlZW46IG5vdyB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBldmVudERhdGEgPSB0aGlzLmV2ZW50Q291bnRzLmdldChrZXkpITtcbiAgICAgIGNvbnN0IHdpbmRvd1N0YXJ0ID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIGNvbmRpdGlvbnMudGhyZXNob2xkLnRpbWVXaW5kb3cgKiA2MCAqIDEwMDApO1xuICAgICAgXG4gICAgICBpZiAoZXZlbnREYXRhLmZpcnN0U2VlbiA8IHdpbmRvd1N0YXJ0KSB7XG4gICAgICAgIC8vIFJlc2V0IGNvdW50ZXIgZm9yIG5ldyB3aW5kb3dcbiAgICAgICAgdGhpcy5ldmVudENvdW50cy5zZXQoa2V5LCB7IGNvdW50OiAxLCBmaXJzdFNlZW46IG5vdyB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBldmVudERhdGEuY291bnQrKztcbiAgICAgIHJldHVybiBldmVudERhdGEuY291bnQgPj0gY29uZGl0aW9ucy50aHJlc2hvbGQuY291bnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVBY3Rpb24oYWN0aW9uOiBBbGVydEFjdGlvbiwgYWxlcnQ6IEFsZXJ0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY2hhbm5lbCA9IHRoaXMuY2hhbm5lbHMuZmluZChjID0+IGMuaWQgPT09IGFjdGlvbi50YXJnZXQgJiYgYy5lbmFibGVkKTtcbiAgICBpZiAoIWNoYW5uZWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hhbm5lbCAke2FjdGlvbi50YXJnZXR9IG5vdCBmb3VuZCBvciBkaXNhYmxlZGApO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kRW1haWxBbGVydChjaGFubmVsLCBhbGVydCwgYWN0aW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd3ZWJob29rJzpcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kV2ViaG9va0FsZXJ0KGNoYW5uZWwsIGFsZXJ0LCBhY3Rpb24pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NsYWNrJzpcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kU2xhY2tBbGVydChjaGFubmVsLCBhbGVydCwgYWN0aW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzbXMnOlxuICAgICAgICBhd2FpdCB0aGlzLnNlbmRTTVNBbGVydChjaGFubmVsLCBhbGVydCwgYWN0aW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdsb2cnOlxuICAgICAgICBhd2FpdCB0aGlzLmxvZ0FsZXJ0KGFsZXJ0LCBhY3Rpb24pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2F1dG8tcmVtZWRpYXRlJzpcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lbmFibGVBdXRvUmVtZWRpYXRpb24pIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVBdXRvUmVtZWRpYXRpb24oYWxlcnQsIGFjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gYWN0aW9uIHR5cGU6ICR7YWN0aW9uLnR5cGV9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kRW1haWxBbGVydChjaGFubmVsOiBOb3RpZmljYXRpb25DaGFubmVsLCBhbGVydDogQWxlcnQsIGFjdGlvbjogQWxlcnRBY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBFbWFpbCBpbXBsZW1lbnRhdGlvbiB3b3VsZCBnbyBoZXJlXG4gICAgLy8gRm9yIG5vdywganVzdCBsb2cgdGhlIGFjdGlvblxuICAgIGxvZ0FnZ3JlZ2F0b3IuaW5mbygnYWxlcnRpbmctc3lzdGVtJywgYEVtYWlsIGFsZXJ0IHNlbnQ6ICR7YWxlcnQudGl0bGV9YCwge1xuICAgICAgY2hhbm5lbDogY2hhbm5lbC5uYW1lLFxuICAgICAgYWxlcnQ6IGFsZXJ0LmlkLFxuICAgICAgc2V2ZXJpdHk6IGFsZXJ0LnNldmVyaXR5XG4gICAgfSwgWydhbGVydCcsICdlbWFpbCddKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZFdlYmhvb2tBbGVydChjaGFubmVsOiBOb3RpZmljYXRpb25DaGFubmVsLCBhbGVydDogQWxlcnQsIGFjdGlvbjogQWxlcnRBY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IHdlYmhvb2sgfSA9IGNoYW5uZWwuY29uZmlnO1xuICAgIGlmICghd2ViaG9vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJob29rIGNvbmZpZ3VyYXRpb24gbWlzc2luZycpO1xuICAgIH1cblxuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBhbGVydDoge1xuICAgICAgICBpZDogYWxlcnQuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogYWxlcnQudGltZXN0YW1wLFxuICAgICAgICBzZXZlcml0eTogYWxlcnQuc2V2ZXJpdHksXG4gICAgICAgIHR5cGU6IGFsZXJ0LnR5cGUsXG4gICAgICAgIHRpdGxlOiBhbGVydC50aXRsZSxcbiAgICAgICAgbWVzc2FnZTogYWxlcnQubWVzc2FnZSxcbiAgICAgICAgc291cmNlOiBhbGVydC5zb3VyY2UsXG4gICAgICAgIG1ldGFkYXRhOiBhbGVydC5tZXRhZGF0YVxuICAgICAgfSxcbiAgICAgIGFjdGlvbjogYWN0aW9uLmNvbmZpZyB8fCB7fVxuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh3ZWJob29rLnVybCwge1xuICAgICAgICBtZXRob2Q6IHdlYmhvb2subWV0aG9kIHx8ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgLi4ud2ViaG9vay5oZWFkZXJzXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFdlYmhvb2sgcmV0dXJuZWQgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGxvZ0FnZ3JlZ2F0b3IuaW5mbygnYWxlcnRpbmctc3lzdGVtJywgYFdlYmhvb2sgYWxlcnQgc2VudDogJHthbGVydC50aXRsZX1gLCB7XG4gICAgICAgIGNoYW5uZWw6IGNoYW5uZWwubmFtZSxcbiAgICAgICAgYWxlcnQ6IGFsZXJ0LmlkLFxuICAgICAgICB3ZWJob29rOiB3ZWJob29rLnVybCxcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXNcbiAgICAgIH0sIFsnYWxlcnQnLCAnd2ViaG9vayddKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBXZWJob29rIGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRTbGFja0FsZXJ0KGNoYW5uZWw6IE5vdGlmaWNhdGlvbkNoYW5uZWwsIGFsZXJ0OiBBbGVydCwgYWN0aW9uOiBBbGVydEFjdGlvbik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgc2xhY2sgfSA9IGNoYW5uZWwuY29uZmlnO1xuICAgIGlmICghc2xhY2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU2xhY2sgY29uZmlndXJhdGlvbiBtaXNzaW5nJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2V2ZXJpdHlFbW9qaSA9IHtcbiAgICAgIGxvdzogJ/Cfn6InLFxuICAgICAgbWVkaXVtOiAn8J+foScsXG4gICAgICBoaWdoOiAn8J+foCcsXG4gICAgICBjcml0aWNhbDogJ/CflLQnXG4gICAgfTtcblxuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBjaGFubmVsOiBzbGFjay5jaGFubmVsLFxuICAgICAgdGV4dDogYCR7c2V2ZXJpdHlFbW9qaVthbGVydC5zZXZlcml0eV19IFNlY3VyaXR5IEFsZXJ0OiAke2FsZXJ0LnRpdGxlfWAsXG4gICAgICBhdHRhY2htZW50czogW3tcbiAgICAgICAgY29sb3I6IGFsZXJ0LnNldmVyaXR5ID09PSAnY3JpdGljYWwnID8gJ2RhbmdlcicgOiBcbiAgICAgICAgICAgICAgIGFsZXJ0LnNldmVyaXR5ID09PSAnaGlnaCcgPyAnd2FybmluZycgOiAnZ29vZCcsXG4gICAgICAgIGZpZWxkczogW1xuICAgICAgICAgIHsgdGl0bGU6ICdTZXZlcml0eScsIHZhbHVlOiBhbGVydC5zZXZlcml0eS50b1VwcGVyQ2FzZSgpLCBzaG9ydDogdHJ1ZSB9LFxuICAgICAgICAgIHsgdGl0bGU6ICdUeXBlJywgdmFsdWU6IGFsZXJ0LnR5cGUsIHNob3J0OiB0cnVlIH0sXG4gICAgICAgICAgeyB0aXRsZTogJ1NvdXJjZScsIHZhbHVlOiBhbGVydC5zb3VyY2UsIHNob3J0OiB0cnVlIH0sXG4gICAgICAgICAgeyB0aXRsZTogJ1RpbWUnLCB2YWx1ZTogYWxlcnQudGltZXN0YW1wLnRvSVNPU3RyaW5nKCksIHNob3J0OiB0cnVlIH0sXG4gICAgICAgICAgeyB0aXRsZTogJ01lc3NhZ2UnLCB2YWx1ZTogYWxlcnQubWVzc2FnZSwgc2hvcnQ6IGZhbHNlIH1cbiAgICAgICAgXSxcbiAgICAgICAgdGltZXN0YW1wOiBNYXRoLmZsb29yKGFsZXJ0LnRpbWVzdGFtcC5nZXRUaW1lKCkgLyAxMDAwKVxuICAgICAgfV1cbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goc2xhY2sud2ViaG9vaywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNsYWNrIHdlYmhvb2sgcmV0dXJuZWQgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGxvZ0FnZ3JlZ2F0b3IuaW5mbygnYWxlcnRpbmctc3lzdGVtJywgYFNsYWNrIGFsZXJ0IHNlbnQ6ICR7YWxlcnQudGl0bGV9YCwge1xuICAgICAgICBjaGFubmVsOiBjaGFubmVsLm5hbWUsXG4gICAgICAgIGFsZXJ0OiBhbGVydC5pZCxcbiAgICAgICAgc2xhY2tDaGFubmVsOiBzbGFjay5jaGFubmVsXG4gICAgICB9LCBbJ2FsZXJ0JywgJ3NsYWNrJ10pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFNsYWNrIGFsZXJ0IGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRTTVNBbGVydChjaGFubmVsOiBOb3RpZmljYXRpb25DaGFubmVsLCBhbGVydDogQWxlcnQsIGFjdGlvbjogQWxlcnRBY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBTTVMgaW1wbGVtZW50YXRpb24gd291bGQgZ28gaGVyZVxuICAgIGxvZ0FnZ3JlZ2F0b3IuaW5mbygnYWxlcnRpbmctc3lzdGVtJywgYFNNUyBhbGVydCBzZW50OiAke2FsZXJ0LnRpdGxlfWAsIHtcbiAgICAgIGNoYW5uZWw6IGNoYW5uZWwubmFtZSxcbiAgICAgIGFsZXJ0OiBhbGVydC5pZCxcbiAgICAgIHNldmVyaXR5OiBhbGVydC5zZXZlcml0eVxuICAgIH0sIFsnYWxlcnQnLCAnc21zJ10pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2dBbGVydChhbGVydDogQWxlcnQsIGFjdGlvbjogQWxlcnRBY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsb2dBZ2dyZWdhdG9yLndhcm4oJ2FsZXJ0aW5nLXN5c3RlbScsIGBBTEVSVDogJHthbGVydC50aXRsZX1gLCB7XG4gICAgICBhbGVydElkOiBhbGVydC5pZCxcbiAgICAgIHNldmVyaXR5OiBhbGVydC5zZXZlcml0eSxcbiAgICAgIHR5cGU6IGFsZXJ0LnR5cGUsXG4gICAgICBzb3VyY2U6IGFsZXJ0LnNvdXJjZSxcbiAgICAgIG1lc3NhZ2U6IGFsZXJ0Lm1lc3NhZ2UsXG4gICAgICBtZXRhZGF0YTogYWxlcnQubWV0YWRhdGFcbiAgICB9LCBbJ2FsZXJ0JywgJ2xvZ2dlZCddKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUF1dG9SZW1lZGlhdGlvbihhbGVydDogQWxlcnQsIGFjdGlvbjogQWxlcnRBY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBBdXRvLXJlbWVkaWF0aW9uIGxvZ2ljIHdvdWxkIGdvIGhlcmVcbiAgICBsb2dBZ2dyZWdhdG9yLmluZm8oJ2FsZXJ0aW5nLXN5c3RlbScsIGBBdXRvLXJlbWVkaWF0aW9uIHRyaWdnZXJlZCBmb3I6ICR7YWxlcnQudGl0bGV9YCwge1xuICAgICAgYWxlcnQ6IGFsZXJ0LmlkLFxuICAgICAgcmVtZWRpYXRpb246IGFjdGlvbi5jb25maWdcbiAgICB9LCBbJ2FsZXJ0JywgJ2F1dG8tcmVtZWRpYXRpb24nXSk7XG4gIH1cblxuICAvLyBFdmVudCBsaXN0ZW5lcnMgc2V0dXBcbiAgcHJpdmF0ZSBzZXR1cEV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIC8vIExpc3RlbiB0byBzZWN1cml0eSBldmVudHNcbiAgICBzZWN1cml0eU1vbml0b3Iub24oJ3NlY3VyaXR5RXZlbnQnLCAoZXZlbnQ6IFNlY3VyaXR5RXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoe1xuICAgICAgICBzZXZlcml0eTogZXZlbnQuc2V2ZXJpdHksXG4gICAgICAgIHR5cGU6ICdzZWN1cml0eScsXG4gICAgICAgIHRpdGxlOiBgU2VjdXJpdHkgRXZlbnQ6ICR7ZXZlbnQudHlwZX1gLFxuICAgICAgICBtZXNzYWdlOiBldmVudC5tZXNzYWdlLFxuICAgICAgICBzb3VyY2U6IGV2ZW50LnNvdXJjZSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBldmVudElkOiBldmVudC5pZCxcbiAgICAgICAgICBldmVudFR5cGU6IGV2ZW50LnR5cGUsXG4gICAgICAgICAgZXZlbnREZXRhaWxzOiBldmVudC5kZXRhaWxzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc2VjdXJpdHlNb25pdG9yLm9uKCdjcml0aWNhbEFsZXJ0JywgKGV2ZW50OiBTZWN1cml0eUV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KHtcbiAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCcsXG4gICAgICAgIHR5cGU6ICdzZWN1cml0eScsXG4gICAgICAgIHRpdGxlOiBgQ1JJVElDQUw6ICR7ZXZlbnQudHlwZX1gLFxuICAgICAgICBtZXNzYWdlOiBldmVudC5tZXNzYWdlLFxuICAgICAgICBzb3VyY2U6IGV2ZW50LnNvdXJjZSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBldmVudElkOiBldmVudC5pZCxcbiAgICAgICAgICBldmVudFR5cGU6IGV2ZW50LnR5cGUsXG4gICAgICAgICAgZXZlbnREZXRhaWxzOiBldmVudC5kZXRhaWxzLFxuICAgICAgICAgIGNyaXRpY2FsOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gTGlzdGVuIHRvIGxvZyBhbmFseXNpcyBldmVudHNcbiAgICBsb2dBZ2dyZWdhdG9yLm9uKCdhbmFseXNpc0NvbXBsZXRlJywgKGFuYWx5c2lzOiBMb2dBbmFseXNpcykgPT4ge1xuICAgICAgY29uc3QgY3JpdGljYWxQYXR0ZXJucyA9IGFuYWx5c2lzLnBhdHRlcm5zLmZpbHRlcihwID0+IHAuc2V2ZXJpdHkgPT09ICdjcml0aWNhbCcpO1xuICAgICAgY29uc3QgaGlnaFBhdHRlcm5zID0gYW5hbHlzaXMucGF0dGVybnMuZmlsdGVyKHAgPT4gcC5zZXZlcml0eSA9PT0gJ2hpZ2gnKTtcbiAgICAgIFxuICAgICAgaWYgKGNyaXRpY2FsUGF0dGVybnMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmNyZWF0ZUFsZXJ0KHtcbiAgICAgICAgICBzZXZlcml0eTogJ2NyaXRpY2FsJyxcbiAgICAgICAgICB0eXBlOiAnc3lzdGVtJyxcbiAgICAgICAgICB0aXRsZTogJ0NyaXRpY2FsIExvZyBQYXR0ZXJucyBEZXRlY3RlZCcsXG4gICAgICAgICAgbWVzc2FnZTogYCR7Y3JpdGljYWxQYXR0ZXJucy5sZW5ndGh9IGNyaXRpY2FsIHBhdHRlcm5zIGZvdW5kIGluIGxvZyBhbmFseXNpc2AsXG4gICAgICAgICAgc291cmNlOiAnbG9nLWFuYWx5emVyJyxcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgYW5hbHlzaXNJZDogYW5hbHlzaXMuaWQsXG4gICAgICAgICAgICBwYXR0ZXJuczogY3JpdGljYWxQYXR0ZXJucyxcbiAgICAgICAgICAgIHRpbWVSYW5nZTogYW5hbHlzaXMudGltZVJhbmdlXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoaGlnaFBhdHRlcm5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5jcmVhdGVBbGVydCh7XG4gICAgICAgICAgc2V2ZXJpdHk6ICdoaWdoJyxcbiAgICAgICAgICB0eXBlOiAnc3lzdGVtJyxcbiAgICAgICAgICB0aXRsZTogJ0hpZ2gtU2V2ZXJpdHkgTG9nIFBhdHRlcm5zIERldGVjdGVkJyxcbiAgICAgICAgICBtZXNzYWdlOiBgJHtoaWdoUGF0dGVybnMubGVuZ3RofSBoaWdoLXNldmVyaXR5IHBhdHRlcm5zIGZvdW5kIGluIGxvZyBhbmFseXNpc2AsXG4gICAgICAgICAgc291cmNlOiAnbG9nLWFuYWx5emVyJyxcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgYW5hbHlzaXNJZDogYW5hbHlzaXMuaWQsXG4gICAgICAgICAgICBwYXR0ZXJuczogaGlnaFBhdHRlcm5zLFxuICAgICAgICAgICAgdGltZVJhbmdlOiBhbmFseXNpcy50aW1lUmFuZ2VcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbG9nQWdncmVnYXRvci5vbigncGF0dGVybkRldGVjdGVkJywgKGRhdGE6IGFueSkgPT4ge1xuICAgICAgaWYgKGRhdGEucGF0dGVybi5zZXZlcml0eSA9PT0gJ2NyaXRpY2FsJyB8fCBkYXRhLnBhdHRlcm4uc2V2ZXJpdHkgPT09ICdoaWdoJykge1xuICAgICAgICB0aGlzLmNyZWF0ZUFsZXJ0KHtcbiAgICAgICAgICBzZXZlcml0eTogZGF0YS5wYXR0ZXJuLnNldmVyaXR5LFxuICAgICAgICAgIHR5cGU6IGRhdGEucGF0dGVybi50eXBlLFxuICAgICAgICAgIHRpdGxlOiBgUGF0dGVybiBEZXRlY3RlZDogJHtkYXRhLnBhdHRlcm4uZGVzY3JpcHRpb259YCxcbiAgICAgICAgICBtZXNzYWdlOiBkYXRhLmxvZ0VudHJ5Lm1lc3NhZ2UsXG4gICAgICAgICAgc291cmNlOiBkYXRhLmxvZ0VudHJ5LnNvdXJjZSxcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgcGF0dGVybjogZGF0YS5wYXR0ZXJuLFxuICAgICAgICAgICAgbG9nRW50cnk6IGRhdGEubG9nRW50cnlcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gRGVmYXVsdCBydWxlcyBzZXR1cFxuICBwcml2YXRlIHNldHVwRGVmYXVsdFJ1bGVzKCk6IHZvaWQge1xuICAgIGNvbnN0IGRlZmF1bHRSdWxlczogT21pdDxBbGVydFJ1bGUsICdpZCc+W10gPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdDcml0aWNhbCBTZWN1cml0eSBFdmVudHMnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0FsZXJ0IG9uIGFueSBjcml0aWNhbCBzZWN1cml0eSBldmVudHMnLFxuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICBjb25kaXRpb25zOiB7XG4gICAgICAgICAgZXZlbnRUeXBlOiBbJ3NlY3VyaXR5J10sXG4gICAgICAgICAgc2V2ZXJpdHk6IFsnY3JpdGljYWwnXVxuICAgICAgICB9LFxuICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgeyB0eXBlOiAnbG9nJywgdGFyZ2V0OiAnc3lzdGVtJywgY29uZmlnOiB7fSB9XG4gICAgICAgIF0sXG4gICAgICAgIGNvb2xkb3duOiA1XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnTXVsdGlwbGUgQXV0aGVudGljYXRpb24gRmFpbHVyZXMnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0FsZXJ0IHdoZW4gbXVsdGlwbGUgYXV0aGVudGljYXRpb24gZmFpbHVyZXMgb2NjdXInLFxuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICBjb25kaXRpb25zOiB7XG4gICAgICAgICAgcGF0dGVybjogL2F1dGhlbnRpY2F0aW9uLipmYWlsZWR8bG9naW4uKmZhaWxlZC9pLFxuICAgICAgICAgIHRocmVzaG9sZDogeyBjb3VudDogNSwgdGltZVdpbmRvdzogMTUgfVxuICAgICAgICB9LFxuICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgeyB0eXBlOiAnbG9nJywgdGFyZ2V0OiAnc3lzdGVtJywgY29uZmlnOiB7fSB9XG4gICAgICAgIF0sXG4gICAgICAgIGNvb2xkb3duOiAxMFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1N5c3RlbSBQZXJmb3JtYW5jZSBJc3N1ZXMnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0FsZXJ0IG9uIHN5c3RlbSBwZXJmb3JtYW5jZSBkZWdyYWRhdGlvbicsXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGNvbmRpdGlvbnM6IHtcbiAgICAgICAgICBldmVudFR5cGU6IFsncGVyZm9ybWFuY2UnXSxcbiAgICAgICAgICBzZXZlcml0eTogWydoaWdoJywgJ2NyaXRpY2FsJ11cbiAgICAgICAgfSxcbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgIHsgdHlwZTogJ2xvZycsIHRhcmdldDogJ3N5c3RlbScsIGNvbmZpZzoge30gfVxuICAgICAgICBdLFxuICAgICAgICBjb29sZG93bjogMTVcbiAgICAgIH1cbiAgICBdO1xuXG4gICAgZGVmYXVsdFJ1bGVzLmZvckVhY2gocnVsZSA9PiB0aGlzLmFkZFJ1bGUocnVsZSkpO1xuICB9XG5cbiAgLy8gQW5hbHl0aWNzXG4gIGdldEFsZXJ0U3RhdGlzdGljcygpOiB7XG4gICAgdG90YWw6IG51bWJlcjtcbiAgICBieVNldmVyaXR5OiBSZWNvcmQ8J2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCcsIG51bWJlcj47XG4gICAgYnlUeXBlOiBSZWNvcmQ8J3NlY3VyaXR5JyB8ICdwZXJmb3JtYW5jZScgfCAnc3lzdGVtJyB8ICdjb21wbGlhbmNlJywgbnVtYmVyPjtcbiAgICBhY2tub3dsZWRnZWQ6IG51bWJlcjtcbiAgICByZXNvbHZlZDogbnVtYmVyO1xuICAgIHJlY2VudEFjdGl2aXR5OiB7IGRhdGU6IHN0cmluZzsgY291bnQ6IG51bWJlciB9W107XG4gICAgY3JpdGljYWw6IG51bWJlcjtcbiAgfSB7XG4gICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICB0b3RhbDogdGhpcy5hbGVydHMubGVuZ3RoLFxuICAgICAgYnlTZXZlcml0eTogeyBsb3c6IDAsIG1lZGl1bTogMCwgaGlnaDogMCwgY3JpdGljYWw6IDAgfSBhcyBSZWNvcmQ8QWxlcnRbJ3NldmVyaXR5J10sIG51bWJlcj4sXG4gICAgICBieVR5cGU6IHsgc2VjdXJpdHk6IDAsIHBlcmZvcm1hbmNlOiAwLCBzeXN0ZW06IDAsIGNvbXBsaWFuY2U6IDAgfSBhcyBSZWNvcmQ8QWxlcnRbJ3R5cGUnXSwgbnVtYmVyPixcbiAgICAgIGFja25vd2xlZGdlZDogdGhpcy5hbGVydHMuZmlsdGVyKGEgPT4gYS5hY2tub3dsZWRnZWQpLmxlbmd0aCxcbiAgICAgIHJlc29sdmVkOiB0aGlzLmFsZXJ0cy5maWx0ZXIoYSA9PiBhLnJlc29sdmVkKS5sZW5ndGgsXG4gICAgICByZWNlbnRBY3Rpdml0eTogW10gYXMgeyBkYXRlOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfVtdXG4gICAgfTtcblxuICAgIHRoaXMuYWxlcnRzLmZvckVhY2goYWxlcnQgPT4ge1xuICAgICAgc3RhdHMuYnlTZXZlcml0eVthbGVydC5zZXZlcml0eV0rKztcbiAgICAgIHN0YXRzLmJ5VHlwZVthbGVydC50eXBlXSsrO1xuICAgIH0pO1xuXG4gICAgLy8gUmVjZW50IGFjdGl2aXR5IChsYXN0IDcgZGF5cylcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGZvciAobGV0IGkgPSA2OyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSBpICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICBjb25zdCBkYXlTdGFydCA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSk7XG4gICAgICBjb25zdCBkYXlFbmQgPSBuZXcgRGF0ZShkYXlTdGFydC5nZXRUaW1lKCkgKyAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgY291bnQgPSB0aGlzLmFsZXJ0cy5maWx0ZXIoYWxlcnQgPT4gXG4gICAgICAgIGFsZXJ0LnRpbWVzdGFtcCA+PSBkYXlTdGFydCAmJiBhbGVydC50aW1lc3RhbXAgPCBkYXlFbmRcbiAgICAgICkubGVuZ3RoO1xuICAgICAgXG4gICAgICBzdGF0cy5yZWNlbnRBY3Rpdml0eS5wdXNoKHtcbiAgICAgICAgZGF0ZTogZGF5U3RhcnQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgICBjb3VudFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRzLFxuICAgICAgY3JpdGljYWw6IHN0YXRzLmJ5U2V2ZXJpdHkuY3JpdGljYWxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2xlYW51cFxuICBwcml2YXRlIHNldHVwQ2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFudXBJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGNvbnN0IGN1dG9mZkRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgY3V0b2ZmRGF0ZS5zZXREYXRlKGN1dG9mZkRhdGUuZ2V0RGF0ZSgpIC0gdGhpcy5vcHRpb25zLmFsZXJ0UmV0ZW50aW9uRGF5cyEpO1xuICAgICAgXG4gICAgICB0aGlzLmFsZXJ0cyA9IHRoaXMuYWxlcnRzLmZpbHRlcihhbGVydCA9PiBhbGVydC50aW1lc3RhbXAgPj0gY3V0b2ZmRGF0ZSk7XG4gICAgICBcbiAgICAgIC8vIENsZWFuIHVwIGV2ZW50IGNvdW50cyBvbGRlciB0aGFuIDI0IGhvdXJzXG4gICAgICBjb25zdCBldmVudEN1dG9mZiA9IG5ldyBEYXRlKERhdGUubm93KCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgZGF0YV0gb2YgdGhpcy5ldmVudENvdW50cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKGRhdGEuZmlyc3RTZWVuIDwgZXZlbnRDdXRvZmYpIHtcbiAgICAgICAgICB0aGlzLmV2ZW50Q291bnRzLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMjQgKiA2MCAqIDYwICogMTAwMCk7IC8vIERhaWx5IGNsZWFudXBcbiAgfVxuXG4gIC8vIENsZWFudXAgcmVzb3VyY2VzXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2xlYW51cEludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuY2xlYW51cEludGVydmFsKTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgYWxlcnRpbmdTeXN0ZW0gPSBuZXcgQWxlcnRpbmdTeXN0ZW0oe1xuICBtYXhBbGVydHM6IDUwMDAsXG4gIGFsZXJ0UmV0ZW50aW9uRGF5czogOTAsXG4gIGVuYWJsZUF1dG9SZW1lZGlhdGlvbjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJ1xufSk7Il0sIm5hbWVzIjpbIkFsZXJ0aW5nU3lzdGVtIiwiYWxlcnRpbmdTeXN0ZW0iLCJFdmVudEVtaXR0ZXIiLCJjcmVhdGVBbGVydCIsImFsZXJ0RGF0YSIsImFsZXJ0IiwiaWQiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwidGltZXN0YW1wIiwiRGF0ZSIsImFja25vd2xlZGdlZCIsInJlc29sdmVkIiwiYWN0aW9ucyIsImFsZXJ0cyIsInB1c2giLCJlbWl0IiwiZXhlY3V0ZUFsZXJ0QWN0aW9ucyIsImxlbmd0aCIsIm9wdGlvbnMiLCJtYXhBbGVydHMiLCJzbGljZSIsImFja25vd2xlZGdlQWxlcnQiLCJhbGVydElkIiwiYWNrbm93bGVkZ2VkQnkiLCJmaW5kIiwiYSIsImFja25vd2xlZGdlZEF0IiwicmVzb2x2ZUFsZXJ0IiwicmVzb2x2ZWRCeSIsInJlc29sdmVkQXQiLCJnZXRBbGVydHMiLCJmaWx0ZXJzIiwiZmlsdGVyZWRBbGVydHMiLCJzZXZlcml0eSIsImZpbHRlciIsImluY2x1ZGVzIiwidHlwZSIsInVuZGVmaW5lZCIsInNpbmNlIiwibGltaXQiLCJzb3J0IiwiYiIsImdldFRpbWUiLCJhZGRSdWxlIiwicnVsZSIsIm5ld1J1bGUiLCJydWxlcyIsInVwZGF0ZVJ1bGUiLCJydWxlSWQiLCJ1cGRhdGVzIiwicnVsZUluZGV4IiwiZmluZEluZGV4IiwiciIsInJlbW92ZVJ1bGUiLCJzcGxpY2UiLCJnZXRSdWxlcyIsImFkZENoYW5uZWwiLCJjaGFubmVsIiwibmV3Q2hhbm5lbCIsImNoYW5uZWxzIiwidXBkYXRlQ2hhbm5lbCIsImNoYW5uZWxJZCIsImNoYW5uZWxJbmRleCIsImMiLCJyZW1vdmVDaGFubmVsIiwiZ2V0Q2hhbm5lbHMiLCJtYXRjaGluZ1J1bGVzIiwiZW5hYmxlZCIsImRvZXNFdmVudE1hdGNoUnVsZSIsImNvb2xkb3duIiwibGFzdFRyaWdnZXJlZCIsImNvb2xkb3duRW5kIiwiYWN0aW9uVGVtcGxhdGUiLCJhY3Rpb24iLCJleGVjdXRlZCIsImV4ZWN1dGVBY3Rpb24iLCJleGVjdXRlZEF0IiwicmVzdWx0IiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJjb25kaXRpb25zIiwiZXZlbnRUeXBlIiwic291cmNlIiwic29tZSIsInMiLCJwYXR0ZXJuIiwidGVzdCIsInRocmVzaG9sZCIsImtleSIsIm5vdyIsImV2ZW50Q291bnRzIiwiaGFzIiwic2V0IiwiY291bnQiLCJmaXJzdFNlZW4iLCJldmVudERhdGEiLCJnZXQiLCJ3aW5kb3dTdGFydCIsInRpbWVXaW5kb3ciLCJ0YXJnZXQiLCJzZW5kRW1haWxBbGVydCIsInNlbmRXZWJob29rQWxlcnQiLCJzZW5kU2xhY2tBbGVydCIsInNlbmRTTVNBbGVydCIsImxvZ0FsZXJ0IiwiZW5hYmxlQXV0b1JlbWVkaWF0aW9uIiwiZXhlY3V0ZUF1dG9SZW1lZGlhdGlvbiIsImxvZ0FnZ3JlZ2F0b3IiLCJpbmZvIiwidGl0bGUiLCJuYW1lIiwid2ViaG9vayIsImNvbmZpZyIsInBheWxvYWQiLCJtZXRhZGF0YSIsInJlc3BvbnNlIiwiZmV0Y2giLCJ1cmwiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJzbGFjayIsInNldmVyaXR5RW1vamkiLCJsb3ciLCJtZWRpdW0iLCJoaWdoIiwiY3JpdGljYWwiLCJ0ZXh0IiwiYXR0YWNobWVudHMiLCJjb2xvciIsImZpZWxkcyIsInZhbHVlIiwidG9VcHBlckNhc2UiLCJzaG9ydCIsInRvSVNPU3RyaW5nIiwiTWF0aCIsImZsb29yIiwic2xhY2tDaGFubmVsIiwid2FybiIsInJlbWVkaWF0aW9uIiwic2V0dXBFdmVudExpc3RlbmVycyIsInNlY3VyaXR5TW9uaXRvciIsIm9uIiwiZXZlbnQiLCJldmVudElkIiwiZXZlbnREZXRhaWxzIiwiZGV0YWlscyIsImFuYWx5c2lzIiwiY3JpdGljYWxQYXR0ZXJucyIsInBhdHRlcm5zIiwicCIsImhpZ2hQYXR0ZXJucyIsImFuYWx5c2lzSWQiLCJ0aW1lUmFuZ2UiLCJkYXRhIiwiZGVzY3JpcHRpb24iLCJsb2dFbnRyeSIsInNldHVwRGVmYXVsdFJ1bGVzIiwiZGVmYXVsdFJ1bGVzIiwiZm9yRWFjaCIsImdldEFsZXJ0U3RhdGlzdGljcyIsInN0YXRzIiwidG90YWwiLCJieVNldmVyaXR5IiwiYnlUeXBlIiwic2VjdXJpdHkiLCJwZXJmb3JtYW5jZSIsInN5c3RlbSIsImNvbXBsaWFuY2UiLCJyZWNlbnRBY3Rpdml0eSIsImkiLCJkYXRlIiwiZGF5U3RhcnQiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImRheUVuZCIsInNwbGl0Iiwic2V0dXBDbGVhbnVwIiwiY2xlYW51cEludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjdXRvZmZEYXRlIiwic2V0RGF0ZSIsImFsZXJ0UmV0ZW50aW9uRGF5cyIsImV2ZW50Q3V0b2ZmIiwiZW50cmllcyIsImRlbGV0ZSIsImRlc3Ryb3kiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiTWFwIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztRQW1FYUE7ZUFBQUE7O1FBMG9CQUM7ZUFBQUE7Ozt3QkE3c0JnQjsrREFDVjtpQ0FDNEI7K0JBQ0o7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnRXBDLE1BQU1ELHVCQUF1QkUsb0JBQVk7SUErQjlDLG1CQUFtQjtJQUNuQkMsWUFBWUMsU0FBb0YsRUFBUztRQUN2RyxNQUFNQyxRQUFlO1lBQ25CQyxJQUFJQyxlQUFNLENBQUNDLFVBQVU7WUFDckJDLFdBQVcsSUFBSUM7WUFDZkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLFNBQVMsRUFBRTtZQUNYLEdBQUdULFNBQVM7UUFDZDtRQUVBLElBQUksQ0FBQ1UsTUFBTSxDQUFDQyxJQUFJLENBQUNWO1FBQ2pCLElBQUksQ0FBQ1csSUFBSSxDQUFDLFNBQVNYO1FBRW5CLHdCQUF3QjtRQUN4QixJQUFJLENBQUNZLG1CQUFtQixDQUFDWjtRQUV6Qix1QkFBdUI7UUFDdkIsSUFBSSxJQUFJLENBQUNTLE1BQU0sQ0FBQ0ksTUFBTSxHQUFHLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxTQUFTLEVBQUc7WUFDaEQsSUFBSSxDQUFDTixNQUFNLEdBQUcsSUFBSSxDQUFDQSxNQUFNLENBQUNPLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQ0YsT0FBTyxDQUFDQyxTQUFTO1FBQ3pEO1FBRUEsT0FBT2Y7SUFDVDtJQUVBaUIsaUJBQWlCQyxPQUFlLEVBQUVDLGNBQXNCLEVBQVc7UUFDakUsTUFBTW5CLFFBQVEsSUFBSSxDQUFDUyxNQUFNLENBQUNXLElBQUksQ0FBQ0MsQ0FB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