edfe342f802ef08d34359e43b6ae1752
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "errorHandler", {
    enumerable: true,
    get: function() {
        return errorHandler;
    }
});
function errorHandler(err, req, res, next) {
    console.error('Error occurred:', err);
    // Default error response
    let status = 500;
    let message = 'Internal server error';
    // Handle specific error types
    if (err.name === 'ValidationError') {
        status = 400;
        message = 'Validation failed';
    } else if (err.name === 'SqliteError') {
        status = 500;
        message = 'Database error';
    } else if (err.message) {
        message = err.message;
    }
    res.status(status).json({
        success: false,
        error: message,
        timestamp: new Date().toISOString(),
        path: req.path,
        method: req.method
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL3Byb21wdC1jYXJkLXN5c3RlbS9iYWNrZW5kL3NyYy9taWRkbGV3YXJlL2Vycm9ySGFuZGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSwgTmV4dEZ1bmN0aW9uIH0gZnJvbSAnZXhwcmVzcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBlcnJvckhhbmRsZXIoXG4gIGVycjogRXJyb3IsXG4gIHJlcTogUmVxdWVzdCxcbiAgcmVzOiBSZXNwb25zZSxcbiAgbmV4dDogTmV4dEZ1bmN0aW9uXG4pIHtcbiAgY29uc29sZS5lcnJvcignRXJyb3Igb2NjdXJyZWQ6JywgZXJyKTtcbiAgXG4gIC8vIERlZmF1bHQgZXJyb3IgcmVzcG9uc2VcbiAgbGV0IHN0YXR1cyA9IDUwMDtcbiAgbGV0IG1lc3NhZ2UgPSAnSW50ZXJuYWwgc2VydmVyIGVycm9yJztcbiAgXG4gIC8vIEhhbmRsZSBzcGVjaWZpYyBlcnJvciB0eXBlc1xuICBpZiAoZXJyLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InKSB7XG4gICAgc3RhdHVzID0gNDAwO1xuICAgIG1lc3NhZ2UgPSAnVmFsaWRhdGlvbiBmYWlsZWQnO1xuICB9IGVsc2UgaWYgKGVyci5uYW1lID09PSAnU3FsaXRlRXJyb3InKSB7XG4gICAgc3RhdHVzID0gNTAwO1xuICAgIG1lc3NhZ2UgPSAnRGF0YWJhc2UgZXJyb3InO1xuICB9IGVsc2UgaWYgKGVyci5tZXNzYWdlKSB7XG4gICAgbWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICB9XG4gIFxuICByZXMuc3RhdHVzKHN0YXR1cykuanNvbih7XG4gICAgc3VjY2VzczogZmFsc2UsXG4gICAgZXJyb3I6IG1lc3NhZ2UsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgcGF0aDogcmVxLnBhdGgsXG4gICAgbWV0aG9kOiByZXEubWV0aG9kXG4gIH0pO1xufSJdLCJuYW1lcyI6WyJlcnJvckhhbmRsZXIiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzIiwibWVzc2FnZSIsIm5hbWUiLCJqc29uIiwic3VjY2VzcyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInBhdGgiLCJtZXRob2QiXSwibWFwcGluZ3MiOiI7Ozs7K0JBRWdCQTs7O2VBQUFBOzs7QUFBVCxTQUFTQSxhQUNkQyxHQUFVLEVBQ1ZDLEdBQVksRUFDWkMsR0FBYSxFQUNiQyxJQUFrQjtJQUVsQkMsUUFBUUMsS0FBSyxDQUFDLG1CQUFtQkw7SUFFakMseUJBQXlCO0lBQ3pCLElBQUlNLFNBQVM7SUFDYixJQUFJQyxVQUFVO0lBRWQsOEJBQThCO0lBQzlCLElBQUlQLElBQUlRLElBQUksS0FBSyxtQkFBbUI7UUFDbENGLFNBQVM7UUFDVEMsVUFBVTtJQUNaLE9BQU8sSUFBSVAsSUFBSVEsSUFBSSxLQUFLLGVBQWU7UUFDckNGLFNBQVM7UUFDVEMsVUFBVTtJQUNaLE9BQU8sSUFBSVAsSUFBSU8sT0FBTyxFQUFFO1FBQ3RCQSxVQUFVUCxJQUFJTyxPQUFPO0lBQ3ZCO0lBRUFMLElBQUlJLE1BQU0sQ0FBQ0EsUUFBUUcsSUFBSSxDQUFDO1FBQ3RCQyxTQUFTO1FBQ1RMLE9BQU9FO1FBQ1BJLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNqQ0MsTUFBTWIsSUFBSWEsSUFBSTtRQUNkQyxRQUFRZCxJQUFJYyxNQUFNO0lBQ3BCO0FBQ0YifQ==