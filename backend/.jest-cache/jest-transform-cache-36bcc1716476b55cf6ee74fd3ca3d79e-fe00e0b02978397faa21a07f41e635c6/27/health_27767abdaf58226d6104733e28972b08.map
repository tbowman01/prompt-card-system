{"version":3,"names":["cov_2ilwn7zkb0","actualCoverage","Router","db","router","s","get","req","res","f","dbCheck","prepare","ollamaUrl","b","process","env","OLLAMA_BASE_URL","json","status","timestamp","Date","toISOString","services","database","ollama","url","environment","NODE_ENV","error","Error","message","promptCardCount","testCaseCount","stats","prompt_cards","count","test_cases","database_path","DATABASE_PATH","healthRoutes"],"sources":["health.ts"],"sourcesContent":["import { Router } from 'express';\nimport { db } from '../database/connection';\nconst router = Router();\n// Health check endpoint\nrouter.get('/', (req, res)=>{\n    try {\n        // Check database connection\n        const dbCheck = db.prepare('SELECT 1').get();\n        // Check Ollama connection (basic check)\n        const ollamaUrl = process.env.OLLAMA_BASE_URL || 'http://ollama:11434';\n        res.json({\n            status: 'healthy',\n            timestamp: new Date().toISOString(),\n            services: {\n                database: dbCheck ? 'connected' : 'disconnected',\n                ollama: {\n                    url: ollamaUrl,\n                    status: 'configured' // Will be enhanced in Phase 3\n                }\n            },\n            environment: process.env.NODE_ENV || 'development'\n        });\n    } catch (error) {\n        res.status(500).json({\n            status: 'unhealthy',\n            error: error instanceof Error ? error.message : 'Unknown error',\n            timestamp: new Date().toISOString()\n        });\n    }\n});\n// Database status endpoint\nrouter.get('/db', (req, res)=>{\n    try {\n        const promptCardCount = db.prepare('SELECT COUNT(*) as count FROM prompt_cards').get();\n        const testCaseCount = db.prepare('SELECT COUNT(*) as count FROM test_cases').get();\n        res.json({\n            status: 'connected',\n            stats: {\n                prompt_cards: promptCardCount.count,\n                test_cases: testCaseCount.count\n            },\n            database_path: process.env.DATABASE_PATH\n        });\n    } catch (error) {\n        res.status(500).json({\n            status: 'error',\n            error: error instanceof Error ? error.message : 'Database connection failed'\n        });\n    }\n});\nexport { router as healthRoutes };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}