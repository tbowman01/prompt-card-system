{"version":3,"sources":["/workspaces/prompt-card-system/backend/src/tests/globalSetup.ts"],"sourcesContent":["// Global test setup - runs once before all tests\nimport { initializeDatabase } from '../database/connection';\nimport path from 'path';\nimport fs from 'fs';\n\nexport default async function globalSetup(): Promise<void> {\n  console.log('üß™ Setting up global test environment...');\n  \n  // Set test environment variables\n  process.env.NODE_ENV = 'test';\n  process.env.DATABASE_PATH = path.join(__dirname, '../../data/test.sqlite');\n  process.env.OLLAMA_BASE_URL = process.env.OLLAMA_BASE_URL || 'http://localhost:11434';\n  \n  // Ensure test data directory exists\n  const testDataDir = path.dirname(process.env.DATABASE_PATH);\n  if (!fs.existsSync(testDataDir)) {\n    fs.mkdirSync(testDataDir, { recursive: true });\n  }\n  \n  // Clean up any existing test database\n  if (fs.existsSync(process.env.DATABASE_PATH)) {\n    fs.unlinkSync(process.env.DATABASE_PATH);\n  }\n  \n  // Initialize test database\n  try {\n    initializeDatabase();\n    console.log('‚úÖ Test database initialized');\n  } catch (error) {\n    console.error('‚ùå Failed to initialize test database:', error);\n  }\n  \n  console.log('‚úÖ Global test setup complete');\n}"],"names":["globalSetup","console","log","process","env","NODE_ENV","DATABASE_PATH","path","join","__dirname","OLLAMA_BASE_URL","testDataDir","dirname","fs","existsSync","mkdirSync","recursive","unlinkSync","initializeDatabase","error"],"mappings":"AAAA,iDAAiD;;;;;+BAKjD;;;eAA8BA;;;4BAJK;6DAClB;2DACF;;;;;;AAEA,eAAeA;IAC5BC,QAAQC,GAAG,CAAC;IAEZ,iCAAiC;IACjCC,QAAQC,GAAG,CAACC,QAAQ,GAAG;IACvBF,QAAQC,GAAG,CAACE,aAAa,GAAGC,aAAI,CAACC,IAAI,CAACC,WAAW;IACjDN,QAAQC,GAAG,CAACM,eAAe,GAAGP,QAAQC,GAAG,CAACM,eAAe,IAAI;IAE7D,oCAAoC;IACpC,MAAMC,cAAcJ,aAAI,CAACK,OAAO,CAACT,QAAQC,GAAG,CAACE,aAAa;IAC1D,IAAI,CAACO,WAAE,CAACC,UAAU,CAACH,cAAc;QAC/BE,WAAE,CAACE,SAAS,CAACJ,aAAa;YAAEK,WAAW;QAAK;IAC9C;IAEA,sCAAsC;IACtC,IAAIH,WAAE,CAACC,UAAU,CAACX,QAAQC,GAAG,CAACE,aAAa,GAAG;QAC5CO,WAAE,CAACI,UAAU,CAACd,QAAQC,GAAG,CAACE,aAAa;IACzC;IAEA,2BAA2B;IAC3B,IAAI;QACFY,IAAAA,8BAAkB;QAClBjB,QAAQC,GAAG,CAAC;IACd,EAAE,OAAOiB,OAAO;QACdlB,QAAQkB,KAAK,CAAC,yCAAyCA;IACzD;IAEAlB,QAAQC,GAAG,CAAC;AACd"}