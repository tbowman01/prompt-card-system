{"version":3,"sources":["/workspaces/prompt-card-system/backend/src/tests/integration/reporting-integration.test.ts"],"sourcesContent":["import request from 'supertest';\nimport assert from 'assert';\nimport app from '../../server';\nimport { ReportService } from '../../services/reports/ReportService';\nimport { ReportGenerator } from '../../services/reports/generators/ReportGenerator';\nimport { PDFExporter } from '../../services/reports/exporters/PDFExporter';\nimport { ExcelExporter } from '../../services/reports/exporters/ExcelExporter';\nimport fs from 'fs';\nimport path from 'path';\n\ndescribe('Advanced Reporting System Integration Tests', () => {\n  let reportService: ReportService;\n  let reportGenerator: ReportGenerator;\n  const testReportId = 'test-report-123';\n  const testCardId = 'test-card-report-456';\n\n  beforeEach(async () => {\n    reportService = new ReportService();\n    reportGenerator = new ReportGenerator();\n    \n    // Set up test data\n    await reportService.createTestData(testCardId);\n  });\n\n  describe('Report Generation Integration', () => {\n    it('should generate comprehensive test execution report', async () => {\n      const response = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          type: 'test_execution',\n          cardId: testCardId,\n          timeRange: {\n            start: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),\n            end: new Date().toISOString()\n          },\n          includeMetrics: true,\n          includeCharts: true,\n          includeAnalytics: true\n        })\n        .expect(200);\n\n      assert(response.body.success === true);\n      expect(response.body.data).to.have.property('reportId');\n      expect(response.body.data).to.have.property('status');\n      expect(response.body.data.status).to.equal('completed');\n    });\n\n    it('should generate performance analysis report', async () => {\n      const response = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          type: 'performance_analysis',\n          cardId: testCardId,\n          analysisType: 'comprehensive',\n          includeRecommendations: true,\n          includeBenchmarks: true\n        })\n        .expect(200);\n\n      assert(response.body.success === true);\n      expect(response.body.data).to.have.property('reportId');\n      expect(response.body.data).to.have.property('performanceMetrics');\n      expect(response.body.data).to.have.property('recommendations');\n    });\n\n    it('should generate cost optimization report', async () => {\n      const response = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          type: 'cost_optimization',\n          cardId: testCardId,\n          includeCostBreakdown: true,\n          includeOptimizationSuggestions: true,\n          includeProjections: true\n        })\n        .expect(200);\n\n      assert(response.body.success === true);\n      expect(response.body.data).to.have.property('reportId');\n      expect(response.body.data).to.have.property('costAnalysis');\n      expect(response.body.data).to.have.property('optimizationSuggestions');\n    });\n  });\n\n  describe('Report Export Integration', () => {\n    it('should export report to PDF format', async () => {\n      // First generate a report\n      const generateResponse = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          type: 'test_execution',\n          cardId: testCardId,\n          timeRange: {\n            start: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n            end: new Date().toISOString()\n          }\n        })\n        .expect(200);\n\n      const reportId = generateResponse.body.data.reportId;\n\n      // Export to PDF\n      const exportResponse = await request(app)\n        .post(`/api/reports/${reportId}/export`)\n        .send({\n          format: 'pdf',\n          includeCharts: true,\n          includeTableOfContents: true,\n          theme: 'professional'\n        })\n        .expect(200);\n\n      assert(exportResponse.body.success === true);\n      expect(exportResponse.body.data).to.have.property('downloadUrl');\n      expect(exportResponse.body.data).to.have.property('fileName');\n      expect(exportResponse.body.data.fileName).to.include('.pdf');\n    });\n\n    it('should export report to Excel format', async () => {\n      // First generate a report\n      const generateResponse = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          type: 'performance_analysis',\n          cardId: testCardId\n        })\n        .expect(200);\n\n      const reportId = generateResponse.body.data.reportId;\n\n      // Export to Excel\n      const exportResponse = await request(app)\n        .post(`/api/reports/${reportId}/export`)\n        .send({\n          format: 'excel',\n          includeCharts: true,\n          includeRawData: true,\n          separateSheets: true\n        })\n        .expect(200);\n\n      assert(exportResponse.body.success === true);\n      expect(exportResponse.body.data).to.have.property('downloadUrl');\n      expect(exportResponse.body.data).to.have.property('fileName');\n      expect(exportResponse.body.data.fileName).to.include('.xlsx');\n    });\n\n    it('should export report to CSV format', async () => {\n      // First generate a report\n      const generateResponse = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          type: 'cost_optimization',\n          cardId: testCardId\n        })\n        .expect(200);\n\n      const reportId = generateResponse.body.data.reportId;\n\n      // Export to CSV\n      const exportResponse = await request(app)\n        .post(`/api/reports/${reportId}/export`)\n        .send({\n          format: 'csv',\n          includeHeaders: true,\n          delimiter: ',',\n          encoding: 'utf-8'\n        })\n        .expect(200);\n\n      assert(exportResponse.body.success === true);\n      expect(exportResponse.body.data).to.have.property('downloadUrl');\n      expect(exportResponse.body.data).to.have.property('fileName');\n      expect(exportResponse.body.data.fileName).to.include('.csv');\n    });\n  });\n\n  describe('Scheduled Reports Integration', () => {\n    it('should create and manage scheduled reports', async () => {\n      const response = await request(app)\n        .post('/api/reports/schedule')\n        .send({\n          name: 'Weekly Performance Report',\n          type: 'performance_analysis',\n          cardId: testCardId,\n          schedule: {\n            frequency: 'weekly',\n            dayOfWeek: 'monday',\n            time: '09:00',\n            timezone: 'UTC'\n          },\n          format: 'pdf',\n          recipients: ['test@example.com'],\n          includeCharts: true\n        })\n        .expect(200);\n\n      assert(response.body.success === true);\n      expect(response.body.data).to.have.property('scheduleId');\n      expect(response.body.data).to.have.property('nextExecution');\n    });\n\n    it('should handle scheduled report execution', async () => {\n      // Create a scheduled report\n      const scheduleResponse = await request(app)\n        .post('/api/reports/schedule')\n        .send({\n          name: 'Daily Cost Report',\n          type: 'cost_optimization',\n          cardId: testCardId,\n          schedule: {\n            frequency: 'daily',\n            time: '08:00'\n          },\n          format: 'excel'\n        })\n        .expect(200);\n\n      const scheduleId = scheduleResponse.body.data.scheduleId;\n\n      // Trigger scheduled report execution\n      const executeResponse = await request(app)\n        .post(`/api/reports/schedule/${scheduleId}/execute`)\n        .expect(200);\n\n      assert(executeResponse.body.success === true);\n      expect(executeResponse.body.data).to.have.property('reportId');\n      expect(executeResponse.body.data).to.have.property('executionTime');\n    });\n  });\n\n  describe('Report Templates Integration', () => {\n    it('should create and use custom report templates', async () => {\n      // Create custom template\n      const templateResponse = await request(app)\n        .post('/api/reports/templates')\n        .send({\n          name: 'Custom Performance Template',\n          type: 'performance_analysis',\n          sections: [\n            {\n              type: 'summary',\n              title: 'Executive Summary',\n              includeMetrics: true\n            },\n            {\n              type: 'charts',\n              title: 'Performance Trends',\n              chartTypes: ['line', 'bar']\n            },\n            {\n              type: 'table',\n              title: 'Detailed Results',\n              columns: ['timestamp', 'success_rate', 'response_time']\n            }\n          ],\n          styling: {\n            theme: 'corporate',\n            colors: ['#1f77b4', '#ff7f0e', '#2ca02c']\n          }\n        })\n        .expect(200);\n\n      const templateId = templateResponse.body.data.templateId;\n\n      // Use template to generate report\n      const reportResponse = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          templateId,\n          cardId: testCardId,\n          timeRange: {\n            start: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n            end: new Date().toISOString()\n          }\n        })\n        .expect(200);\n\n      assert(reportResponse.body.success === true);\n      expect(reportResponse.body.data).to.have.property('reportId');\n    });\n  });\n\n  describe('Error Handling and Edge Cases', () => {\n    it('should handle missing card ID gracefully', async () => {\n      const response = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          type: 'test_execution',\n          timeRange: {\n            start: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n            end: new Date().toISOString()\n          }\n        })\n        .expect(400);\n\n      expect(response.body.error).to.include('Card ID is required');\n    });\n\n    it('should handle invalid report type', async () => {\n      const response = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          type: 'invalid_type',\n          cardId: testCardId\n        })\n        .expect(400);\n\n      expect(response.body.error).to.include('Invalid report type');\n    });\n\n    it('should handle export failures gracefully', async () => {\n      // Create a report first\n      const generateResponse = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          type: 'test_execution',\n          cardId: testCardId\n        })\n        .expect(200);\n\n      const reportId = generateResponse.body.data.reportId;\n\n      // Try to export with invalid format\n      const exportResponse = await request(app)\n        .post(`/api/reports/${reportId}/export`)\n        .send({\n          format: 'invalid_format'\n        })\n        .expect(400);\n\n      expect(exportResponse.body.error).to.include('Invalid export format');\n    });\n  });\n\n  describe('Performance and Scalability', () => {\n    it('should handle large dataset report generation', async () => {\n      // Generate report with large dataset\n      const response = await request(app)\n        .post('/api/reports/generate')\n        .send({\n          type: 'comprehensive_analysis',\n          cardId: testCardId,\n          timeRange: {\n            start: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(), // 30 days\n            end: new Date().toISOString()\n          },\n          includeAllMetrics: true,\n          includeRawData: true\n        })\n        .expect(200);\n\n      assert(response.body.success === true);\n      expect(response.body.data).to.have.property('reportId');\n      \n      // Verify the report was generated successfully\n      const statusResponse = await request(app)\n        .get(`/api/reports/${response.body.data.reportId}/status`)\n        .expect(200);\n\n      expect(statusResponse.body.data.status).to.be.oneOf(['completed', 'processing']);\n    });\n  });\n});"],"names":["describe","reportService","reportGenerator","testReportId","testCardId","beforeEach","ReportService","ReportGenerator","createTestData","it","response","request","app","post","send","type","cardId","timeRange","start","Date","now","toISOString","end","includeMetrics","includeCharts","includeAnalytics","expect","assert","body","success","data","to","have","property","status","equal","analysisType","includeRecommendations","includeBenchmarks","includeCostBreakdown","includeOptimizationSuggestions","includeProjections","generateResponse","reportId","exportResponse","format","includeTableOfContents","theme","fileName","include","includeRawData","separateSheets","includeHeaders","delimiter","encoding","name","schedule","frequency","dayOfWeek","time","timezone","recipients","scheduleResponse","scheduleId","executeResponse","templateResponse","sections","title","chartTypes","columns","styling","colors","templateId","reportResponse","error","includeAllMetrics","statusResponse","get","be","oneOf"],"mappings":"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"}