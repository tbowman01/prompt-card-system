{
  "dashboard": {
    "title": "Prompt Card System - Optimization Monitoring",
    "version": "2.0.0",
    "autoRefresh": true,
    "refreshInterval": 30000,
    "theme": "dark"
  },
  "panels": [
    {
      "id": "overview",
      "title": "System Overview",
      "type": "metrics",
      "layout": { "x": 0, "y": 0, "width": 12, "height": 4 },
      "metrics": [
        {
          "name": "Response Time",
          "endpoint": "/api/performance/metrics/response_time",
          "unit": "ms",
          "thresholds": { "warning": 200, "critical": 500 },
          "chart": "line"
        },
        {
          "name": "Memory Usage",
          "endpoint": "/api/performance/metrics/memory_usage",
          "unit": "%",
          "thresholds": { "warning": 80, "critical": 95 },
          "chart": "gauge"
        },
        {
          "name": "Cache Hit Rate",
          "endpoint": "/api/optimization/cache/stats",
          "unit": "%",
          "thresholds": { "warning": 80, "critical": 70 },
          "chart": "gauge"
        },
        {
          "name": "Active Users",
          "endpoint": "/api/analytics/active_users",
          "unit": "users",
          "chart": "number"
        }
      ]
    },
    {
      "id": "optimization",
      "title": "Optimization Performance",
      "type": "charts",
      "layout": { "x": 0, "y": 4, "width": 8, "height": 6 },
      "charts": [
        {
          "title": "Cache Performance",
          "type": "line",
          "metrics": [
            {
              "name": "Hit Rate",
              "endpoint": "/api/optimization/cache/stats",
              "field": "hitRate",
              "color": "#4CAF50"
            },
            {
              "name": "Miss Rate",
              "endpoint": "/api/optimization/cache/stats", 
              "field": "missRate",
              "color": "#FF5722"
            }
          ]
        },
        {
          "title": "ML Optimization Effectiveness",
          "type": "bar",
          "metrics": [
            {
              "name": "Prediction Accuracy",
              "endpoint": "/api/optimization/ml/accuracy",
              "color": "#2196F3"
            },
            {
              "name": "Decision Speed",
              "endpoint": "/api/optimization/ml/speed",
              "color": "#FF9800"
            }
          ]
        }
      ]
    },
    {
      "id": "alerts",
      "title": "Active Alerts",
      "type": "alerts",
      "layout": { "x": 8, "y": 4, "width": 4, "height": 6 },
      "alerts": [
        {
          "name": "High Response Time",
          "condition": "response_time > 500",
          "severity": "critical",
          "endpoint": "/api/performance/alerts"
        },
        {
          "name": "Low Cache Hit Rate", 
          "condition": "cache_hit_rate < 70",
          "severity": "warning",
          "endpoint": "/api/optimization/alerts"
        },
        {
          "name": "Memory Pressure",
          "condition": "memory_usage > 95",
          "severity": "critical", 
          "endpoint": "/api/performance/alerts"
        }
      ]
    },
    {
      "id": "edge",
      "title": "Edge Computing Performance",
      "type": "map",
      "layout": { "x": 0, "y": 10, "width": 12, "height": 6 },
      "regions": [
        {
          "name": "US East",
          "endpoint": "/api/edge-optimization/analytics?region=us-east",
          "coordinates": { "lat": 39.8283, "lng": -98.5795 }
        },
        {
          "name": "EU West", 
          "endpoint": "/api/edge-optimization/analytics?region=eu-west",
          "coordinates": { "lat": 54.5260, "lng": 15.2551 }
        },
        {
          "name": "Asia Pacific",
          "endpoint": "/api/edge-optimization/analytics?region=ap-se",
          "coordinates": { "lat": 1.3521, "lng": 103.8198 }
        }
      ],
      "metrics": ["latency", "throughput", "error_rate"]
    },
    {
      "id": "ml_models",
      "title": "ML Model Performance",
      "type": "table",
      "layout": { "x": 0, "y": 16, "width": 8, "height": 4 },
      "endpoint": "/api/optimization/ml/models",
      "columns": [
        { "field": "model_name", "title": "Model", "width": "25%" },
        { "field": "accuracy", "title": "Accuracy", "width": "20%", "format": "percentage" },
        { "field": "latency", "title": "Latency", "width": "20%", "format": "milliseconds" },
        { "field": "last_trained", "title": "Last Trained", "width": "25%", "format": "datetime" },
        { "field": "status", "title": "Status", "width": "10%", "format": "badge" }
      ]
    },
    {
      "id": "cost",
      "title": "Cost Optimization",
      "type": "trends",
      "layout": { "x": 8, "y": 16, "width": 4, "height": 4 },
      "metrics": [
        {
          "name": "Infrastructure Cost",
          "endpoint": "/api/analytics/cost/infrastructure",
          "period": "daily",
          "unit": "$"
        },
        {
          "name": "Compute Savings",
          "endpoint": "/api/analytics/cost/savings",
          "period": "daily", 
          "unit": "$"
        },
        {
          "name": "Memory Efficiency",
          "endpoint": "/api/optimization/cache/efficiency",
          "period": "hourly",
          "unit": "%"
        }
      ]
    }
  ],
  "alerting": {
    "enabled": true,
    "channels": [
      {
        "type": "webhook",
        "url": "${SLACK_WEBHOOK_URL}",
        "conditions": ["critical", "warning"]
      },
      {
        "type": "email",
        "recipients": ["${ADMIN_EMAIL}"],
        "conditions": ["critical"]
      }
    ],
    "rules": [
      {
        "name": "High Response Time",
        "condition": "avg(response_time) > 500 for 5m",
        "severity": "critical",
        "message": "Response time is above 500ms for 5 minutes"
      },
      {
        "name": "Low Cache Hit Rate",
        "condition": "avg(cache_hit_rate) < 70 for 10m", 
        "severity": "warning",
        "message": "Cache hit rate is below 70% for 10 minutes"
      },
      {
        "name": "Memory Pressure",
        "condition": "max(memory_usage) > 95 for 2m",
        "severity": "critical",
        "message": "Memory usage is above 95% for 2 minutes"
      },
      {
        "name": "Edge Latency High",
        "condition": "avg(edge_latency) > 100 for 5m",
        "severity": "warning",
        "message": "Edge latency is above 100ms for 5 minutes"
      },
      {
        "name": "ML Model Accuracy Drop",
        "condition": "avg(ml_accuracy) < 80 for 30m",
        "severity": "warning", 
        "message": "ML model accuracy dropped below 80% for 30 minutes"
      }
    ]
  },
  "automation": {
    "enabled": true,
    "triggers": [
      {
        "name": "Auto Scale Up",
        "condition": "avg(cpu_usage) > 80 for 10m",
        "action": "POST /api/infrastructure/scale",
        "parameters": { "direction": "up", "factor": 1.5 }
      },
      {
        "name": "Cache Optimization",
        "condition": "avg(cache_hit_rate) < 75 for 15m",
        "action": "POST /api/optimization/cache/optimize",
        "parameters": { "aggressive": true }
      },
      {
        "name": "ML Model Retrain",
        "condition": "avg(ml_accuracy) < 85 for 60m",
        "action": "POST /api/optimization/ml/retrain",
        "parameters": { "priority": "high" }
      },
      {
        "name": "Edge Failover",
        "condition": "max(edge_error_rate) > 10 for 5m",
        "action": "POST /api/edge-optimization/failover",
        "parameters": { "region": "auto" }
      }
    ]
  },
  "reports": {
    "enabled": true,
    "schedule": [
      {
        "name": "Daily Performance Report",
        "frequency": "daily",
        "time": "09:00",
        "format": "html",
        "recipients": ["${TEAM_EMAIL}"],
        "metrics": ["response_time", "cache_hit_rate", "ml_accuracy", "cost_savings"]
      },
      {
        "name": "Weekly Optimization Summary", 
        "frequency": "weekly",
        "day": "monday",
        "time": "10:00",
        "format": "pdf",
        "recipients": ["${MANAGER_EMAIL}"],
        "sections": ["executive_summary", "performance_trends", "cost_analysis", "recommendations"]
      },
      {
        "name": "Monthly Cost Analysis",
        "frequency": "monthly",
        "day": 1,
        "time": "08:00", 
        "format": "excel",
        "recipients": ["${FINANCE_EMAIL}"],
        "metrics": ["infrastructure_cost", "optimization_savings", "roi_analysis"]
      }
    ]
  },
  "integrations": {
    "prometheus": {
      "enabled": true,
      "endpoint": "/metrics",
      "scrape_interval": "30s"
    },
    "grafana": {
      "enabled": true,
      "dashboard_id": "prompt-card-optimization",
      "auto_provision": true
    },
    "datadog": {
      "enabled": false,
      "api_key": "${DATADOG_API_KEY}",
      "tags": ["environment:production", "service:prompt-card-system"]
    },
    "newrelic": {
      "enabled": false,
      "license_key": "${NEWRELIC_LICENSE_KEY}",
      "app_name": "Prompt Card System"
    }
  },
  "security": {
    "authentication": {
      "enabled": true,
      "type": "jwt",
      "secret": "${DASHBOARD_JWT_SECRET}"
    },
    "authorization": {
      "enabled": true,
      "roles": {
        "admin": ["read", "write", "delete"],
        "operator": ["read", "write"],
        "viewer": ["read"]
      }
    },
    "audit": {
      "enabled": true,
      "log_level": "info",
      "retention": "90d"
    }
  }
}