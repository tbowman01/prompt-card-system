(()=>{var e={};e.id=109,e.ids=[109],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},1470:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(5601),t(2399),t(2874);var r=t(7105),a=t(5265),i=t(157),l=t.n(i),n=t(4665),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5601)),"/workspaces/prompt-card-system/frontend/src/app/analytics/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2399)),"/workspaces/prompt-card-system/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2874,23)),"next/dist/client/components/not-found-error"]}],o=["/workspaces/prompt-card-system/frontend/src/app/analytics/page.tsx"],m="/analytics/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/analytics/page",pathname:"/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7283:(e,s,t)=>{Promise.resolve().then(t.bind(t,2416))},2416:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var r=t(9899),a=t(6188),i=t(4560),l=t(6319),n=t(2435),c=t(899);let d=({title:e,value:s,subtext:t,trend:a,severity:i="info"})=>r.jsx("div",{className:`p-4 rounded-lg border-2 ${(()=>{switch(i){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"error":return"bg-red-50 border-red-200";default:return"bg-blue-50 border-blue-200"}})()}`,children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600",children:e}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s}),t&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t})]}),a&&r.jsx("span",{className:"text-lg text-gray-400",children:(()=>{switch(a){case"up":return"↗";case"down":return"↘";case"stable":return"→";default:return""}})()})]})}),o=()=>{let[e,s]=(0,i.useState)(null),[t,a]=(0,i.useState)(!0),[o,m]=(0,i.useState)(null);if((0,i.useEffect)(()=>{let e=async()=>{try{a(!0),m(null);let e=await l.hi.getDashboardMetrics();s(e)}catch(e){console.error("Error fetching metrics:",e),m("Failed to load metrics")}finally{a(!1)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]),t)return r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx(c.T,{size:"lg"})});if(o)return r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800",children:o})});if(!e)return r.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:r.jsx("p",{className:"text-gray-600",children:"No metrics available"})});let x=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),u=e=>`${(100*e).toFixed(1)}%`,h=e=>e>=1e3?`${(e/1e3).toFixed(1)}s`:`${e.toFixed(0)}ms`;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Real-time Metrics"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx(d,{title:"Active Tests",value:e.realtime.activeTests,severity:e.realtime.activeTests>0?"info":"success"}),r.jsx(d,{title:"Tests/Second",value:e.realtime.testsPerSecond.toFixed(1),severity:e.realtime.testsPerSecond>0?"success":"info"}),r.jsx(d,{title:"Success Rate",value:u(e.realtime.successRate),severity:e.realtime.successRate>=.9?"success":e.realtime.successRate>=.7?"warning":"error"}),r.jsx(d,{title:"Avg Response Time",value:h(e.realtime.averageResponseTime),severity:e.realtime.averageResponseTime<=1e3?"success":e.realtime.averageResponseTime<=5e3?"warning":"error"}),r.jsx(d,{title:"Error Rate",value:u(e.realtime.errorRate),severity:e.realtime.errorRate<=.1?"success":e.realtime.errorRate<=.3?"warning":"error"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Historical Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(d,{title:"Total Tests",value:x(e.historical.totalTests),subtext:"All time"}),r.jsx(d,{title:"Total Executions",value:x(e.historical.totalExecutions),subtext:"Unique test runs"}),r.jsx(d,{title:"Overall Success Rate",value:u(e.historical.overallSuccessRate),subtext:"Historical average",severity:e.historical.overallSuccessRate>=.9?"success":e.historical.overallSuccessRate>=.7?"warning":"error"}),r.jsx(d,{title:"Avg Execution Time",value:h(e.historical.averageExecutionTime),subtext:"Per test"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Most Used Models"}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.historical.mostUsedModels.slice(0,6).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(n.C,{variant:"secondary",children:["#",s+1]}),r.jsx("span",{className:"font-medium text-gray-900",children:e.model})]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[x(e.count)," tests"]})]},e.model))})})]}),e.insights.length>0&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Insights"}),r.jsx("div",{className:"space-y-3",children:e.insights.map(e=>r.jsx("div",{className:`p-4 rounded-lg border-l-4 ${"critical"===e.severity?"bg-red-50 border-red-500":"high"===e.severity?"bg-orange-50 border-orange-500":"medium"===e.severity?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"}`,children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:e.title}),r.jsx(n.C,{variant:"critical"===e.severity?"destructive":"secondary",children:e.severity})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.recommendations&&e.recommendations.length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[r.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Recommendations:"}),r.jsx("ul",{className:"text-xs text-gray-600 mt-1 space-y-1",children:e.recommendations.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-center",children:[r.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full mr-2"}),e]},s))})]})]}),r.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]})},e.id))})]})]})};var m=t(5558),x=t(8306);let u=({height:e=400})=>{let[s,t]=(0,m.useState)(null),[a,i]=(0,m.useState)(!0),[n,d]=(0,m.useState)(null),[o,u]=(0,m.useState)("day"),[h,g]=(0,m.useState)("tests"),p={tests:(0,m.useRef)(null),success:(0,m.useRef)(null),performance:(0,m.useRef)(null)};(0,m.useEffect)(()=>{(async()=>{try{i(!0),d(null);let e=await l.hi.getTrends(o,30);t({...s,trends:e})}catch(e){console.error("Error fetching trends:",e),d("Failed to load chart data")}finally{i(!1)}})()},[o]);let j=(s,t,r)=>{let a=s.getContext("2d");if(!a)return;a.clearRect(0,0,s.width,s.height),s.width=s.offsetWidth,s.height=e;let i=s.width-120,l=s.height-120,n=t.datasets.flatMap(e=>e.data),c=Math.min(...n),d=Math.max(...n),o=d-c||1;a.strokeStyle="#e5e7eb",a.lineWidth=1;for(let e=0;e<=5;e++){let s=60+l/5*e;a.beginPath(),a.moveTo(60,s),a.lineTo(60+i,s),a.stroke()}let m=i/(t.labels.length-1||1);for(let e=0;e<t.labels.length;e++){let s=60+m*e;a.beginPath(),a.moveTo(s,60),a.lineTo(s,60+l),a.stroke()}t.datasets.forEach((e,s)=>{a.strokeStyle=e.borderColor,a.lineWidth=2,a.beginPath(),e.data.forEach((e,s)=>{let t=60+m*s,r=60+l-(e-c)/o*l;0===s?a.moveTo(t,r):a.lineTo(t,r)}),a.stroke(),a.fillStyle=e.borderColor,e.data.forEach((e,s)=>{a.beginPath(),a.arc(60+m*s,60+l-(e-c)/o*l,4,0,2*Math.PI),a.fill()})}),a.fillStyle="#1f2937",a.font="16px Inter, sans-serif",a.textAlign="center",a.fillText(r,s.width/2,30),a.font="12px Inter, sans-serif",a.textAlign="right";for(let e=0;e<=5;e++){let s=60+l/5*e,t=d-o/5*e;a.fillText(t.toFixed(1),50,s+4)}a.textAlign="center",t.labels.forEach((e,t)=>{a.fillText(e,60+m*t,s.height-20)})},v=e=>{let t,r;if(!s?.trends||!p[e].current)return;let a=p[e].current;switch(e){case"tests":t={labels:s.trends.testsOverTime.map(e=>new Date(e.timestamp).toLocaleDateString()),datasets:[{label:"Tests Count",data:s.trends.testsOverTime.map(e=>e.count),borderColor:"#3b82f6",backgroundColor:"#3b82f6"}]},r="Tests Over Time";break;case"success":t={labels:s.trends.successRateOverTime.map(e=>new Date(e.timestamp).toLocaleDateString()),datasets:[{label:"Success Rate",data:s.trends.successRateOverTime.map(e=>100*e.rate),borderColor:"#10b981",backgroundColor:"#10b981"}]},r="Success Rate Over Time (%)";break;case"performance":t={labels:s.trends.performanceOverTime.map(e=>new Date(e.timestamp).toLocaleDateString()),datasets:[{label:"Avg Response Time",data:s.trends.performanceOverTime.map(e=>e.avgTime),borderColor:"#f59e0b",backgroundColor:"#f59e0b"}]},r="Average Response Time (ms)"}j(a,t,r)};return((0,m.useEffect)(()=>{s?.trends&&(v("tests"),v("success"),v("performance"))},[s?.trends]),(0,m.useEffect)(()=>{let e=()=>{s?.trends&&setTimeout(()=>{v("tests"),v("success"),v("performance")},100)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[s?.trends]),a)?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx(c.T,{size:"lg"})}):n?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800",children:n})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(x.z,{variant:"hour"===o?"default":"outline",size:"sm",onClick:()=>u("hour"),children:"Hourly"}),r.jsx(x.z,{variant:"day"===o?"default":"outline",size:"sm",onClick:()=>u("day"),children:"Daily"}),r.jsx(x.z,{variant:"week"===o?"default":"outline",size:"sm",onClick:()=>u("week"),children:"Weekly"}),r.jsx(x.z,{variant:"month"===o?"default":"outline",size:"sm",onClick:()=>u("month"),children:"Monthly"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(x.z,{variant:"tests"===h?"default":"outline",size:"sm",onClick:()=>g("tests"),children:"Tests"}),r.jsx(x.z,{variant:"success"===h?"default":"outline",size:"sm",onClick:()=>g("success"),children:"Success Rate"}),r.jsx(x.z,{variant:"performance"===h?"default":"outline",size:"sm",onClick:()=>g("performance"),children:"Performance"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:r.jsx("canvas",{ref:p[h],className:"w-full",style:{height:`${e}px`}})}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Object.entries(p).map(([s,t])=>s===h?null:r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:r.jsx("canvas",{ref:t,className:"w-full cursor-pointer",style:{height:`${e/2}px`},onClick:()=>g(s)})},s))})]}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-6 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),r.jsx("span",{children:"Tests Volume"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),r.jsx("span",{children:"Success Rate"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),r.jsx("span",{children:"Response Time"})]})]})})]})},h=({timeframe:e="24h"})=>{let[s,t]=(0,i.useState)(null),[a,l]=(0,i.useState)(!0),[d,o]=(0,i.useState)(null),[m,u]=(0,i.useState)(e);if((0,i.useEffect)(()=>{(async()=>{try{l(!0),o(null);let e={totalCost:24.67,costByModel:{"llama3.1:8b":12.34,"llama3.1:70b":8.45,"mistral:7b":2.89,"codellama:7b":.99},costOverTime:Array.from({length:30},(e,s)=>({timestamp:new Date(Date.now()-(29-s)*864e5),cost:5*Math.random()+.5})),tokenUsage:{totalTokens:1234567,promptTokens:567890,completionTokens:666677}};t(e)}catch(e){console.error("Error fetching cost data:",e),o("Failed to load cost data")}finally{l(!1)}})()},[m]),a)return r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx(c.T,{size:"lg"})});if(d)return r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800",children:d})});if(!s)return r.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:r.jsx("p",{className:"text-gray-600",children:"No cost data available"})});let h=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),g=e=>new Intl.NumberFormat("en-US").format(e),p=e=>{let s=["bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-red-500","bg-indigo-500","bg-pink-500","bg-gray-500"];return s[e%s.length]};return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex gap-2",children:["24h","7d","30d","90d"].map(e=>r.jsx(x.z,{variant:m===e?"primary":"outline",size:"sm",onClick:()=>u(e),children:e},e))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Cost"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h(s.totalCost)})]}),r.jsx("div",{className:"text-green-600",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tokens"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(s.tokenUsage.totalTokens)})]}),r.jsx("div",{className:"text-blue-600",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Prompt Tokens"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(s.tokenUsage.promptTokens)})]}),r.jsx("div",{className:"text-purple-600",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completion Tokens"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(s.tokenUsage.completionTokens)})]}),r.jsx("div",{className:"text-yellow-600",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost by Model"}),r.jsx("div",{className:"space-y-4",children:Object.entries(s.costByModel).sort(([,e],[,s])=>s-e).map(([e,t],a)=>{let i=t/s.totalCost*100;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-4 h-4 rounded-full ${p(a)}`}),r.jsx("span",{className:"font-medium text-gray-900",children:e}),(0,r.jsxs)(n.C,{variant:"secondary",children:[i.toFixed(1),"%"]})]}),r.jsx("div",{className:"text-right",children:r.jsx("span",{className:"font-semibold text-gray-900",children:h(t)})})]},e)})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost Over Time"}),r.jsx("div",{className:"h-64 flex items-end space-x-1",children:s.costOverTime.map((e,t)=>{let a=Math.max(...s.costOverTime.map(e=>e.cost)),i=e.cost/a*100;return r.jsx("div",{className:"flex-1 bg-blue-500 rounded-t-sm relative group",style:{height:`${i}%`},children:r.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity",children:h(e.cost)})},t)})}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between text-sm text-gray-500",children:[(0,r.jsxs)("span",{children:[s.costOverTime.length," days ago"]}),r.jsx("span",{children:"Today"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost Analysis"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Most Expensive Model"}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[r.jsx("span",{className:"text-red-800",children:Object.entries(s.costByModel).sort(([,e],[,s])=>s-e)[0][0]}),r.jsx("span",{className:"font-semibold text-red-900",children:h(Math.max(...Object.values(s.costByModel)))})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Most Efficient Model"}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsx("span",{className:"text-green-800",children:Object.entries(s.costByModel).sort(([,e],[,s])=>e-s)[0][0]}),r.jsx("span",{className:"font-semibold text-green-900",children:h(Math.min(...Object.values(s.costByModel)))})]})]})]}),(0,r.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Cost Optimization Tips"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[r.jsx("li",{children:"• Consider using smaller models for simple tasks"}),r.jsx("li",{children:"• Implement caching for frequently used prompts"}),r.jsx("li",{children:"• Monitor token usage to identify inefficient prompts"}),r.jsx("li",{children:"• Use batch processing for multiple similar requests"})]})]})]})]})};var g=t(8643);let p=({refreshInterval:e=5e3,maxEvents:s=50})=>{let[t,a]=(0,i.useState)(null),[d,o]=(0,i.useState)([]),[m,u]=(0,i.useState)(!0),[h,p]=(0,i.useState)(null),[j,v]=(0,i.useState)(!1),[b,f]=(0,i.useState)(!1),{socket:y,isConnected:N,connect:w,disconnect:k}=(0,g.s)();(0,i.useEffect)(()=>(y&&(y.on("analytics-update",e=>{b||a(e.realtime)}),y.on("test-execution-event",e=>{if(!b){let t={id:Date.now().toString(),type:"test_execution",timestamp:new Date(e.timestamp),message:`Test ${e.passed?"passed":"failed"} for ${e.model}`,data:e,severity:e.passed?"success":"error"};o(e=>[t,...e.slice(0,s-1)])}}),y.on("batch-execution-event",e=>{if(!b){let t={id:Date.now().toString(),type:"batch_execution",timestamp:new Date(e.timestamp),message:`Batch execution: ${e.passed_tests}/${e.total_tests} tests passed`,data:e,severity:e.passed_tests/e.total_tests>.8?"success":"warning"};o(e=>[t,...e.slice(0,s-1)])}}),y.on("system-alert",e=>{if(!b){let t={id:Date.now().toString(),type:"system_alert",timestamp:new Date(e.timestamp),message:e.message,data:e,severity:e.severity};o(e=>[t,...e.slice(0,s-1)])}}),v(!0)),()=>{y&&(y.off("analytics-update"),y.off("test-execution-event"),y.off("batch-execution-event"),y.off("system-alert"))}),[y,b,s]),(0,i.useEffect)(()=>{let s;let t=async()=>{try{u(!0),p(null);let e=await l.hi.getRealtimeMetrics();a(e)}catch(e){console.error("Error fetching real-time metrics:",e),p("Failed to load real-time metrics")}finally{u(!1)}};return t(),N||b||(s=setInterval(t,e)),()=>{s&&clearInterval(s)}},[N,b,e]);let T=e=>e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),D=e=>{switch(e){case"success":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"error":return"bg-red-100 text-red-800 border-red-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},S=e=>{switch(e){case"test_execution":return"\uD83E\uDDEA";case"batch_execution":return"\uD83D\uDCE6";case"model_usage":return"\uD83E\uDD16";case"system_alert":return"⚠️";default:return"\uD83D\uDCCA"}};return m?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx(c.T,{size:"lg"})}):h?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800",children:h})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${N?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:N?"Connected":"Disconnected"})]}),r.jsx(n.C,{variant:b?"secondary":"default",children:b?"Paused":"Live"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(x.z,{variant:"outline",size:"sm",onClick:()=>{f(!b)},children:b?"▶️ Resume":"⏸️ Pause"}),r.jsx(x.z,{variant:"outline",size:"sm",onClick:()=>{o([])},children:"\uD83E\uDDF9 Clear"}),!N&&r.jsx(x.z,{variant:"outline",size:"sm",onClick:()=>{k(),setTimeout(()=>w(),1e3)},children:"\uD83D\uDD04 Reconnect"})]})]}),t&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Tests"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.activeTests})]}),r.jsx("div",{className:"text-blue-600",children:r.jsx("div",{className:`w-3 h-3 rounded-full ${t.activeTests>0?"bg-blue-500 animate-pulse":"bg-gray-300"}`})})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tests/sec"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.testsPerSecond.toFixed(1)})]}),r.jsx("div",{className:"text-green-600",children:"⚡"})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(100*t.successRate).toFixed(1),"%"]})]}),r.jsx("div",{className:`text-${t.successRate>=.9?"green":t.successRate>=.7?"yellow":"red"}-600`,children:t.successRate>=.9?"✅":t.successRate>=.7?"⚠️":"❌"})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.averageResponseTime>=1e3?`${(t.averageResponseTime/1e3).toFixed(1)}s`:`${t.averageResponseTime.toFixed(0)}ms`})]}),r.jsx("div",{className:"text-purple-600",children:"⏱️"})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Error Rate"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(100*t.errorRate).toFixed(1),"%"]})]}),r.jsx("div",{className:`text-${t.errorRate<=.1?"green":t.errorRate<=.3?"yellow":"red"}-600`,children:t.errorRate<=.1?"✅":t.errorRate<=.3?"⚠️":"\uD83D\uDEA8"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Real-time Events"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[d.length," events • ",b?"Paused":"Live updates"]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===d.length?r.jsx("div",{className:"p-8 text-center text-gray-500",children:r.jsx("p",{children:"No events yet. Events will appear here as they occur."})}):r.jsx("div",{className:"divide-y divide-gray-200",children:d.map(e=>r.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 text-lg",children:S(e.type)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.message}),r.jsx(n.C,{variant:"outline",className:D(e.severity),children:e.severity})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[T(e.timestamp)," • ",e.type.replace("_"," ")]})]})]})},e.id))})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Status"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Backend API"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Operational"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${N?"bg-green-500":"bg-red-500"}`}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"WebSocket"}),r.jsx("p",{className:"text-xs text-gray-500",children:N?"Connected":"Disconnected"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Analytics Engine"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Running"})]})]})]})]})]})},j=[{id:"overview",name:"Overview",icon:"\uD83D\uDCCA",description:"Key metrics and system insights"},{id:"performance",name:"Performance",icon:"⚡",description:"Charts and trends analysis"},{id:"costs",name:"Costs",icon:"\uD83D\uDCB0",description:"Cost tracking and optimization"},{id:"realtime",name:"Real-time",icon:"\uD83D\uDD34",description:"Live monitoring and events"}];function v(){let[e,s]=(0,a.useState)("overview");return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor test execution performance, costs, and system insights"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Operational"})]}),r.jsx(x.z,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"\uD83D\uDD04 Refresh"})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-0","aria-label":"Tabs",children:j.map(t=>(0,r.jsxs)("button",{onClick:()=>s(t.id),className:`
                  flex items-center space-x-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors
                  ${e===t.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}
                `,children:[r.jsx("span",{className:"text-lg",children:t.icon}),r.jsx("span",{children:t.name})]},t.id))})}),(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsx("p",{className:"text-sm text-gray-600",children:j.find(s=>s.id===e)?.description||""})}),(()=>{switch(e){case"overview":default:return r.jsx(o,{});case"performance":return r.jsx(u,{});case"costs":return r.jsx(h,{});case"realtime":return r.jsx(p,{})}})()]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)(x.z,{variant:"outline",className:"justify-start",onClick:()=>window.open("/prompt-cards","_blank"),children:[r.jsx("span",{className:"mr-2",children:"\uD83E\uDDEA"}),"Run Tests"]}),(0,r.jsxs)(x.z,{variant:"outline",className:"justify-start",onClick:()=>{let s=new Blob([JSON.stringify({exported_at:new Date().toISOString(),tab:e,note:"Analytics data export"},null,2)],{type:"application/json"}),t=URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download=`analytics-${e}-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(t)},children:[r.jsx("span",{className:"mr-2",children:"\uD83D\uDCE5"}),"Export Data"]}),(0,r.jsxs)(x.z,{variant:"outline",className:"justify-start",onClick:()=>window.open("/prompt-cards/new","_blank"),children:[r.jsx("span",{className:"mr-2",children:"➕"}),"New Test"]}),(0,r.jsxs)(x.z,{variant:"outline",className:"justify-start",onClick:()=>s("realtime"),children:[r.jsx("span",{className:"mr-2",children:"\uD83D\uDC41️"}),"Monitor Live"]})]})]}),r.jsx("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{children:"Analytics Engine: Active"}),r.jsx("span",{children:"•"}),(0,r.jsxs)("span",{children:["Last Updated: ",new Date().toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{children:"Data Retention: 90 days"}),r.jsx("span",{children:"•"}),r.jsx("span",{children:"Refresh Rate: 30s"})]})]})})]})}},4560:(e,s,t)=>{"use strict";var r=t(5507);t.o(r,"useEffect")&&t.d(s,{useEffect:function(){return r.useEffect}}),t.o(r,"useState")&&t.d(s,{useState:function(){return r.useState}})},6188:(e,s,t)=>{"use strict";var r=t(5507);t.o(r,"useState")&&t.d(s,{useState:function(){return r.useState}})},5601:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2772).createProxy)(String.raw`/workspaces/prompt-card-system/frontend/src/app/analytics/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[942,428,122,850],()=>t(1470));module.exports=r})();