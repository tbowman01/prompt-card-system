(()=>{var e={};e.id=775,e.ids=[775],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},1586:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),s(8192),s(2029),s(5866);var r=s(3191),a=s(8716),n=s(7922),l=s.n(n),i=s(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d=["",{children:["demo",{children:["progress-tracking",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8192)),"/workspaces/prompt-card-system/frontend/src/app/demo/progress-tracking/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/workspaces/prompt-card-system/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/workspaces/prompt-card-system/frontend/src/app/demo/progress-tracking/page.tsx"],m="/demo/progress-tracking/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/demo/progress-tracking/page",pathname:"/demo/progress-tracking",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5541:(e,t,s)=>{Promise.resolve().then(s.bind(s,2182))},2182:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(326),a=s(7577),n=s.n(a);s(7493),s(9161);var l=s(6784);let i=({executionId:e,onComplete:t,onError:s,onCancel:n,showCancelButton:i=!0,autoStart:c=!0})=>{let[d,o]=(0,a.useState)(null),[m,x]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),[g,p]=(0,a.useState)(null),[b,j]=(0,a.useState)(""),[f,v]=(0,a.useState)(!1),{socket:N,isConnected:y,subscribeToTest:_,unsubscribeFromTest:w,cancelExecution:k}=(0,l.s)();(0,a.useEffect)(()=>{if(!N||!y||!c)return;_(e);let r=t=>{t.execution_id===e&&(o(t),"completed"===t.status?h(!0):"failed"===t.status?(p(t.message),h(!0),s?.(t.message)):"cancelled"===t.status&&(h(!0),n?.()))},a=e=>{x(t=>[...t,e])},l=s=>{s.execution_id===e&&(x(s.results),h(!0),t?.(s.results))},i=t=>{t.execution_id===e&&(p(t.error),h(!0),s?.(t.error))};return N.on("progress",r),N.on("test-result",a),N.on("execution-complete",l),N.on("execution-error",i),()=>{N.off("progress",r),N.off("test-result",a),N.off("execution-complete",l),N.off("execution-error",i),w(e)}},[N,y,e,c,t,s,n]);let C=e=>{let t=Math.floor(e/1e3),s=Math.floor(t/60),r=Math.floor(s/60);return r>0?`${r}h ${s%60}m ${t%60}s`:s>0?`${s}m ${t%60}s`:`${t}s`};return d?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Test Execution Progress"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-2xl",children:(e=>{switch(e){case"pending":return"⏳";case"running":return"\uD83D\uDD04";case"completed":return"✅";case"failed":return"❌";case"cancelled":return"\uD83D\uDEAB";default:return"❓"}})(d.status)}),r.jsx("span",{className:`font-medium ${(e=>{switch(e){case"pending":return"text-yellow-600";case"running":return"text-blue-600";case"completed":return"text-green-600";case"failed":return"text-red-600";default:return"text-gray-600"}})(d.status)}`,children:d.status.toUpperCase()})]})]}),i&&!u&&"cancelled"!==d.status&&r.jsx("button",{onClick:()=>{v(!0)},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium",disabled:!y,children:"Cancel Execution"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[r.jsx("span",{children:"Progress"}),(0,r.jsxs)("span",{children:[Math.round(d.overall_progress_percent),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.max(0,Math.min(100,d.overall_progress_percent))}%`}})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.total_tests}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Tests"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.completed_tests}),r.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:d.failed_tests}),r.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]})]}),d.current_test&&"running"===d.status&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-md p-4 mb-4",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Currently Running:"}),(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Test Case:"})," #",d.current_test.test_case_id]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Model:"})," ",d.current_test.model]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Started:"})," ",new Date(d.current_test.started_at).toLocaleTimeString()]})]})]}),r.jsx("div",{className:"bg-gray-50 rounded-md p-4 mb-4",children:r.jsx("p",{className:"text-sm text-gray-700",children:d.message})}),"running"===d.status&&d.estimated_time_remaining>0&&(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[(0,r.jsxs)("span",{children:["Estimated Time Remaining: ",(e=>{if(e<=0)return"Unknown";let t=Math.floor(e/1e3),s=Math.floor(t/60);return s>0?`${s}m ${t%60}s`:`${t}s`})(d.estimated_time_remaining)]}),(0,r.jsxs)("span",{children:["Last Updated: ",new Date(d.updated_at).toLocaleTimeString()]})]}),g&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:[r.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Error"}),r.jsx("p",{className:"text-sm text-red-700",children:g})]}),m.length>0&&(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Recent Test Results:"}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:m.slice(-5).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-md p-2",children:[(0,r.jsxs)("span",{className:"text-sm",children:["Test #",e.test_case_id]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`text-sm font-medium ${e.passed?"text-green-600":"text-red-600"}`,children:e.passed?"✅ PASS":"❌ FAIL"}),r.jsx("span",{className:"text-xs text-gray-500",children:C(e.execution_time_ms)})]})]},t))})]}),!y&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mt-4",children:r.jsx("p",{className:"text-sm text-yellow-700",children:"⚠️ Connection lost. Progress updates may be delayed."})}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Cancel Test Execution"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Are you sure you want to cancel this test execution? This action cannot be undone."}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for cancellation:"}),r.jsx("input",{type:"text",value:b,onChange:e=>j(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"e.g., Taking too long, incorrect configuration"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{onClick:()=>{v(!1),j("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Keep Running"}),r.jsx("button",{onClick:()=>{b.trim()&&(k(e,b),v(!1),j(""))},disabled:!b.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-red-600 disabled:bg-red-300",children:"Cancel Execution"})]})]})})]}):(0,r.jsxs)("div",{className:"flex items-center justify-center p-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-2",children:"Loading execution progress..."})]})},c=({promptCardId:e,testCaseIds:t,onComplete:s,onError:l,autoStart:c=!1})=>{let[d,o]=(0,a.useState)(null),[m,x]=(0,a.useState)(!c),[u,h]=(0,a.useState)(!1),[g,p]=(0,a.useState)(null),[b,j]=(0,a.useState)("llama3.1"),[f,v]=(0,a.useState)({max_concurrent_tests:3,timeout_per_test:3e4,retry_failed_tests:!1,max_retries:1,resource_limits:{memory_mb:1024,cpu_percent:50}}),[N,y]=(0,a.useState)(0),_=async()=>{if(0===t.length){p("No test cases selected");return}h(!0),p(null);try{let s=await fetch("/api/test-cases/execute-parallel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_card_id:e,test_case_ids:t,model:b,configuration:f,priority:N})}),r=await s.json();if(!s.ok)throw Error(r.error||"Failed to start test execution");o(r.data.execution_id),x(!1),h(!1)}catch(t){console.error("Error starting execution:",t);let e=t instanceof Error?t.message:"Failed to start test execution";p(e),h(!1),l?.(e)}},w=(e,t)=>{v(s=>({...s,[e]:t}))},k=(e,t)=>{v(s=>({...s,resource_limits:{...s.resource_limits,[e]:t}}))};return(n().useEffect(()=>{!c||d||u||_()},[c]),d)?r.jsx(i,{executionId:d,onComplete:e=>{s?.(e)},onError:e=>{p(e),l?.(e)},onCancel:()=>{o(null),x(!0)},showCancelButton:!0,autoStart:!0}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Parallel Test Execution"}),r.jsx("button",{onClick:()=>{v({max_concurrent_tests:3,timeout_per_test:3e4,retry_failed_tests:!1,max_retries:1,resource_limits:{memory_mb:1024,cpu_percent:50}}),y(0),j("llama3.1")},className:"text-sm text-gray-500 hover:text-gray-700",children:"Reset to Defaults"})]}),g&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:[r.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Error"}),r.jsx("p",{className:"text-sm text-red-700",children:g})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-md p-4",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Test Summary"}),(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Prompt Card ID:"})," ",e]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Test Cases:"})," ",t.length," selected"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Test Case IDs:"})," ",t.join(", ")]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language Model"}),r.jsx("select",{value:b,onChange:e=>j(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:["llama3.1","llama3.1:8b","llama3.1:70b","codellama","mistral","phi3"].map(e=>r.jsx("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium",children:"Execution Configuration"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Concurrent Tests"}),r.jsx("input",{type:"number",min:"1",max:"10",value:f.max_concurrent_tests,onChange:e=>w("max_concurrent_tests",parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of tests to run simultaneously"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timeout per Test (ms)"}),r.jsx("input",{type:"number",min:"1000",max:"300000",step:"1000",value:f.timeout_per_test,onChange:e=>w("timeout_per_test",parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum time per test execution"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:f.retry_failed_tests,onChange:e=>w("retry_failed_tests",e.target.checked),className:"mr-2"}),r.jsx("span",{className:"text-sm",children:"Retry failed tests"})]}),f.retry_failed_tests&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-700",children:"Max retries:"}),r.jsx("input",{type:"number",min:"1",max:"5",value:f.max_retries,onChange:e=>w("max_retries",parseInt(e.target.value)),className:"w-16 border border-gray-300 rounded-md px-2 py-1 text-sm"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium",children:"Resource Limits"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Memory Limit (MB)"}),r.jsx("input",{type:"number",min:"512",max:"8192",step:"256",value:f.resource_limits.memory_mb,onChange:e=>k("memory_mb",parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPU Limit (%)"}),r.jsx("input",{type:"number",min:"10",max:"100",step:"10",value:f.resource_limits.cpu_percent,onChange:e=>k("cpu_percent",parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,r.jsxs)("select",{value:N,onChange:e=>y(parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[r.jsx("option",{value:-2,children:"Low"}),r.jsx("option",{value:0,children:"Normal"}),r.jsx("option",{value:1,children:"High"}),r.jsx("option",{value:2,children:"Critical"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher priority executions run first"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-md p-4",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Estimated Resource Usage"}),(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Expected Duration:"})," "," ",Math.ceil(t.length*f.timeout_per_test/f.max_concurrent_tests/1e3),"s - "," ",Math.ceil(t.length*f.timeout_per_test/1e3),"s"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Memory Usage:"})," "," ",f.resource_limits.memory_mb*f.max_concurrent_tests,"MB"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"CPU Usage:"})," "," ",f.resource_limits.cpu_percent,"%"]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:_,disabled:u||0===t.length,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white px-6 py-2 rounded-md font-medium",children:u?(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Starting..."]}):`Start Parallel Execution (${t.length} tests)`})})]})]})},d=({autoRefresh:e=!0,refreshInterval:t=5e3})=>{let[s,n]=(0,a.useState)(null),[i,c]=(0,a.useState)([]),[d,o]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),{socket:u,isConnected:h,subscribeToProgress:g,unsubscribeFromProgress:p,getActiveExecutions:b}=(0,l.s)(),j=async()=>{try{let e=await fetch("/api/test-cases/queue/stats");if(!e.ok)throw Error("Failed to fetch queue statistics");let t=await e.json();n(t.data)}catch(e){console.error("Error fetching queue stats:",e),x(e instanceof Error?e.message:"Failed to fetch queue statistics")}},f=async()=>{try{let e=await fetch("/api/test-cases/executions/active");if(!e.ok)throw Error("Failed to fetch active executions");let t=await e.json();c(t.data)}catch(e){console.error("Error fetching active executions:",e),x(e instanceof Error?e.message:"Failed to fetch active executions")}finally{o(!1)}};(0,a.useEffect)(()=>{if((async()=>{await Promise.all([j(),f()]),o(!1)})(),e){let e=setInterval(j,t);return()=>clearInterval(e)}},[e,t]),(0,a.useEffect)(()=>{if(!u||!h)return;g();let e=e=>{c(t=>{let s=t.filter(t=>t.execution_id!==e.execution_id);return"running"===e.status||"pending"===e.status?[...s,e]:s})},t=e=>{c(e)};return u.on("progress",e),u.on("active-executions",t),b(),()=>{u.off("progress",e),u.off("active-executions",t),p()}},[u,h]);let v=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"running":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=e=>new Date(e).toLocaleTimeString(),y=e=>{let t=Math.floor(e/1e3),s=Math.floor(t/60),r=Math.floor(s/60);return r>0?`${r}h ${s%60}m`:s>0?`${s}m ${t%60}s`:`${t}s`};return d?r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-center h-64",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-2",children:"Loading queue information..."})]})}):m?r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error"}),r.jsx("p",{className:"text-sm text-red-700",children:m}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-md text-sm hover:bg-red-700",children:"Retry"})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Queue Statistics"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${h?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-sm text-gray-600",children:h?"Connected":"Disconnected"})]})]}),s&&(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.waiting}),r.jsx("div",{className:"text-sm text-gray-600",children:"Waiting"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.active}),r.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.completed}),r.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.failed}),r.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-600",children:s.delayed}),r.jsx("div",{className:"text-sm text-gray-600",children:"Delayed"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Executions"}),0===i.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("div",{className:"text-4xl mb-2",children:"\uD83C\uDF89"}),r.jsx("p",{children:"No active test executions"})]}):r.jsx("div",{className:"space-y-4",children:i.map(e=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("span",{className:"font-mono text-sm text-gray-600",children:[e.execution_id.substring(0,8),"..."]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(e.status)}`,children:e.status.toUpperCase()})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Updated: ",N(e.updated_at.toString())]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[r.jsx("span",{children:"Progress"}),(0,r.jsxs)("span",{children:[Math.round(e.overall_progress_percent),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.max(0,Math.min(100,e.overall_progress_percent))}%`}})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Tests: ",e.completed_tests,"/",e.total_tests]}),e.failed_tests>0&&(0,r.jsxs)("span",{className:"text-red-600",children:["Failed: ",e.failed_tests]})]}),e.estimated_time_remaining>0&&(0,r.jsxs)("span",{className:"text-gray-500",children:["ETA: ",y(e.estimated_time_remaining)]})]}),r.jsx("div",{className:"mt-2 text-sm text-gray-600",children:e.message}),e.current_test&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Currently Running:"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("div",{children:["Test Case #",e.current_test.test_case_id]}),(0,r.jsxs)("div",{children:["Model: ",e.current_test.model]}),(0,r.jsxs)("div",{children:["Started: ",N(e.current_test.started_at.toString())]})]})]})]},e.execution_id))})]})]})},o=()=>{let[e,t]=(0,a.useState)("tracker"),[s,n]=(0,a.useState)(""),[l,o]=(0,a.useState)(null),m=e=>{o(e),console.log("Test execution completed:",e)},x=e=>{console.error("Test execution error:",e)};return r.jsx("div",{className:"min-h-screen bg-gray-100 p-8",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"WebSocket Progress Tracking Demo"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Demonstrate real-time progress tracking for parallel test execution with WebSocket integration."}),(0,r.jsxs)("div",{className:"flex space-x-1 mb-6",children:[r.jsx("button",{onClick:()=>t("tracker"),className:`px-4 py-2 rounded-md font-medium ${"tracker"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Progress Tracker"}),r.jsx("button",{onClick:()=>t("queue"),className:`px-4 py-2 rounded-md font-medium ${"queue"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Queue Monitor"}),r.jsx("button",{onClick:()=>t("runner"),className:`px-4 py-2 rounded-md font-medium ${"runner"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Test Runner"})]}),"tracker"===e&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:[r.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Progress Tracker Demo"}),r.jsx("p",{className:"text-sm text-yellow-700 mb-4",children:"To test the progress tracker, you need an active execution ID. Start a test execution from the Test Runner tab first, then enter the execution ID here."}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("input",{type:"text",value:s,onChange:e=>n(e.target.value),placeholder:"Enter execution ID (e.g., 12345678-1234-1234-1234-123456789012)",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm"}),r.jsx("button",{onClick:()=>n(""),className:"px-4 py-2 bg-gray-500 text-white rounded-md text-sm hover:bg-gray-600",children:"Clear"})]})]}),s?r.jsx(i,{executionId:s,onComplete:m,onError:x,onCancel:()=>{console.log("Test execution cancelled")},showCancelButton:!0,autoStart:!0}):(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Execution ID"}),r.jsx("p",{className:"text-gray-600",children:"Enter an execution ID above to track progress in real-time."})]})]}),"queue"===e&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[r.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Queue Monitor"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Monitor the test execution queue and view active executions in real-time. This updates automatically via WebSocket connections."})]}),r.jsx(d,{autoRefresh:!0,refreshInterval:5e3})]}),"runner"===e&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[r.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Parallel Test Runner"}),r.jsx("p",{className:"text-sm text-green-700",children:"Start a new parallel test execution. This will create a new execution ID that you can use in the Progress Tracker tab to monitor progress."})]}),r.jsx(c,{promptCardId:1,testCaseIds:[1,2,3,4,5],onComplete:m,onError:x,autoStart:!1})]})]}),l&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Test Results"}),r.jsx("div",{className:"bg-gray-50 rounded-md p-4",children:r.jsx("pre",{className:"text-sm text-gray-700 overflow-x-auto",children:JSON.stringify(l,null,2)})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-8",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"WebSocket Connection Status"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Connected to WebSocket server"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Server:"})," ",process.env.NEXT_PUBLIC_WEBSOCKET_URL||"http://localhost:3001"]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Features:"})," Real-time progress updates, queue monitoring, execution cancellation"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-8",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Demo Instructions"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:"1. Start a Test Execution"}),r.jsx("p",{className:"text-sm text-gray-600",children:'Go to the "Test Runner" tab and configure a parallel test execution. Click "Start Parallel Execution" to queue the tests and get an execution ID.'})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:"2. Monitor Progress"}),r.jsx("p",{className:"text-sm text-gray-600",children:'Copy the execution ID and paste it into the "Progress Tracker" tab. You\'ll see real-time updates as tests are executed in parallel.'})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:"3. View Queue Status"}),r.jsx("p",{className:"text-sm text-gray-600",children:'Check the "Queue Monitor" tab to see overall queue statistics and all active executions.'})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:"4. Cancel Execution"}),r.jsx("p",{className:"text-sm text-gray-600",children:"From the Progress Tracker, you can cancel running executions with a reason. This demonstrates the real-time cancellation capability."})]})]})]})]})})}},6784:(e,t,s)=>{"use strict";s.d(t,{s:()=>n});var r=s(7577),a=s(57);let n=(e=process.env.NEXT_PUBLIC_WEBSOCKET_URL||"http://localhost:3001",t={})=>{let[s,n]=(0,r.useState)(!1),l=(0,r.useRef)(null),i=(0,r.useRef)(null),{autoConnect:c=!0,reconnection:d=!0,reconnectionAttempts:o=5,reconnectionDelay:m=1e3}=t,x=()=>{l.current&&l.current.connected||(console.log("Connecting to WebSocket server:",e),l.current=(0,a.io)(e,{autoConnect:!1,reconnection:d,reconnectionAttempts:o,reconnectionDelay:m}),l.current.on("connect",()=>{console.log("WebSocket connected"),n(!0),i.current&&(clearTimeout(i.current),i.current=null)}),l.current.on("disconnect",e=>{console.log("WebSocket disconnected:",e),n(!1),"io server disconnect"===e&&d&&o>0&&(i.current=setTimeout(()=>{x()},m))}),l.current.on("connect_error",e=>{console.error("WebSocket connection error:",e),n(!1)}),l.current.on("reconnect",e=>{console.log("WebSocket reconnected after",e,"attempts"),n(!0)}),l.current.on("reconnect_error",e=>{console.error("WebSocket reconnection error:",e)}),l.current.on("reconnect_failed",()=>{console.error("WebSocket reconnection failed"),n(!1)}),l.current.connect())},u=()=>{l.current&&(console.log("Disconnecting from WebSocket server"),l.current.disconnect(),l.current=null,n(!1)),i.current&&(clearTimeout(i.current),i.current=null)};return(0,r.useEffect)(()=>(c&&x(),()=>{u()}),[c]),{socket:l.current,isConnected:s,connect:x,disconnect:u,subscribeToTest:e=>{l.current&&s&&(console.log("Subscribing to test execution:",e),l.current.emit("subscribe-test",e))},unsubscribeFromTest:e=>{l.current&&s&&(console.log("Unsubscribing from test execution:",e),l.current.emit("unsubscribe-test",e))},subscribeToProgress:()=>{l.current&&s&&(console.log("Subscribing to progress updates"),l.current.emit("subscribe-progress"))},unsubscribeFromProgress:()=>{l.current&&s&&(console.log("Unsubscribing from progress updates"),l.current.emit("unsubscribe-progress"))},cancelExecution:(e,t)=>{l.current&&s&&(console.log("Cancelling execution:",e,"reason:",t),l.current.emit("cancel-execution",{execution_id:e,reason:t,cleanup_partial_results:!0,notify_stakeholders:!0}))},getProgress:e=>{l.current&&s&&l.current.emit("get-progress",e)},getActiveExecutions:()=>{l.current&&s&&l.current.emit("get-active-executions")}}}},8192:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/workspaces/prompt-card-system/frontend/src/app/demo/progress-tracking/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[975,57,452],()=>s(1586));module.exports=r})();