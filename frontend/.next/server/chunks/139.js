exports.id=139,exports.ids=[139],exports.modules={943:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},1727:()=>{},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},265:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var a=s(326),r=s(7577),l=s(5047),i=s(9837),n=s(9375),d=s(6792);let o=[{value:"contains",label:"Contains"},{value:"not-contains",label:"Does not contain"},{value:"equals",label:"Equals"},{value:"not-equals",label:"Does not equal"},{value:"regex",label:"Matches regex"},{value:"length",label:"Length"}];function c({promptCardId:e,testCases:t,variables:s,onTestCasesChange:l}){let[c,m]=(0,r.useState)(!1),[x,p]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[b,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)({name:"",input_variables:{},expected_output:"",assertions:[]}),j=async()=>{if(!y.name.trim()){p("Test case name is required");return}let a=s.filter(e=>!y.input_variables[e]?.trim());if(a.length>0){p(`Please provide values for: ${a.join(", ")}`);return}try{m(!0),p(null);let s={prompt_card_id:e,name:y.name,input_variables:y.input_variables,expected_output:y.expected_output||void 0,assertions:y.assertions},a=await fetch("/api/test-cases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await a.json();r.success?(l([...t,r.data]),g(!1),v({name:"",input_variables:{},expected_output:"",assertions:[]})):p(r.error||"Failed to save test case")}catch(e){p("Network error: Failed to save test case")}finally{m(!1)}},f=async e=>{if(confirm("Are you sure you want to delete this test case?"))try{m(!0);let s=await fetch(`/api/test-cases/${e}`,{method:"DELETE"}),a=await s.json();a.success?l(t.filter(t=>t.id!==e)):p(a.error||"Failed to delete test case")}catch(e){p("Network error: Failed to delete test case")}finally{m(!1)}},N=(e,t,s)=>{v(a=>({...a,assertions:a.assertions.map((a,r)=>r===e?{...a,[t]:s}:a)}))},w=e=>{v(t=>({...t,assertions:t.assertions.filter((t,s)=>s!==e)}))},C=(e,t=!1)=>a.jsx("div",{className:"space-y-2",children:Object.entries(e).map(([e,s])=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 w-24",children:[e,":"]}),t?a.jsx("input",{type:"text",value:y.input_variables[e]||"",onChange:t=>v(s=>({...s,input_variables:{...s.input_variables,[e]:t.target.value}})),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:`Enter value for ${e}`}):a.jsx("span",{className:"text-sm text-gray-600 bg-gray-50 px-2 py-1 rounded font-mono",children:s})]},e))});return(0,a.jsxs)("div",{className:"space-y-6",children:[x&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsx("p",{className:"text-red-800",children:x})}),t.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900",children:"Existing Test Cases"}),t.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),a.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>f(e.id),disabled:c,className:"text-red-600 border-red-200 hover:bg-red-50",children:"Delete"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Input Variables:"}),C(e.input_variables)]}),(0,a.jsxs)("div",{children:[e.expected_output&&(0,a.jsxs)("div",{className:"mb-3",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Expected Output:"}),a.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:e.expected_output})]}),e.assertions.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assertions:"}),a.jsx("div",{className:"space-y-1",children:e.assertions.map((e,t)=>(0,a.jsxs)(d.C,{variant:"outline",className:"mr-2",children:[e.type,": ",e.value]},t))})]})]})]})]},e.id))]}),b?(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 bg-gray-50",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Add New Test Case"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Case Name *"}),a.jsx("input",{type:"text",value:y.name,onChange:e=>v(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe what this test case validates"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Input Variables *"}),C(y.input_variables,!0)]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Output (optional)"}),a.jsx("textarea",{value:y.expected_output,onChange:e=>v(t=>({...t,expected_output:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe what the expected output should contain"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assertions (optional)"}),a.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{v(e=>({...e,assertions:[...e.assertions,{type:"contains",value:"",description:""}]}))},children:"Add Assertion"})]}),y.assertions.map((e,t)=>a.jsx("div",{className:"border border-gray-200 rounded p-3 mb-2 bg-white",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[a.jsx("select",{value:e.type,onChange:e=>N(t,"type",e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:o.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))}),a.jsx("input",{type:"length"===e.type?"number":"text",value:e.value,onChange:s=>N(t,"value","length"===e.type?Number(s.target.value):s.target.value),placeholder:"Assertion value",className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[a.jsx("input",{type:"text",value:e.description||"",onChange:e=>N(t,"description",e.target.value),placeholder:"Description (optional)",className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm"}),a.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>w(t),children:"\xd7"})]})]})},t))]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[a.jsx(i.z,{type:"button",variant:"outline",onClick:()=>g(!1),disabled:c,children:"Cancel"}),a.jsx(i.z,{type:"button",onClick:j,disabled:c,children:c?a.jsx(n.T,{size:"sm"}):"Save Test Case"})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx("p",{className:"text-gray-500 mb-4",children:0===t.length?"No test cases yet.":"Add more test cases to validate your prompt."}),a.jsx(i.z,{onClick:()=>{let e={};s.forEach(t=>{e[t]=""}),v({name:"",input_variables:e,expected_output:"",assertions:[]}),g(!0)},disabled:0===s.length,children:"Add Test Case"}),0===s.length&&a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Add variables to your prompt template first"})]})]})}function m({cardId:e,initialData:t}){let s=(0,l.useRouter)(),[d,o]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),[p,u]=(0,r.useState)({title:"",description:"",prompt_template:"",variables:[]}),[h,b]=(0,r.useState)([]),g=e=>[...new Set((e.match(/\{\{(\w+)\}\}/g)||[]).map(e=>e.replace(/\{\{|\}\}/g,"")))],y=e=>{let t=g(e);u(s=>({...s,prompt_template:e,variables:t}))},v=async t=>{if(t.preventDefault(),!p.title.trim()||!p.prompt_template.trim()){x("Title and prompt template are required");return}try{o(!0),x(null);let t=e?`/api/prompt-cards/${e}`:"/api/prompt-cards",a=e?"PUT":"POST",r=await fetch(t,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),l=await r.json();l.success?s.push("/prompt-cards"):x(l.error||"Failed to save prompt card")}catch(e){x("Network error: Failed to save prompt card")}finally{o(!1)}};return d&&!p.title?a.jsx("div",{className:"flex justify-center items-center min-h-64",children:a.jsx(n.T,{})}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e?"Edit Prompt Card":"Create New Prompt Card"}),a.jsx("p",{className:"text-gray-600 mt-2",children:e?"Update your prompt template and test cases":"Create a new prompt template with test cases"})]}),m&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsx("p",{className:"text-red-800",children:m})}),(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),a.jsx("input",{type:"text",id:"title",value:p.title,onChange:e=>u(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a descriptive title for your prompt",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",value:p.description,onChange:e=>u(t=>({...t,description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe what this prompt does and when to use it"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Prompt Template"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"template",className:"block text-sm font-medium text-gray-700 mb-1",children:"Template *"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:["Use ",a.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"{{variable_name}}"})," for variables that will be replaced during testing."]}),a.jsx("textarea",{id:"template",value:p.prompt_template,onChange:e=>y(e.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Enter your prompt template here. Use {{variable_name}} for dynamic content.",required:!0})]}),p.variables.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Detected Variables:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.variables.map(e=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},e))})]})]})]}),e&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Cases"}),a.jsx(c,{promptCardId:e,testCases:h,variables:p.variables,onTestCasesChange:b})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:[e&&h.length>0&&(0,a.jsxs)(i.z,{type:"button",variant:"outline",onClick:()=>s.push(`/prompt-cards/${e}/test`),disabled:d,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:["Run Tests (",h.length,")"]}),(0,a.jsxs)("div",{className:"flex space-x-4 ml-auto",children:[a.jsx(i.z,{type:"button",variant:"outline",onClick:()=>{s.push("/prompt-cards")},disabled:d,children:"Cancel"}),a.jsx(i.z,{type:"submit",disabled:d,className:"min-w-24",children:d?a.jsx(n.T,{size:"sm"}):e?"Update Card":"Create Card"})]})]})]}),!e&&a.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,a.jsxs)("p",{className:"text-blue-800 text-sm",children:[a.jsx("strong",{children:"Tip:"})," After creating the prompt card, you'll be able to add test cases to validate your prompt's behavior."]})})]})}},6792:(e,t,s)=>{"use strict";s.d(t,{C:()=>r});var a=s(326);function r({children:e,variant:t="default",size:s="md"}){return a.jsx("span",{className:`inline-flex items-center font-medium rounded-full ${{default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 bg-white text-gray-700"}[t]} ${{sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"}[s]}`,children:e})}s(7577)},9837:(e,t,s)=>{"use strict";s.d(t,{z:()=>r});var a=s(326);function r({variant:e="primary",size:t="md",loading:s=!1,children:r,className:l="",disabled:i,...n}){return(0,a.jsxs)("button",{className:`inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[e]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t]} ${l}`,disabled:i||s,...n,children:[s&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]})}s(7577)},9375:(e,t,s)=>{"use strict";s.d(t,{T:()=>r});var a=s(326);function r({size:e="md",className:t=""}){return a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-primary-600 ${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[e]} ${t}`,children:a.jsx("span",{className:"sr-only",children:"Loading..."})})}s(7577)},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>i});var a=s(9510),r=s(5317),l=s.n(r);s(5023);let i={title:"Prompt Card System",description:"Test-driven prompt development with local LLM integration"};function n({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:l().className,children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"bg-white shadow",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Prompt Card System"})}),(0,a.jsxs)("nav",{className:"flex space-x-4",children:[a.jsx("a",{href:"/",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Dashboard"}),a.jsx("a",{href:"/prompt-cards",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Prompt Cards"}),a.jsx("a",{href:"/analytics",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Analytics"}),a.jsx("a",{href:"/yaml",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"YAML Import/Export"})]})]})})}),a.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:a.jsx("div",{className:"px-4 py-6 sm:px-0",children:e})})]})})})}},5023:()=>{}};