"use strict";exports.id=453,exports.ids=[453],exports.modules={9604:(e,s,t)=>{t.d(s,{Z:()=>d});var a=t(9899),l=t(5507),r=t(2435),i=t(8306);function d({execution:e,onClear:s}){let[t,d]=(0,l.useState)(new Set),n=e=>{d(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})},c=e=>{switch(e){case"passed":return a.jsx(r.C,{variant:"success",children:"Passed"});case"failed":return a.jsx(r.C,{variant:"danger",children:"Failed"});case"error":return a.jsx(r.C,{variant:"warning",children:"Error"});default:return a.jsx(r.C,{variant:"default",children:e})}},x=e=>e?a.jsx(r.C,{variant:"success",size:"sm",children:"✓"}):a.jsx(r.C,{variant:"danger",size:"sm",children:"✗"}),m=e=>e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`;return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Results"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Executed at ",new Date(e.created_at).toLocaleString()]})]}),s&&a.jsx(i.z,{variant:"outline",size:"sm",onClick:s,children:"Clear Results"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.total_tests}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total Tests"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.passed_tests}),a.jsx("div",{className:"text-sm text-gray-500",children:"Passed"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.failed_tests}),a.jsx("div",{className:"text-sm text-gray-500",children:"Failed"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-700",children:m(e.execution_time_ms)}),a.jsx("div",{className:"text-sm text-gray-500",children:"Duration"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),c(e.status)]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Model:"}),a.jsx(r.C,{variant:"outline",children:e.model_used})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Execution ID:"}),a.jsx("code",{className:"text-xs bg-white px-2 py-1 rounded border",children:e.id})]})]}),e.error_message&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-red-800 mb-1",children:"Execution Error"}),a.jsx("div",{className:"text-sm text-red-700",children:e.error_message})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Individual Results"}),0===e.test_results.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No test results available"}):e.test_results.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"p-4 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>n(e.id),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[c(e.status),a.jsx("span",{className:"font-medium text-gray-900",children:e.test_case_name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-sm text-gray-500",children:m(e.execution_time_ms)}),a.jsx(i.z,{variant:"outline",size:"sm",children:t.has(e.id)?"Collapse":"Expand"})]})]})}),t.has(e.id)&&(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[e.error_message&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:[a.jsx("div",{className:"text-sm font-medium text-red-800 mb-1",children:"Error"}),a.jsx("div",{className:"text-sm text-red-700",children:e.error_message})]}),e.assertion_results.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assertions"}),a.jsx("div",{className:"space-y-2",children:e.assertion_results.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-2 bg-gray-50 rounded",children:[x(e.passed),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.type,":"]}),(0,a.jsxs)("span",{className:"ml-1",children:['Expected "',e.expected,'", got "',e.actual,'"']})]}),e.description&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},s))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.expected_output&&(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Expected Output"}),a.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:a.jsx("pre",{className:"text-sm text-green-800 whitespace-pre-wrap",children:e.expected_output})})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Actual Output"}),a.jsx("div",{className:`p-3 border rounded-md ${"passed"===e.status?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:a.jsx("pre",{className:`text-sm whitespace-pre-wrap ${"passed"===e.status?"text-green-800":"text-red-800"}`,children:e.actual_output})})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Test Case ID: ",e.test_case_id]}),(0,a.jsxs)("span",{children:["Model: ",e.model_used]}),(0,a.jsxs)("span",{children:["Execution Time: ",m(e.execution_time_ms)]})]})]})]},e.id))]})]})}},8863:(e,s,t)=>{t.d(s,{Z:()=>c});var a=t(9899),l=t(5507),r=t(8306),i=t(899),d=t(2435),n=t(6319);function c({promptCardId:e,testCases:s,onTestComplete:t,onError:c}){let[x,m]=(0,l.useState)(!1),[o,u]=(0,l.useState)([]),[h,g]=(0,l.useState)("llama3.2"),[j,p]=(0,l.useState)(!1),[b,v]=(0,l.useState)("sequential"),N=e=>{u(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},f=async()=>{if(0===o.length&&!j){c?.("Please select at least one test to run");return}m(!0);try{let a=j?s.map(e=>e.id):o;if("parallel"===b){let s=await fetch("/api/test-cases/execute-parallel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_card_id:e,test_case_ids:a,model:h,configuration:{max_concurrent_tests:3,timeout_per_test:3e4,retry_failed_tests:!1,max_retries:1,resource_limits:{memory_mb:1024,cpu_percent:50}},priority:0})}),l=await s.json();if(!s.ok)throw Error(l.error||"Failed to start parallel execution");t?.({execution_id:l.data.execution_id,status:"running",mode:"parallel"})}else{let s=await n.hi.runTests({prompt_card_id:e,model:h,test_case_ids:j?void 0:o});s.execution?t?.(s.execution):setTimeout(async()=>{try{let e=await n.hi.getTestExecution(s.execution_id);t?.(e)}catch(e){c?.(e instanceof Error?e.message:"Failed to get test results")}},1e3)}}catch(e){c?.(e instanceof Error?e.message:"Failed to run tests")}finally{m(!1)}},y=async e=>{try{let s=await n.hi.runSingleTest(e,{model:h});console.log("Single test result:",s)}catch(e){c?.(e instanceof Error?e.message:"Failed to run test")}};return 0===s.length?(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[a.jsx("div",{className:"text-gray-500 mb-2",children:a.jsx("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),a.jsx("p",{className:"text-gray-600",children:"No test cases available to run"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create test cases first to start testing"})]}):(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Runner"}),(0,a.jsxs)(d.C,{variant:"default",children:[s.length," test cases"]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),(0,a.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:x,children:[a.jsx("option",{value:"llama3.2",children:"Llama 3.2"}),a.jsx("option",{value:"llama3.1",children:"Llama 3.1"}),a.jsx("option",{value:"mistral",children:"Mistral"}),a.jsx("option",{value:"codellama",children:"CodeLlama"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Execution Mode"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"executionMode",value:"sequential",checked:"sequential"===b,onChange:e=>v(e.target.value),disabled:x,className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Sequential"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"executionMode",value:"parallel",checked:"parallel"===b,onChange:e=>v(e.target.value),disabled:x,className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Parallel"}),a.jsx("span",{className:"ml-1 text-xs text-blue-600",children:"⚡ Faster"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"sequential"===b?"Run tests one at a time (traditional mode)":"Run multiple tests simultaneously with real-time progress tracking"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Tests to Run"}),a.jsx(r.z,{variant:"outline",size:"sm",onClick:()=>{j?u([]):u(s.map(e=>e.id)),p(!j)},disabled:x,children:j?"Deselect All":"Select All"})]}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:`test-${e.id}`,checked:j||o.includes(e.id),onChange:()=>N(e.id),disabled:x,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:`test-${e.id}`,className:"text-sm text-gray-900 cursor-pointer",children:e.name})]}),a.jsx(r.z,{variant:"outline",size:"sm",onClick:()=>y(e.id),disabled:x,className:"text-xs",children:"Run Solo"})]},e.id))})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(r.z,{onClick:f,disabled:x||0===o.length&&!j,loading:x,className:"px-6",children:x?(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.T,{size:"sm",className:"mr-2"}),"parallel"===b?"Starting Parallel Tests...":"Running Tests..."]}):(0,a.jsxs)(a.Fragment,{children:["parallel"===b?"⚡ ":"","Run ",j?"All":o.length," Test",(j?s.length:o.length)!==1?"s":"","parallel"===b?" (Parallel)":""]})})})]})}}};