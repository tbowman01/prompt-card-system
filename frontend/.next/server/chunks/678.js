exports.id=678,exports.ids=[678],exports.modules={57:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,6133,23)),Promise.resolve().then(c.t.bind(c,6444,23)),Promise.resolve().then(c.t.bind(c,6042,23)),Promise.resolve().then(c.t.bind(c,9477,23)),Promise.resolve().then(c.t.bind(c,9345,23)),Promise.resolve().then(c.t.bind(c,2089,23)),Promise.resolve().then(c.t.bind(c,6577,23)),Promise.resolve().then(c.t.bind(c,1307,23)),Promise.resolve().then(c.t.bind(c,4817,23))},1135:()=>{},1170:(a,b,c)=>{"use strict";c.d(b,{E:()=>e});var d=c(687);function e({children:a,variant:b="default",size:c="md"}){return(0,d.jsx)("span",{className:`inline-flex items-center font-medium rounded-full ${{default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 bg-white text-gray-700"}[b]} ${{sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"}[c]}`,children:a})}c(3210)},2643:(a,b,c)=>{"use strict";c.d(b,{$:()=>e});var d=c(687);function e({variant:a="primary",size:b="md",loading:c=!1,children:e,className:f="",disabled:g,...h}){return(0,d.jsxs)("button",{className:`inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[a]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[b]} ${f}`,disabled:g||c,...h,children:[c&&(0,d.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]})}c(3210)},4431:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,metadata:()=>g});var d=c(7413);c(1135);var e=c(7339),f=c.n(e);let g={title:"Prompt Card System",description:"Test-driven prompt development with local LLM integration"};function h({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:f().className,children:(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)("header",{className:"bg-white shadow",children:(0,d.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,d.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,d.jsx)("div",{className:"flex items-center",children:(0,d.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Prompt Card System"})}),(0,d.jsxs)("nav",{className:"flex space-x-4",children:[(0,d.jsx)("a",{href:"/",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Dashboard"}),(0,d.jsx)("a",{href:"/prompt-cards",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Prompt Cards"}),(0,d.jsx)("a",{href:"/analytics",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Analytics"}),(0,d.jsx)("a",{href:"/yaml",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"YAML Import/Export"})]})]})})}),(0,d.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,d.jsx)("div",{className:"px-4 py-6 sm:px-0",children:a})})]})})})}},6189:(a,b,c)=>{"use strict";var d=c(5773);c.o(d,"useParams")&&c.d(b,{useParams:function(){return d.useParams}}),c.o(d,"useRouter")&&c.d(b,{useRouter:function(){return d.useRouter}})},6505:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,5227,23)),Promise.resolve().then(c.t.bind(c,6346,23)),Promise.resolve().then(c.t.bind(c,7924,23)),Promise.resolve().then(c.t.bind(c,99,23)),Promise.resolve().then(c.t.bind(c,8243,23)),Promise.resolve().then(c.t.bind(c,8827,23)),Promise.resolve().then(c.t.bind(c,2763,23)),Promise.resolve().then(c.t.bind(c,7173,23)),Promise.resolve().then(c.bind(c,5587))},7793:()=>{},8044:(a,b,c)=>{"use strict";c.d(b,{A:()=>l});var d=c(687),e=c(3210),f=c(6189),g=c(2643),h=c(9776),i=c(1170);let j=[{value:"contains",label:"Contains"},{value:"not-contains",label:"Does not contain"},{value:"equals",label:"Equals"},{value:"not-equals",label:"Does not equal"},{value:"regex",label:"Matches regex"},{value:"length",label:"Length"}];function k({promptCardId:a,testCases:b,variables:c,onTestCasesChange:f}){let[k,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)(null),[o,p]=(0,e.useState)(null),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)({name:"",input_variables:{},expected_output:"",assertions:[]}),u=async()=>{if(!s.name.trim())return void n("Test case name is required");let d=c.filter(a=>!s.input_variables[a]?.trim());if(d.length>0)return void n(`Please provide values for: ${d.join(", ")}`);try{l(!0),n(null);let c={prompt_card_id:a,name:s.name,input_variables:s.input_variables,expected_output:s.expected_output||void 0,assertions:s.assertions},d=await fetch("/api/test-cases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),e=await d.json();e.success?(f([...b,e.data]),r(!1),t({name:"",input_variables:{},expected_output:"",assertions:[]})):n(e.error||"Failed to save test case")}catch(a){n("Network error: Failed to save test case")}finally{l(!1)}},v=async a=>{if(confirm("Are you sure you want to delete this test case?"))try{l(!0);let c=await fetch(`/api/test-cases/${a}`,{method:"DELETE"}),d=await c.json();d.success?f(b.filter(b=>b.id!==a)):n(d.error||"Failed to delete test case")}catch(a){n("Network error: Failed to delete test case")}finally{l(!1)}},w=(a,b,c)=>{t(d=>({...d,assertions:d.assertions.map((d,e)=>e===a?{...d,[b]:c}:d)}))},x=(a,b=!1)=>(0,d.jsx)("div",{className:"space-y-2",children:Object.entries(a).map(([a,c])=>(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsxs)("span",{className:"text-sm font-medium text-gray-700 w-24",children:[a,":"]}),b?(0,d.jsx)("input",{type:"text",value:s.input_variables[a]||"",onChange:b=>t(c=>({...c,input_variables:{...c.input_variables,[a]:b.target.value}})),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:`Enter value for ${a}`}):(0,d.jsx)("span",{className:"text-sm text-gray-600 bg-gray-50 px-2 py-1 rounded font-mono",children:c})]},a))});return(0,d.jsxs)("div",{className:"space-y-6",children:[m&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,d.jsx)("p",{className:"text-red-800",children:m})}),b.length>0&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-md font-medium text-gray-900",children:"Existing Test Cases"}),b.map(a=>(0,d.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,d.jsx)("h4",{className:"font-medium text-gray-900",children:a.name}),(0,d.jsx)(g.$,{variant:"outline",size:"sm",onClick:()=>v(a.id),disabled:k,className:"text-red-600 border-red-200 hover:bg-red-50",children:"Delete"})]}),(0,d.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Input Variables:"}),x(a.input_variables)]}),(0,d.jsxs)("div",{children:[a.expected_output&&(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Expected Output:"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:a.expected_output})]}),a.assertions.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assertions:"}),(0,d.jsx)("div",{className:"space-y-1",children:a.assertions.map((a,b)=>(0,d.jsxs)(i.E,{variant:"outline",className:"mr-2",children:[a.type,": ",a.value]},b))})]})]})]})]},a.id))]}),q?(0,d.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 bg-gray-50",children:[(0,d.jsx)("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Add New Test Case"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Case Name *"}),(0,d.jsx)("input",{type:"text",value:s.name,onChange:a=>t(b=>({...b,name:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe what this test case validates"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Input Variables *"}),x(s.input_variables,!0)]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Output (optional)"}),(0,d.jsx)("textarea",{value:s.expected_output,onChange:a=>t(b=>({...b,expected_output:a.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe what the expected output should contain"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Assertions (optional)"}),(0,d.jsx)(g.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{t(a=>({...a,assertions:[...a.assertions,{type:"contains",value:"",description:""}]}))},children:"Add Assertion"})]}),s.assertions.map((a,b)=>(0,d.jsx)("div",{className:"border border-gray-200 rounded p-3 mb-2 bg-white",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,d.jsx)("select",{value:a.type,onChange:a=>w(b,"type",a.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:j.map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))}),(0,d.jsx)("input",{type:"length"===a.type?"number":"text",value:a.value,onChange:c=>w(b,"value","length"===a.type?Number(c.target.value):c.target.value),placeholder:"Assertion value",className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,d.jsxs)("div",{className:"flex space-x-1",children:[(0,d.jsx)("input",{type:"text",value:a.description||"",onChange:a=>w(b,"description",a.target.value),placeholder:"Description (optional)",className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm"}),(0,d.jsx)(g.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{t(a=>({...a,assertions:a.assertions.filter((a,c)=>c!==b)}))},children:"\xd7"})]})]})},b))]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[(0,d.jsx)(g.$,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:k,children:"Cancel"}),(0,d.jsx)(g.$,{type:"button",onClick:u,disabled:k,children:k?(0,d.jsx)(h.k,{size:"sm"}):"Save Test Case"})]})]})]}):(0,d.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,d.jsx)("p",{className:"text-gray-500 mb-4",children:0===b.length?"No test cases yet.":"Add more test cases to validate your prompt."}),(0,d.jsx)(g.$,{onClick:()=>{let a={};c.forEach(b=>{a[b]=""}),t({name:"",input_variables:a,expected_output:"",assertions:[]}),r(!0)},disabled:0===c.length,children:"Add Test Case"}),0===c.length&&(0,d.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Add variables to your prompt template first"})]})]})}function l({cardId:a,initialData:b}){let c=(0,f.useRouter)(),[i,j]=(0,e.useState)(!1),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)({title:"",description:"",prompt_template:"",variables:[]}),[p,q]=(0,e.useState)([]),r=async b=>{if(b.preventDefault(),!n.title.trim()||!n.prompt_template.trim())return void m("Title and prompt template are required");try{j(!0),m(null);let b=a?`/api/prompt-cards/${a}`:"/api/prompt-cards",d=a?"PUT":"POST",e=await fetch(b,{method:d,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),f=await e.json();f.success?c.push("/prompt-cards"):m(f.error||"Failed to save prompt card")}catch(a){m("Network error: Failed to save prompt card")}finally{j(!1)}};return i&&!n.title?(0,d.jsx)("div",{className:"flex justify-center items-center min-h-64",children:(0,d.jsx)(h.k,{})}):(0,d.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:a?"Edit Prompt Card":"Create New Prompt Card"}),(0,d.jsx)("p",{className:"text-gray-600 mt-2",children:a?"Update your prompt template and test cases":"Create a new prompt template with test cases"})]}),l&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:(0,d.jsx)("p",{className:"text-red-800",children:l})}),(0,d.jsxs)("form",{onSubmit:r,className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,d.jsx)("input",{type:"text",id:"title",value:n.title,onChange:a=>o(b=>({...b,title:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a descriptive title for your prompt",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,d.jsx)("textarea",{id:"description",value:n.description,onChange:a=>o(b=>({...b,description:a.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe what this prompt does and when to use it"})]})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Prompt Template"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"template",className:"block text-sm font-medium text-gray-700 mb-1",children:"Template *"}),(0,d.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:["Use ",(0,d.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"{{variable_name}}"})," for variables that will be replaced during testing."]}),(0,d.jsx)("textarea",{id:"template",value:n.prompt_template,onChange:a=>(a=>{let b=[...new Set((a.match(/\{\{(\w+)\}\}/g)||[]).map(a=>a.replace(/\{\{|\}\}/g,"")))];o(c=>({...c,prompt_template:a,variables:b}))})(a.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Enter your prompt template here. Use {{variable_name}} for dynamic content.",required:!0})]}),n.variables.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Detected Variables:"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:n.variables.map(a=>(0,d.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:a},a))})]})]})]}),a&&(0,d.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Cases"}),(0,d.jsx)(k,{promptCardId:a,testCases:p,variables:n.variables,onTestCasesChange:q})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:[a&&p.length>0&&(0,d.jsxs)(g.$,{type:"button",variant:"outline",onClick:()=>c.push(`/prompt-cards/${a}/test`),disabled:i,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:["Run Tests (",p.length,")"]}),(0,d.jsxs)("div",{className:"flex space-x-4 ml-auto",children:[(0,d.jsx)(g.$,{type:"button",variant:"outline",onClick:()=>{c.push("/prompt-cards")},disabled:i,children:"Cancel"}),(0,d.jsx)(g.$,{type:"submit",disabled:i,className:"min-w-24",children:i?(0,d.jsx)(h.k,{size:"sm"}):a?"Update Card":"Create Card"})]})]})]}),!a&&(0,d.jsx)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,d.jsxs)("p",{className:"text-blue-800 text-sm",children:[(0,d.jsx)("strong",{children:"Tip:"})," After creating the prompt card, you'll be able to add test cases to validate your prompt's behavior."]})})]})}},8289:()=>{},9776:(a,b,c)=>{"use strict";c.d(b,{k:()=>e});var d=c(687);function e({size:a="md",className:b=""}){return(0,d.jsx)("div",{className:`animate-spin rounded-full border-b-2 border-primary-600 ${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[a]} ${b}`,children:(0,d.jsx)("span",{className:"sr-only",children:"Loading..."})})}c(3210)}};