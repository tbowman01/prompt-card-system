"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{8924:function(e,t,s){s.d(t,{Z:function(){return n}});var a=s(7437),r=s(2265),l=s(8711),i=s(6334);function n(e){let{execution:t,onClear:s}=e,[n,c]=(0,r.useState)(new Set),d=e=>{c(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},o=e=>{switch(e){case"passed":return(0,a.jsx)(l.C,{variant:"success",children:"Passed"});case"failed":return(0,a.jsx)(l.C,{variant:"danger",children:"Failed"});case"error":return(0,a.jsx)(l.C,{variant:"warning",children:"Error"});default:return(0,a.jsx)(l.C,{variant:"default",children:e})}},m=e=>e?(0,a.jsx)(l.C,{variant:"success",size:"sm",children:"✓"}):(0,a.jsx)(l.C,{variant:"danger",size:"sm",children:"✗"}),x=e=>e<1e3?"".concat(e,"ms"):"".concat((e/1e3).toFixed(2),"s");return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Results"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Executed at ",new Date(t.created_at).toLocaleString()]})]}),s&&(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:s,children:"Clear Results"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t.total_tests}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Total Tests"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.passed_tests}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Passed"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:t.failed_tests}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Failed"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-700",children:x(t.execution_time_ms)}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Duration"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),o(t.status)]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Model:"}),(0,a.jsx)(l.C,{variant:"outline",children:t.model_used})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Execution ID:"}),(0,a.jsx)("code",{className:"text-xs bg-white px-2 py-1 rounded border",children:t.id})]})]}),t.error_message&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-red-800 mb-1",children:"Execution Error"}),(0,a.jsx)("div",{className:"text-sm text-red-700",children:t.error_message})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"text-md font-semibold text-gray-900",children:"Individual Results"}),0===t.test_results.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No test results available"}):t.test_results.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>d(e.id),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[o(e.status),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.test_case_name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:x(e.execution_time_ms)}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",children:n.has(e.id)?"Collapse":"Expand"})]})]})}),n.has(e.id)&&(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[e.error_message&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-red-800 mb-1",children:"Error"}),(0,a.jsx)("div",{className:"text-sm text-red-700",children:e.error_message})]}),e.assertion_results.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assertions"}),(0,a.jsx)("div",{className:"space-y-2",children:e.assertion_results.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-2 bg-gray-50 rounded",children:[m(e.passed),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.type,":"]}),(0,a.jsxs)("span",{className:"ml-1",children:['Expected "',e.expected,'", got "',e.actual,'"']})]}),e.description&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},t))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.expected_output&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Expected Output"}),(0,a.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:(0,a.jsx)("pre",{className:"text-sm text-green-800 whitespace-pre-wrap",children:e.expected_output})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Actual Output"}),(0,a.jsx)("div",{className:"p-3 border rounded-md ".concat("passed"===e.status?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,a.jsx)("pre",{className:"text-sm whitespace-pre-wrap ".concat("passed"===e.status?"text-green-800":"text-red-800"),children:e.actual_output})})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Test Case ID: ",e.test_case_id]}),(0,a.jsxs)("span",{children:["Model: ",e.model_used]}),(0,a.jsxs)("span",{children:["Execution Time: ",x(e.execution_time_ms)]})]})]})]},e.id))]})]})}},8335:function(e,t,s){s.d(t,{Z:function(){return d}});var a=s(7437),r=s(2265),l=s(6334),i=s(2496),n=s(8711),c=s(1837);function d(e){let{promptCardId:t,testCases:s,onTestComplete:d,onError:o}=e,[m,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)([]),[g,p]=(0,r.useState)("llama3.2"),[y,b]=(0,r.useState)(!1),[j,f]=(0,r.useState)("sequential"),N=e=>{h(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},v=async()=>{if(0===u.length&&!y){null==o||o("Please select at least one test to run");return}x(!0);try{let e=y?s.map(e=>e.id):u;if("parallel"===j){let s=await fetch("/api/test-cases/execute-parallel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_card_id:t,test_case_ids:e,model:g,configuration:{max_concurrent_tests:3,timeout_per_test:3e4,retry_failed_tests:!1,max_retries:1,resource_limits:{memory_mb:1024,cpu_percent:50}},priority:0})}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to start parallel execution");null==d||d({execution_id:a.data.execution_id,status:"running",mode:"parallel"})}else{let e=await c.hi.runTests({prompt_card_id:t,model:g,test_case_ids:y?void 0:u});e.execution?null==d||d(e.execution):setTimeout(async()=>{try{let t=await c.hi.getTestExecution(e.execution_id);null==d||d(t)}catch(e){null==o||o(e instanceof Error?e.message:"Failed to get test results")}},1e3)}}catch(e){null==o||o(e instanceof Error?e.message:"Failed to run tests")}finally{x(!1)}},w=async e=>{try{let t=await c.hi.runSingleTest(e,{model:g});console.log("Single test result:",t)}catch(e){null==o||o(e instanceof Error?e.message:"Failed to run test")}};return 0===s.length?(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-2",children:(0,a.jsx)("svg",{className:"mx-auto h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,a.jsx)("p",{className:"text-gray-600",children:"No test cases available to run"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Create test cases first to start testing"})]}):(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Runner"}),(0,a.jsxs)(n.C,{variant:"default",children:[s.length," test cases"]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),(0,a.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:m,children:[(0,a.jsx)("option",{value:"llama3.2",children:"Llama 3.2"}),(0,a.jsx)("option",{value:"llama3.1",children:"Llama 3.1"}),(0,a.jsx)("option",{value:"mistral",children:"Mistral"}),(0,a.jsx)("option",{value:"codellama",children:"CodeLlama"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Execution Mode"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"executionMode",value:"sequential",checked:"sequential"===j,onChange:e=>f(e.target.value),disabled:m,className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:"Sequential"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"executionMode",value:"parallel",checked:"parallel"===j,onChange:e=>f(e.target.value),disabled:m,className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:"Parallel"}),(0,a.jsx)("span",{className:"ml-1 text-xs text-blue-600",children:"⚡ Faster"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"sequential"===j?"Run tests one at a time (traditional mode)":"Run multiple tests simultaneously with real-time progress tracking"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Select Tests to Run"}),(0,a.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>{y?h([]):h(s.map(e=>e.id)),b(!y)},disabled:m,children:y?"Deselect All":"Select All"})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"test-".concat(e.id),checked:y||u.includes(e.id),onChange:()=>N(e.id),disabled:m,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"test-".concat(e.id),className:"text-sm text-gray-900 cursor-pointer",children:e.name})]}),(0,a.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>w(e.id),disabled:m,className:"text-xs",children:"Run Solo"})]},e.id))})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(l.z,{onClick:v,disabled:m||0===u.length&&!y,loading:m,className:"px-6",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.T,{size:"sm",className:"mr-2"}),"parallel"===j?"Starting Parallel Tests...":"Running Tests..."]}):(0,a.jsxs)(a.Fragment,{children:["parallel"===j?"⚡ ":"","Run ",y?"All":u.length," Test",(y?s.length:u.length)!==1?"s":"","parallel"===j?" (Parallel)":""]})})})]})}},8711:function(e,t,s){s.d(t,{C:function(){return r}});var a=s(7437);function r(e){let{children:t,variant:s="default",size:r="md"}=e;return(0,a.jsx)("span",{className:"".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 bg-white text-gray-700"}[s]," ").concat({sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"}[r]),children:t})}s(2265)},6334:function(e,t,s){s.d(t,{z:function(){return r}});var a=s(7437);function r(e){let{variant:t="primary",size:s="md",loading:r=!1,children:l,className:i="",disabled:n,...c}=e;return(0,a.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[s]," ").concat(i),disabled:n||r,...c,children:[r&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})}s(2265)},2496:function(e,t,s){s.d(t,{T:function(){return r}});var a=s(7437);function r(e){let{size:t="md",className:s=""}=e;return(0,a.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-primary-600 ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t]," ").concat(s),children:(0,a.jsx)("span",{className:"sr-only",children:"Loading..."})})}s(2265)},1837:function(e,t,s){s.d(t,{hi:function(){return i}});let a="http://localhost:3001";class r extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(a).concat(e),l={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(s,l),t=await e.json();if(!e.ok)throw new r(e.status,t.error||"Request failed");if(!t.success)throw Error(t.error||"API request failed");return t.data}catch(e){if(e instanceof r)throw e;throw Error("Network error: "+e.message)}}let i={getPromptCards:e=>{let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let s=t.toString();return l("/prompt-cards".concat(s?"?".concat(s):""))},getPromptCard:e=>l("/prompt-cards/".concat(e)),createPromptCard:e=>l("/prompt-cards",{method:"POST",body:JSON.stringify(e)}),updatePromptCard:(e,t)=>l("/prompt-cards/".concat(e),{method:"PUT",body:JSON.stringify(t)}),deletePromptCard:e=>l("/prompt-cards/".concat(e),{method:"DELETE"}),getTestCases:e=>l("/test-cases/prompt-cards/".concat(e,"/test-cases")),createTestCase:e=>l("/test-cases",{method:"POST",body:JSON.stringify(e)}),updateTestCase:(e,t)=>l("/test-cases/".concat(e),{method:"PUT",body:JSON.stringify(t)}),deleteTestCase:e=>l("/test-cases/".concat(e),{method:"DELETE"}),importYAML:e=>l("/yaml/import",{method:"POST",body:JSON.stringify({yamlContent:e})}),validateYAML:e=>l("/yaml/validate",{method:"POST",body:JSON.stringify({yamlContent:e})}),exportYAML:e=>fetch("".concat(a).concat(e?"/yaml/export/".concat(e):"/yaml/export")),getHealth:()=>l("/health"),runTests:e=>l("/test-execution/run",{method:"POST",body:JSON.stringify(e)}),getTestExecution:e=>l("/test-execution/".concat(e)),getTestExecutionResults:e=>l("/test-execution/".concat(e,"/results")),runSingleTest:(e,t)=>l("/test-execution/test-case/".concat(e,"/run"),{method:"POST",body:JSON.stringify(t||{})}),getDashboardMetrics:()=>l("/analytics/dashboard"),getRealtimeMetrics:()=>l("/analytics/realtime"),getHistoricalMetrics:()=>l("/analytics/historical"),getTrends:(e,t)=>{let s=new URLSearchParams;e&&s.set("period",e),t&&s.set("limit",t.toString());let a=s.toString();return l("/analytics/trends".concat(a?"?".concat(a):""))},getInsights:()=>l("/analytics/insights"),recordTestExecution:e=>l("/analytics/events/test-execution",{method:"POST",body:JSON.stringify(e)}),recordBatchExecution:e=>l("/analytics/events/batch-execution",{method:"POST",body:JSON.stringify(e)}),recordModelUsage:(e,t)=>l("/analytics/events/model-usage",{method:"POST",body:JSON.stringify({model:e,usage:t})}),recordSystemMetrics:e=>l("/analytics/events/system-metrics",{method:"POST",body:JSON.stringify({metrics:e})})}}}]);