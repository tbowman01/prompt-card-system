(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{2814:(e,s,t)=>{"use strict";t.d(s,{E:()=>a});var r=t(5155);function a(e){let{children:s,variant:t="default",size:a="md"}=e;return(0,r.jsx)("span",{className:"".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 bg-white text-gray-700"}[t]," ").concat({sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"}[a]),children:s})}t(2115)},3465:(e,s,t)=>{Promise.resolve().then(t.bind(t,5632))},3741:(e,s,t)=>{"use strict";t.d(s,{$:()=>a});var r=t(5155);function a(e){let{variant:s="primary",size:t="md",loading:a=!1,children:i,className:l="",disabled:n,...c}=e;return(0,r.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t]," ").concat(l),disabled:n||a,...c,children:[a&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i]})}t(2115)},4338:(e,s,t)=>{"use strict";t.d(s,{k:()=>a});var r=t(5155);function a(e){let{size:s="md",className:t=""}=e;return(0,r.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-primary-600 ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[s]," ").concat(t),children:(0,r.jsx)("span",{className:"sr-only",children:"Loading..."})})}t(2115)},5632:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(5155),a=t(2115),i=t(5731),l=t(2814),n=t(4338);let c=e=>{let{title:s,value:t,subtext:a,trend:i,severity:l="info"}=e;return(0,r.jsx)("div",{className:"p-4 rounded-lg border-2 ".concat((()=>{switch(l){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"error":return"bg-red-50 border-red-200";default:return"bg-blue-50 border-blue-200"}})()),children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:s}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t}),a&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:a})]}),i&&(0,r.jsx)("span",{className:"text-lg text-gray-400",children:(()=>{switch(i){case"up":return"↗";case"down":return"↘";case"stable":return"→";default:return""}})()})]})})},o=()=>{let[e,s]=(0,a.useState)(null),[t,o]=(0,a.useState)(!0),[d,m]=(0,a.useState)(null);if((0,a.useEffect)(()=>{let e=async()=>{try{o(!0),m(null);let e=await i.FH.getDashboardMetrics();s(e)}catch(e){console.error("Error fetching metrics:",e),m("Failed to load metrics")}finally{o(!1)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]),t)return(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(n.k,{size:"lg"})});if(d)return(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:d})});if(!e)return(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-gray-600",children:"No metrics available"})});let x=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),u=e=>"".concat((100*e).toFixed(1),"%"),g=e=>e>=1e3?"".concat((e/1e3).toFixed(1),"s"):"".concat(e.toFixed(0),"ms");return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Real-time Metrics"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,r.jsx)(c,{title:"Active Tests",value:e.realtime.activeTests,severity:e.realtime.activeTests>0?"info":"success"}),(0,r.jsx)(c,{title:"Tests/Second",value:e.realtime.testsPerSecond.toFixed(1),severity:e.realtime.testsPerSecond>0?"success":"info"}),(0,r.jsx)(c,{title:"Success Rate",value:u(e.realtime.successRate),severity:e.realtime.successRate>=.9?"success":e.realtime.successRate>=.7?"warning":"error"}),(0,r.jsx)(c,{title:"Avg Response Time",value:g(e.realtime.averageResponseTime),severity:e.realtime.averageResponseTime<=1e3?"success":e.realtime.averageResponseTime<=5e3?"warning":"error"}),(0,r.jsx)(c,{title:"Error Rate",value:u(e.realtime.errorRate),severity:e.realtime.errorRate<=.1?"success":e.realtime.errorRate<=.3?"warning":"error"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Historical Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(c,{title:"Total Tests",value:x(e.historical.totalTests),subtext:"All time"}),(0,r.jsx)(c,{title:"Total Executions",value:x(e.historical.totalExecutions),subtext:"Unique test runs"}),(0,r.jsx)(c,{title:"Overall Success Rate",value:u(e.historical.overallSuccessRate),subtext:"Historical average",severity:e.historical.overallSuccessRate>=.9?"success":e.historical.overallSuccessRate>=.7?"warning":"error"}),(0,r.jsx)(c,{title:"Avg Execution Time",value:g(e.historical.averageExecutionTime),subtext:"Per test"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Most Used Models"}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.historical.mostUsedModels.slice(0,6).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(l.E,{variant:"secondary",children:["#",s+1]}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.model})]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[x(e.count)," tests"]})]},e.model))})})]}),e.insights.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Insights"}),(0,r.jsx)("div",{className:"space-y-3",children:e.insights.map(e=>(0,r.jsx)("div",{className:"p-4 rounded-lg border-l-4 ".concat("critical"===e.severity?"bg-red-50 border-red-500":"high"===e.severity?"bg-orange-50 border-orange-500":"medium"===e.severity?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"),children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsx)(l.E,{variant:"critical"===e.severity?"destructive":"secondary",children:e.severity})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.recommendations&&e.recommendations.length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-700",children:"Recommendations:"}),(0,r.jsx)("ul",{className:"text-xs text-gray-600 mt-1 space-y-1",children:e.recommendations.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"w-1 h-1 bg-gray-400 rounded-full mr-2"}),e]},s))})]})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]})},e.id))})]})]})};var d=t(3741);let m=e=>{let{height:s=400}=e,[t,l]=(0,a.useState)(null),[c,o]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),[u,g]=(0,a.useState)("day"),[h,p]=(0,a.useState)("tests"),b={tests:(0,a.useRef)(null),success:(0,a.useRef)(null),performance:(0,a.useRef)(null)};(0,a.useEffect)(()=>{(async()=>{try{o(!0),x(null);let e=await i.FH.getTrends(u,30);l({...t,trends:e})}catch(e){console.error("Error fetching trends:",e),x("Failed to load chart data")}finally{o(!1)}})()},[u]);let j=e=>{let r,a;if(!(null==t?void 0:t.trends)||!b[e].current)return;let i=b[e].current;switch(e){case"tests":r={labels:t.trends.testsOverTime.map(e=>new Date(e.timestamp).toLocaleDateString()),datasets:[{label:"Tests Count",data:t.trends.testsOverTime.map(e=>e.count),borderColor:"#3b82f6",backgroundColor:"#3b82f6"}]},a="Tests Over Time";break;case"success":r={labels:t.trends.successRateOverTime.map(e=>new Date(e.timestamp).toLocaleDateString()),datasets:[{label:"Success Rate",data:t.trends.successRateOverTime.map(e=>100*e.rate),borderColor:"#10b981",backgroundColor:"#10b981"}]},a="Success Rate Over Time (%)";break;case"performance":r={labels:t.trends.performanceOverTime.map(e=>new Date(e.timestamp).toLocaleDateString()),datasets:[{label:"Avg Response Time",data:t.trends.performanceOverTime.map(e=>e.avgTime),borderColor:"#f59e0b",backgroundColor:"#f59e0b"}]},a="Average Response Time (ms)"}((e,t,r)=>{let a=e.getContext("2d");if(!a)return;a.clearRect(0,0,e.width,e.height),e.width=e.offsetWidth,e.height=s;let i=e.width-120,l=e.height-120,n=t.datasets.flatMap(e=>e.data),c=Math.min(...n),o=Math.max(...n),d=o-c||1;a.strokeStyle="#e5e7eb",a.lineWidth=1;for(let e=0;e<=5;e++){let s=60+l/5*e;a.beginPath(),a.moveTo(60,s),a.lineTo(60+i,s),a.stroke()}let m=i/(t.labels.length-1||1);for(let e=0;e<t.labels.length;e++){let s=60+m*e;a.beginPath(),a.moveTo(s,60),a.lineTo(s,60+l),a.stroke()}t.datasets.forEach((e,s)=>{a.strokeStyle=e.borderColor,a.lineWidth=2,a.beginPath(),e.data.forEach((e,s)=>{let t=60+m*s,r=60+l-(e-c)/d*l;0===s?a.moveTo(t,r):a.lineTo(t,r)}),a.stroke(),a.fillStyle=e.borderColor,e.data.forEach((e,s)=>{a.beginPath(),a.arc(60+m*s,60+l-(e-c)/d*l,4,0,2*Math.PI),a.fill()})}),a.fillStyle="#1f2937",a.font="16px Inter, sans-serif",a.textAlign="center",a.fillText(r,e.width/2,30),a.font="12px Inter, sans-serif",a.textAlign="right";for(let e=0;e<=5;e++){let s=60+l/5*e,t=o-d/5*e;a.fillText(t.toFixed(1),50,s+4)}a.textAlign="center",t.labels.forEach((s,t)=>{a.fillText(s,60+m*t,e.height-20)})})(i,r,a)};return((0,a.useEffect)(()=>{(null==t?void 0:t.trends)&&(j("tests"),j("success"),j("performance"))},[null==t?void 0:t.trends]),(0,a.useEffect)(()=>{let e=()=>{(null==t?void 0:t.trends)&&setTimeout(()=>{j("tests"),j("success"),j("performance")},100)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[null==t?void 0:t.trends]),c)?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(n.k,{size:"lg"})}):m?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:m})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(d.$,{variant:"hour"===u?"default":"outline",size:"sm",onClick:()=>g("hour"),children:"Hourly"}),(0,r.jsx)(d.$,{variant:"day"===u?"default":"outline",size:"sm",onClick:()=>g("day"),children:"Daily"}),(0,r.jsx)(d.$,{variant:"week"===u?"default":"outline",size:"sm",onClick:()=>g("week"),children:"Weekly"}),(0,r.jsx)(d.$,{variant:"month"===u?"default":"outline",size:"sm",onClick:()=>g("month"),children:"Monthly"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(d.$,{variant:"tests"===h?"default":"outline",size:"sm",onClick:()=>p("tests"),children:"Tests"}),(0,r.jsx)(d.$,{variant:"success"===h?"default":"outline",size:"sm",onClick:()=>p("success"),children:"Success Rate"}),(0,r.jsx)(d.$,{variant:"performance"===h?"default":"outline",size:"sm",onClick:()=>p("performance"),children:"Performance"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsx)("canvas",{ref:b[h],className:"w-full",style:{height:"".concat(s,"px")}})}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Object.entries(b).map(e=>{let[t,a]=e;return t===h?null:(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsx)("canvas",{ref:a,className:"w-full cursor-pointer",style:{height:"".concat(s/2,"px")},onClick:()=>p(t)})},t)})})]}),(0,r.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-6 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),(0,r.jsx)("span",{children:"Tests Volume"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),(0,r.jsx)("span",{children:"Success Rate"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),(0,r.jsx)("span",{children:"Response Time"})]})]})})]})},x=e=>{let{timeframe:s="24h"}=e,[t,i]=(0,a.useState)(null),[c,o]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),[u,g]=(0,a.useState)(s);if((0,a.useEffect)(()=>{(async()=>{try{o(!0),x(null);let e={totalCost:24.67,costByModel:{"llama3.1:8b":12.34,"llama3.1:70b":8.45,"mistral:7b":2.89,"codellama:7b":.99},costOverTime:Array.from({length:30},(e,s)=>({timestamp:new Date(Date.now()-(29-s)*864e5),cost:5*Math.random()+.5})),tokenUsage:{totalTokens:1234567,promptTokens:567890,completionTokens:666677}};i(e)}catch(e){console.error("Error fetching cost data:",e),x("Failed to load cost data")}finally{o(!1)}})()},[u]),c)return(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(n.k,{size:"lg"})});if(m)return(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:m})});if(!t)return(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-gray-600",children:"No cost data available"})});let h=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),p=e=>new Intl.NumberFormat("en-US").format(e);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex gap-2",children:["24h","7d","30d","90d"].map(e=>(0,r.jsx)(d.$,{variant:u===e?"primary":"outline",size:"sm",onClick:()=>g(e),children:e},e))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Cost"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:h(t.totalCost)})]}),(0,r.jsx)("div",{className:"text-green-600",children:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Tokens"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p(t.tokenUsage.totalTokens)})]}),(0,r.jsx)("div",{className:"text-blue-600",children:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Prompt Tokens"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p(t.tokenUsage.promptTokens)})]}),(0,r.jsx)("div",{className:"text-purple-600",children:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completion Tokens"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p(t.tokenUsage.completionTokens)})]}),(0,r.jsx)("div",{className:"text-yellow-600",children:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost by Model"}),(0,r.jsx)("div",{className:"space-y-4",children:Object.entries(t.costByModel).sort((e,s)=>{let[,t]=e,[,r]=s;return r-t}).map((e,s)=>{let[a,i]=e,n=i/t.totalCost*100;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full ".concat((e=>{let s=["bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-red-500","bg-indigo-500","bg-pink-500","bg-gray-500"];return s[e%s.length]})(s))}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:a}),(0,r.jsxs)(l.E,{variant:"secondary",children:[n.toFixed(1),"%"]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:h(i)})})]},a)})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost Over Time"}),(0,r.jsx)("div",{className:"h-64 flex items-end space-x-1",children:t.costOverTime.map((e,s)=>{let a=Math.max(...t.costOverTime.map(e=>e.cost)),i=e.cost/a*100;return(0,r.jsx)("div",{className:"flex-1 bg-blue-500 rounded-t-sm relative group",style:{height:"".concat(i,"%")},children:(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity",children:h(e.cost)})},s)})}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between text-sm text-gray-500",children:[(0,r.jsxs)("span",{children:[t.costOverTime.length," days ago"]}),(0,r.jsx)("span",{children:"Today"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost Analysis"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Most Expensive Model"}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[(0,r.jsx)("span",{className:"text-red-800",children:Object.entries(t.costByModel).sort((e,s)=>{let[,t]=e,[,r]=s;return r-t})[0][0]}),(0,r.jsx)("span",{className:"font-semibold text-red-900",children:h(Math.max(...Object.values(t.costByModel)))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Most Efficient Model"}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,r.jsx)("span",{className:"text-green-800",children:Object.entries(t.costByModel).sort((e,s)=>{let[,t]=e,[,r]=s;return t-r})[0][0]}),(0,r.jsx)("span",{className:"font-semibold text-green-900",children:h(Math.min(...Object.values(t.costByModel)))})]})]})]}),(0,r.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"Cost Optimization Tips"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,r.jsx)("li",{children:"• Consider using smaller models for simple tasks"}),(0,r.jsx)("li",{children:"• Implement caching for frequently used prompts"}),(0,r.jsx)("li",{children:"• Monitor token usage to identify inefficient prompts"}),(0,r.jsx)("li",{children:"• Use batch processing for multiple similar requests"})]})]})]})]})};var u=t(8374);let g=e=>{let{refreshInterval:s=5e3,maxEvents:t=50}=e,[c,o]=(0,a.useState)(null),[m,x]=(0,a.useState)([]),[g,h]=(0,a.useState)(!0),[p,b]=(0,a.useState)(null),[j,v]=(0,a.useState)(!1),[y,f]=(0,a.useState)(!1),{socket:N,isConnected:w,connect:T,disconnect:S}=(0,u.h)();return((0,a.useEffect)(()=>(N&&(N.on("analytics-update",e=>{y||o(e.realtime)}),N.on("test-execution-event",e=>{if(!y){let s={id:Date.now().toString(),type:"test_execution",timestamp:new Date(e.timestamp),message:"Test ".concat(e.passed?"passed":"failed"," for ").concat(e.model),data:e,severity:e.passed?"success":"error"};x(e=>[s,...e.slice(0,t-1)])}}),N.on("batch-execution-event",e=>{if(!y){let s={id:Date.now().toString(),type:"batch_execution",timestamp:new Date(e.timestamp),message:"Batch execution: ".concat(e.passed_tests,"/").concat(e.total_tests," tests passed"),data:e,severity:e.passed_tests/e.total_tests>.8?"success":"warning"};x(e=>[s,...e.slice(0,t-1)])}}),N.on("system-alert",e=>{if(!y){let s={id:Date.now().toString(),type:"system_alert",timestamp:new Date(e.timestamp),message:e.message,data:e,severity:e.severity};x(e=>[s,...e.slice(0,t-1)])}}),v(!0)),()=>{N&&(N.off("analytics-update"),N.off("test-execution-event"),N.off("batch-execution-event"),N.off("system-alert"))}),[N,y,t]),(0,a.useEffect)(()=>{let e,t=async()=>{try{h(!0),b(null);let e=await i.FH.getRealtimeMetrics();o(e)}catch(e){console.error("Error fetching real-time metrics:",e),b("Failed to load real-time metrics")}finally{h(!1)}};return t(),w||y||(e=setInterval(t,s)),()=>{e&&clearInterval(e)}},[w,y,s]),g)?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(n.k,{size:"lg"})}):p?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:p})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(w?"bg-green-500":"bg-red-500")}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:w?"Connected":"Disconnected"})]}),(0,r.jsx)(l.E,{variant:y?"secondary":"default",children:y?"Paused":"Live"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>{f(!y)},children:y?"▶️ Resume":"⏸️ Pause"}),(0,r.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>{x([])},children:"\uD83E\uDDF9 Clear"}),!w&&(0,r.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>{S(),setTimeout(()=>T(),1e3)},children:"\uD83D\uDD04 Reconnect"})]})]}),c&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Tests"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.activeTests})]}),(0,r.jsx)("div",{className:"text-blue-600",children:(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(c.activeTests>0?"bg-blue-500 animate-pulse":"bg-gray-300")})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Tests/sec"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.testsPerSecond.toFixed(1)})]}),(0,r.jsx)("div",{className:"text-green-600",children:"⚡"})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(100*c.successRate).toFixed(1),"%"]})]}),(0,r.jsx)("div",{className:"text-".concat(c.successRate>=.9?"green":c.successRate>=.7?"yellow":"red","-600"),children:c.successRate>=.9?"✅":c.successRate>=.7?"⚠️":"❌"})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Response"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.averageResponseTime>=1e3?"".concat((c.averageResponseTime/1e3).toFixed(1),"s"):"".concat(c.averageResponseTime.toFixed(0),"ms")})]}),(0,r.jsx)("div",{className:"text-purple-600",children:"⏱️"})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Error Rate"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(100*c.errorRate).toFixed(1),"%"]})]}),(0,r.jsx)("div",{className:"text-".concat(c.errorRate<=.1?"green":c.errorRate<=.3?"yellow":"red","-600"),children:c.errorRate<=.1?"✅":c.errorRate<=.3?"⚠️":"\uD83D\uDEA8"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Real-time Events"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[m.length," events • ",y?"Paused":"Live updates"]})]}),(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===m.length?(0,r.jsx)("div",{className:"p-8 text-center text-gray-500",children:(0,r.jsx)("p",{children:"No events yet. Events will appear here as they occur."})}):(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:m.map(e=>(0,r.jsx)("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 text-lg",children:(e=>{switch(e){case"test_execution":return"\uD83E\uDDEA";case"batch_execution":return"\uD83D\uDCE6";case"model_usage":return"\uD83E\uDD16";case"system_alert":return"⚠️";default:return"\uD83D\uDCCA"}})(e.type)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.message}),(0,r.jsx)(l.E,{variant:"outline",className:(e=>{switch(e){case"success":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"error":return"bg-red-100 text-red-800 border-red-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}})(e.severity),children:e.severity})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.timestamp.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})," • ",e.type.replace("_"," ")]})]})]})},e.id))})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Status"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Backend API"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Operational"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(w?"bg-green-500":"bg-red-500")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"WebSocket"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:w?"Connected":"Disconnected"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Analytics Engine"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Running"})]})]})]})]})]})},h=[{id:"overview",name:"Overview",icon:"\uD83D\uDCCA",description:"Key metrics and system insights"},{id:"performance",name:"Performance",icon:"⚡",description:"Charts and trends analysis"},{id:"costs",name:"Costs",icon:"\uD83D\uDCB0",description:"Cost tracking and optimization"},{id:"realtime",name:"Real-time",icon:"\uD83D\uDD34",description:"Live monitoring and events"}];function p(){var e;let[s,t]=(0,a.useState)("overview");return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitor test execution performance, costs, and system insights"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"System Operational"})]}),(0,r.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"\uD83D\uDD04 Refresh"})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsx)("nav",{className:"flex space-x-0","aria-label":"Tabs",children:h.map(e=>(0,r.jsxs)("button",{onClick:()=>t(e.id),className:"\n                  flex items-center space-x-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors\n                  ".concat(s===e.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50","\n                "),children:[(0,r.jsx)("span",{className:"text-lg",children:e.icon}),(0,r.jsx)("span",{children:e.name})]},e.id))})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("p",{className:"text-sm text-gray-600",children:(null==(e=h.find(e=>e.id===s))?void 0:e.description)||""})}),(()=>{switch(s){case"overview":default:return(0,r.jsx)(o,{});case"performance":return(0,r.jsx)(m,{});case"costs":return(0,r.jsx)(x,{});case"realtime":return(0,r.jsx)(g,{})}})()]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)(d.$,{variant:"outline",className:"justify-start",onClick:()=>window.open("/prompt-cards","_blank"),children:[(0,r.jsx)("span",{className:"mr-2",children:"\uD83E\uDDEA"}),"Run Tests"]}),(0,r.jsxs)(d.$,{variant:"outline",className:"justify-start",onClick:()=>{let e=new Blob([JSON.stringify({exported_at:new Date().toISOString(),tab:s,note:"Analytics data export"},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="analytics-".concat(s,"-").concat(new Date().toISOString().split("T")[0],".json"),r.click(),URL.revokeObjectURL(t)},children:[(0,r.jsx)("span",{className:"mr-2",children:"\uD83D\uDCE5"}),"Export Data"]}),(0,r.jsxs)(d.$,{variant:"outline",className:"justify-start",onClick:()=>window.open("/prompt-cards/new","_blank"),children:[(0,r.jsx)("span",{className:"mr-2",children:"➕"}),"New Test"]}),(0,r.jsxs)(d.$,{variant:"outline",className:"justify-start",onClick:()=>t("realtime"),children:[(0,r.jsx)("span",{className:"mr-2",children:"\uD83D\uDC41️"}),"Monitor Live"]})]})]}),(0,r.jsx)("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{children:"Analytics Engine: Active"}),(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:["Last Updated: ",new Date().toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{children:"Data Retention: 90 days"}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:"Refresh Rate: 30s"})]})]})})]})}},5731:(e,s,t)=>{"use strict";t.d(s,{FH:()=>l});let r="http://localhost:3001";class a extends Error{constructor(e,s){super(s),this.status=e,this.name="ApiError"}}async function i(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(r).concat(e),i={headers:{"Content-Type":"application/json",...s.headers},...s};try{let e=await fetch(t,i),s=await e.json();if(!e.ok)throw new a(e.status,s.error||"Request failed");if(!s.success)throw Error(s.error||"API request failed");return s.data}catch(e){if(e instanceof a)throw e;throw Error("Network error: "+e.message)}}let l={getPromptCards:e=>{let s=new URLSearchParams;(null==e?void 0:e.page)&&s.set("page",e.page.toString()),(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&s.set("search",e.search);let t=s.toString();return i("/prompt-cards".concat(t?"?".concat(t):""))},getPromptCard:e=>i("/prompt-cards/".concat(e)),createPromptCard:e=>i("/prompt-cards",{method:"POST",body:JSON.stringify(e)}),updatePromptCard:(e,s)=>i("/prompt-cards/".concat(e),{method:"PUT",body:JSON.stringify(s)}),deletePromptCard:e=>i("/prompt-cards/".concat(e),{method:"DELETE"}),getTestCases:e=>i("/test-cases/prompt-cards/".concat(e,"/test-cases")),createTestCase:e=>i("/test-cases",{method:"POST",body:JSON.stringify(e)}),updateTestCase:(e,s)=>i("/test-cases/".concat(e),{method:"PUT",body:JSON.stringify(s)}),deleteTestCase:e=>i("/test-cases/".concat(e),{method:"DELETE"}),importYAML:e=>i("/yaml/import",{method:"POST",body:JSON.stringify({yamlContent:e})}),validateYAML:e=>i("/yaml/validate",{method:"POST",body:JSON.stringify({yamlContent:e})}),exportYAML:e=>fetch("".concat(r).concat(e?"/yaml/export/".concat(e):"/yaml/export")),getHealth:()=>i("/health"),runTests:e=>i("/test-execution/run",{method:"POST",body:JSON.stringify(e)}),getTestExecution:e=>i("/test-execution/".concat(e)),getTestExecutionResults:e=>i("/test-execution/".concat(e,"/results")),runSingleTest:(e,s)=>i("/test-execution/test-case/".concat(e,"/run"),{method:"POST",body:JSON.stringify(s||{})}),getDashboardMetrics:()=>i("/analytics/dashboard"),getRealtimeMetrics:()=>i("/analytics/realtime"),getHistoricalMetrics:()=>i("/analytics/historical"),getTrends:(e,s)=>{let t=new URLSearchParams;e&&t.set("period",e),s&&t.set("limit",s.toString());let r=t.toString();return i("/analytics/trends".concat(r?"?".concat(r):""))},getInsights:()=>i("/analytics/insights"),recordTestExecution:e=>i("/analytics/events/test-execution",{method:"POST",body:JSON.stringify(e)}),recordBatchExecution:e=>i("/analytics/events/batch-execution",{method:"POST",body:JSON.stringify(e)}),recordModelUsage:(e,s)=>i("/analytics/events/model-usage",{method:"POST",body:JSON.stringify({model:e,usage:s})}),recordSystemMetrics:e=>i("/analytics/events/system-metrics",{method:"POST",body:JSON.stringify({metrics:e})})}},8374:(e,s,t)=>{"use strict";t.d(s,{h:()=>l});var r=t(2115),a=t(4298),i=t(1890);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.env.NEXT_PUBLIC_WEBSOCKET_URL||"http://localhost:3001",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[t,l]=(0,r.useState)(!1),n=(0,r.useRef)(null),c=(0,r.useRef)(null),{autoConnect:o=!0,reconnection:d=!0,reconnectionAttempts:m=5,reconnectionDelay:x=1e3}=s,u=()=>{n.current&&n.current.connected||(console.log("Connecting to WebSocket server:",e),n.current=(0,a.io)(e,{autoConnect:!1,reconnection:d,reconnectionAttempts:m,reconnectionDelay:x}),n.current.on("connect",()=>{console.log("WebSocket connected"),l(!0),c.current&&(clearTimeout(c.current),c.current=null)}),n.current.on("disconnect",e=>{console.log("WebSocket disconnected:",e),l(!1),"io server disconnect"===e&&d&&m>0&&(c.current=setTimeout(()=>{u()},x))}),n.current.on("connect_error",e=>{console.error("WebSocket connection error:",e),l(!1)}),n.current.on("reconnect",e=>{console.log("WebSocket reconnected after",e,"attempts"),l(!0)}),n.current.on("reconnect_error",e=>{console.error("WebSocket reconnection error:",e)}),n.current.on("reconnect_failed",()=>{console.error("WebSocket reconnection failed"),l(!1)}),n.current.connect())},g=()=>{n.current&&(console.log("Disconnecting from WebSocket server"),n.current.disconnect(),n.current=null,l(!1)),c.current&&(clearTimeout(c.current),c.current=null)};return(0,r.useEffect)(()=>(o&&u(),()=>{g()}),[o]),{socket:n.current,isConnected:t,connect:u,disconnect:g,subscribeToTest:e=>{n.current&&t&&(console.log("Subscribing to test execution:",e),n.current.emit("subscribe-test",e))},unsubscribeFromTest:e=>{n.current&&t&&(console.log("Unsubscribing from test execution:",e),n.current.emit("unsubscribe-test",e))},subscribeToProgress:()=>{n.current&&t&&(console.log("Subscribing to progress updates"),n.current.emit("subscribe-progress"))},unsubscribeFromProgress:()=>{n.current&&t&&(console.log("Unsubscribing from progress updates"),n.current.emit("unsubscribe-progress"))},cancelExecution:(e,s)=>{n.current&&t&&(console.log("Cancelling execution:",e,"reason:",s),n.current.emit("cancel-execution",{execution_id:e,reason:s,cleanup_partial_results:!0,notify_stakeholders:!0}))},getProgress:e=>{n.current&&t&&n.current.emit("get-progress",e)},getActiveExecutions:()=>{n.current&&t&&n.current.emit("get-active-executions")}}}}},e=>{e.O(0,[298,441,964,358],()=>e(e.s=3465)),_N_E=e.O()}]);