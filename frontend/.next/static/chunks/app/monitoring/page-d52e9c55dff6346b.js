(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{6641:function(e,s,t){Promise.resolve().then(t.bind(t,3196))},3196:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return en}});var a=t(7821),r=t(8078),l=t(8984),i=t(8006),n=t(1781),c=t(1753),o=t(9955),d=t(5640),m=t(6805),x=t(192),u=t(6200),h=t(2758),g=t(3338),p=t(1166);m.kL.register(m.uw,m.f$,m.od,m.jn,m.ZL,m.qi,m.Dx,m.u,m.De,m.Gu);var j=e=>{var s,t;let{data:l,config:i={},isFullscreen:c=!1}=e,[o,m]=(0,r.useState)("responseTime"),[j,f]=(0,r.useState)("15m"),[v,y]=(0,r.useState)("line"),b=(0,r.useRef)(null),N=(null==l?void 0:l.realTimeMetrics)||{responseTime:[],throughput:[],errorRate:[],cpuUsage:[],memoryUsage:[],activeConnections:[]},w={responseTime:{label:"Response Time",unit:"ms",color:"#3b82f6",icon:u.Z,threshold:{warning:1e3,critical:5e3}},throughput:{label:"Throughput",unit:"req/s",color:"#10b981",icon:h.Z,threshold:{warning:100,critical:50}},errorRate:{label:"Error Rate",unit:"%",color:"#ef4444",icon:g.Z,threshold:{warning:5,critical:10}},cpuUsage:{label:"CPU Usage",unit:"%",color:"#f59e0b",icon:u.Z,threshold:{warning:70,critical:90}},memoryUsage:{label:"Memory Usage",unit:"%",color:"#8b5cf6",icon:u.Z,threshold:{warning:80,critical:95}},activeConnections:{label:"Active Connections",unit:"",color:"#06b6d4",icon:u.Z,threshold:{warning:1e3,critical:5e3}}},C=e=>{let s=N[e];return s&&s.length>0?s[s.length-1].value:0},S=e=>{let s=N[e];if(!s||s.length<2)return"stable";let t=s[s.length-1].value,a=s[s.length-2].value;return t>1.05*a?"up":t<.95*a?"down":"stable"},k=e=>{let s=C(e),t=w[e];return s>=t.threshold.critical?"critical":s>=t.threshold.warning?"warning":"normal"},T=()=>{let e=N[o];if(!e||0===e.length)return{labels:[],datasets:[]};let s=e.map(e=>new Date(e.timestamp).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})),t=w[o];return{labels:s,datasets:[{label:t.label,data:e.map(e=>e.value),borderColor:t.color,backgroundColor:"area"===v?t.color+"20":t.color,fill:"area"===v,tension:.4,pointRadius:2,pointHoverRadius:4,borderWidth:2}]}},Z={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:w[o].color,borderWidth:1,callbacks:{label:e=>{let s=w[o];return"".concat(s.label,": ").concat(e.parsed.y).concat(s.unit)}}}},scales:{x:{display:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{maxTicksLimit:c?12:6}},y:{display:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},beginAtZero:!0,ticks:{callback:e=>{let s=w[o];return"".concat(e).concat(s.unit)}}}},animation:{duration:300}},z=(e,s)=>"%"===s?"".concat(e.toFixed(1),"%"):"ms"===s?e>=1e3?"".concat((e/1e3).toFixed(1),"s"):"".concat(e.toFixed(0),"ms"):"req/s"===s?"".concat(e.toFixed(1)," req/s"):e.toLocaleString();return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:[(0,a.jsx)("div",{className:"flex gap-1 flex-wrap",children:Object.entries(w).map(e=>{let[s,t]=e,r=k(s),l=S(s);return C(s),(0,a.jsxs)(n.z,{variant:o===s?"default":"outline",size:"sm",onClick:()=>m(s),className:"relative",children:[(0,a.jsx)(t.icon,{className:"h-3 w-3 mr-1"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:t.label}),(0,a.jsx)("span",{className:"sm:hidden",children:t.label.slice(0,3)}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full ".concat("critical"===r?"bg-red-500":"warning"===r?"bg-yellow-500":"bg-green-500")}),(0,a.jsxs)("div",{className:"ml-1",children:["up"===l&&(0,a.jsx)(h.Z,{className:"h-2 w-2 text-green-600"}),"down"===l&&(0,a.jsx)(g.Z,{className:"h-2 w-2 text-red-600"}),"stable"===l&&(0,a.jsx)(p.Z,{className:"h-2 w-2 text-gray-400"})]})]},s)})}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsxs)("select",{value:j,onChange:e=>f(e.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded",children:[(0,a.jsx)("option",{value:"5m",children:"5m"}),(0,a.jsx)("option",{value:"15m",children:"15m"}),(0,a.jsx)("option",{value:"1h",children:"1h"}),(0,a.jsx)("option",{value:"4h",children:"4h"})]}),(0,a.jsxs)("select",{value:v,onChange:e=>y(e.target.value),className:"px-2 py-1 text-xs border border-gray-300 rounded",children:[(0,a.jsx)("option",{value:"line",children:"Line"}),(0,a.jsx)("option",{value:"area",children:"Area"}),(0,a.jsx)("option",{value:"bar",children:"Bar"})]})]})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:w[o].label}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-2xl font-bold",style:{color:w[o].color},children:z(C(o),w[o].unit)}),(0,a.jsx)(x.C,{variant:"critical"===k(o)?"destructive":"warning"===k(o)?"secondary":"default",children:k(o).toUpperCase()})]})]}),(0,a.jsxs)("div",{className:"text-right text-sm text-gray-500",children:[(0,a.jsxs)("div",{children:["Last ",j]}),(0,a.jsxs)("div",{children:[(null===(s=N[o])||void 0===s?void 0:s.length)||0," data points"]})]})]})}),(0,a.jsx)("div",{className:"flex-1 min-h-0",children:(null===(t=N[o])||void 0===t?void 0:t.length)>0?(()=>{let e=T();return"bar"===v?(0,a.jsx)(d.$Q,{ref:b,data:e,options:Z}):(0,a.jsx)(d.x1,{ref:b,data:e,options:Z})})():(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(u.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No data available"}),(0,a.jsx)("p",{className:"text-xs",children:"Waiting for metrics..."})]})})}),c&&(0,a.jsx)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:Object.entries(w).map(e=>{let[s,t]=e,r=C(s),l=k(s);return(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(t.icon,{className:"h-4 w-4 text-gray-600"}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("critical"===l?"bg-red-500":"warning"===l?"bg-yellow-500":"bg-green-500")})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:t.label}),(0,a.jsx)("p",{className:"font-semibold",children:z(r,t.unit)})]})]},s)})})]})},f=t(750),v=t(981),y=t(2581),b=t(496),N=t(6946),w=t(7256),C=t(9234),S=t(9539),k=t(5867),T=t(1996);m.kL.register(m.uw,m.f$,m.ZL,m.qi,m.Dx,m.u,m.De);var Z=e=>{let{data:s,config:t={},isFullscreen:l=!1}=e,[i,c]=(0,r.useState)("overview"),o=(null==s?void 0:s.systemHealth)||{overallHealth:95,services:[],infrastructure:{cpu:45,memory:62,disk:78,network:23},alerts:[]},m=e=>{switch(e){case"healthy":return(0,a.jsx)(f.Z,{className:"h-4 w-4 text-green-500"});case"degraded":return(0,a.jsx)(v.Z,{className:"h-4 w-4 text-yellow-500"});case"unhealthy":return(0,a.jsx)(y.Z,{className:"h-4 w-4 text-red-500"});default:return(0,a.jsx)(y.Z,{className:"h-4 w-4 text-gray-500"})}},h=e=>{switch(e){case"healthy":return"bg-green-100 text-green-800";case"degraded":return"bg-yellow-100 text-yellow-800";case"unhealthy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=e=>({api:(0,a.jsx)(b.Z,{className:"h-5 w-5"}),database:(0,a.jsx)(N.Z,{className:"h-5 w-5"}),redis:(0,a.jsx)(N.Z,{className:"h-5 w-5"}),websocket:(0,a.jsx)(w.Z,{className:"h-5 w-5"}),ollama:(0,a.jsx)(C.Z,{className:"h-5 w-5"}),frontend:(0,a.jsx)(b.Z,{className:"h-5 w-5"}),backend:(0,a.jsx)(b.Z,{className:"h-5 w-5"})})[e.toLowerCase()]||(0,a.jsx)(u.Z,{className:"h-5 w-5"}),p={labels:["Healthy","Degraded","Unhealthy","Offline"],datasets:[{data:[o.services.filter(e=>"healthy"===e.status).length,o.services.filter(e=>"degraded"===e.status).length,o.services.filter(e=>"unhealthy"===e.status).length,o.services.filter(e=>"offline"===e.status).length],backgroundColor:["#10b981","#f59e0b","#ef4444","#6b7280"],borderWidth:0}]},j={labels:["CPU","Memory","Disk","Network"],datasets:[{label:"Usage %",data:[o.infrastructure.cpu,o.infrastructure.memory,o.infrastructure.disk,o.infrastructure.network],backgroundColor:["#3b82f6","#8b5cf6","#f59e0b","#06b6d4"],borderRadius:4}]},Z=e=>{let s=Math.floor(e/86400),t=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);return s>0?"".concat(s,"d ").concat(t,"h"):t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a,"m")},z=e=>e>=1e3?"".concat((e/1e3).toFixed(1),"s"):"".concat(e,"ms");return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex space-x-1 mb-4",children:[(0,a.jsx)(n.z,{variant:"overview"===i?"default":"outline",size:"sm",onClick:()=>c("overview"),children:"Overview"}),(0,a.jsx)(n.z,{variant:"services"===i?"default":"outline",size:"sm",onClick:()=>c("services"),children:"Services"}),(0,a.jsx)(n.z,{variant:"infrastructure"===i?"default":"outline",size:"sm",onClick:()=>c("infrastructure"),children:"Infrastructure"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto",children:["overview"===i&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Overall Health"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:[o.overallHealth,"%"]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[o.services.filter(e=>"healthy"===e.status).length," / ",o.services.length," services healthy"]})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 border",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Service Status Distribution"}),(0,a.jsx)("div",{className:"h-32",children:(0,a.jsx)(d.$I,{data:p,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,pointStyle:"circle"}}}}})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 border",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Infrastructure Usage"}),(0,a.jsx)("div",{className:"h-32",children:(0,a.jsx)(d.$Q,{data:j,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100}}}})})]})]}),o.alerts.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Recent Alerts"})}),(0,a.jsx)("div",{className:"divide-y",children:o.alerts.slice(0,l?10:3).map((e,s)=>(0,a.jsxs)("div",{className:"p-4 flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("error"===e.level?"bg-red-500":"warning"===e.level?"bg-yellow-500":"bg-blue-500")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),(0,a.jsx)(x.C,{variant:"error"===e.level?"destructive":"warning"===e.level?"secondary":"default",children:e.level.toUpperCase()})]},s))})]})]}),"services"===i&&(0,a.jsx)("div",{className:"space-y-3",children:o.services.map((e,s)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[g(e.name),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 capitalize",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Uptime: ",Z(e.uptime)]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[m(e.status),(0,a.jsx)(x.C,{className:h(e.status),children:e.status.toUpperCase()})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:z(e.responseTime)})]})]}),l&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(S.Z,{className:"h-3 w-3 text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-600",children:"CPU:"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.cpu,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(k.Z,{className:"h-3 w-3 text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Memory:"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.memory,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.Z,{className:"h-3 w-3 text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Errors:"}),(0,a.jsx)("span",{className:"font-medium",children:e.errors})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(T.Z,{className:"h-3 w-3 text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Last check:"}),(0,a.jsx)("span",{className:"font-medium",children:new Date(e.lastCheck).toLocaleTimeString()})]})]})]},s))}),"infrastructure"===i&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(o.infrastructure).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"rounded-lg p-4 ".concat(t>=90?"text-red-600 bg-red-50":t>=70?"text-yellow-600 bg-yellow-50":"text-green-600 bg-green-50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(()=>{switch(s){case"cpu":return(0,a.jsx)(S.Z,{className:"h-5 w-5"});case"memory":return(0,a.jsx)(k.Z,{className:"h-5 w-5"});case"disk":return(0,a.jsx)(N.Z,{className:"h-5 w-5"});case"network":return(0,a.jsx)(w.Z,{className:"h-5 w-5"});default:return(0,a.jsx)(u.Z,{className:"h-5 w-5"})}})(),(0,a.jsxs)("span",{className:"text-2xl font-bold",children:[t,"%"]})]}),(0,a.jsx)("p",{className:"text-sm font-medium mt-2 capitalize",children:s}),(0,a.jsx)("div",{className:"w-full bg-white bg-opacity-50 rounded-full h-2 mt-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-current opacity-70",style:{width:"".concat(t,"%")}})})]},s)})}),l&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Infrastructure Trends"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(d.$Q,{data:j,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>"".concat(e.dataset.label,": ").concat(e.parsed.y,"%")}}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:e=>"".concat(e,"%")}}}}})})]})]})]})]})},z=t(555),R=t(4967),D=t(9775),P=t(2942),O=t(9801),M=t(534),L=t(4242),E=t(9044),A=e=>{let{data:s,config:t={},isFullscreen:l=!1}=e,[i,c]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),[u,h]=(0,r.useState)(null),[g,p]=(0,r.useState)({severity:"all",status:"all",category:"all",search:""}),[j,b]=(0,r.useState)("timestamp"),[N,w]=(0,r.useState)("desc"),[C,S]=(0,r.useState)(!1),[k,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(null==s?void 0:s.alerts)&&c(s.alerts)},[s]),(0,r.useEffect)(()=>{let e=[...i];if("all"!==g.severity&&(e=e.filter(e=>e.severity===g.severity)),"all"!==g.status&&(e=e.filter(e=>e.status===g.status)),"all"!==g.category&&(e=e.filter(e=>e.category===g.category)),g.search){let s=g.search.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(s)||e.message.toLowerCase().includes(s)||e.source.toLowerCase().includes(s)||e.tags.some(e=>e.toLowerCase().includes(s)))}e.sort((e,s)=>{let t,a;switch(j){case"severity":let r={critical:4,high:3,medium:2,low:1};t=r[e.severity],a=r[s.severity];break;case"status":t=e.status,a=s.status;break;default:t=new Date(e.timestamp).getTime(),a=new Date(s.timestamp).getTime()}return"asc"===N?t>a?1:-1:t<a?1:-1}),m(e)},[i,g,j,N]);let A=e=>{switch(e){case"critical":return(0,a.jsx)(y.Z,{className:"h-4 w-4 text-red-500"});case"high":return(0,a.jsx)(v.Z,{className:"h-4 w-4 text-orange-500"});case"medium":return(0,a.jsx)(v.Z,{className:"h-4 w-4 text-yellow-500"});case"low":return(0,a.jsx)(z.Z,{className:"h-4 w-4 text-blue-500"});default:return(0,a.jsx)(z.Z,{className:"h-4 w-4 text-gray-500"})}},U=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},F=e=>{switch(e){case"active":return"bg-red-100 text-red-800";case"acknowledged":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},J=async(e,s)=>{try{await fetch("/api/alerts/".concat(e,"/action"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:s})}),c(t=>t.map(t=>{if(t.id===e){let e=new Date().toISOString();switch(s){case"acknowledge":return{...t,status:"acknowledged",acknowledgedBy:"Current User",acknowledgedAt:e};case"resolve":return{...t,status:"resolved",resolvedAt:e};case"mute":return{...t,status:"muted"};case"delete":return null}}return t}).filter(Boolean)),h(null)}catch(e){console.error("Error performing alert action:",e)}},I=e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/6e4);if(t<1)return"Just now";if(t<60)return"".concat(t,"m ago");let a=Math.floor(t/60);return a<24?"".concat(a,"h ago"):"".concat(Math.floor(a/24),"d ago")},W=[...new Set(i.map(e=>e.category))],H={total:i.length,active:i.filter(e=>"active"===e.status).length,critical:i.filter(e=>"critical"===e.severity).length,high:i.filter(e=>"high"===e.severity).length};return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(z.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("span",{className:"font-semibold",children:"Alerts"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(x.C,{variant:"outline",children:["Total: ",H.total]}),(0,a.jsxs)(x.C,{variant:"destructive",children:["Active: ",H.active]}),(0,a.jsxs)(x.C,{variant:"secondary",children:["Critical: ",H.critical]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>S(!C),children:[(0,a.jsx)(R.Z,{className:"h-3 w-3 mr-1"}),"Filter"]}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",children:(0,a.jsx)(D.Z,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(P.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search alerts...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm",value:g.search,onChange:e=>p(s=>({...s,search:e.target.value}))})]}),(0,a.jsxs)("select",{value:j,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"timestamp",children:"Sort by Time"}),(0,a.jsx)("option",{value:"severity",children:"Sort by Severity"}),(0,a.jsx)("option",{value:"status",children:"Sort by Status"})]}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>w("asc"===N?"desc":"asc"),children:"asc"===N?"↑":"↓"})]}),C&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,a.jsxs)("select",{value:g.severity,onChange:e=>p(s=>({...s,severity:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Severities"}),["low","medium","high","critical"].map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,a.jsxs)("select",{value:g.status,onChange:e=>p(s=>({...s,status:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Statuses"}),["active","acknowledged","resolved","muted"].map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,a.jsxs)("select",{value:g.category,onChange:e=>p(s=>({...s,category:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),W.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>p({severity:"all",status:"all",category:"all",search:""}),children:"Clear Filters"})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto space-y-2",children:0===d.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(z.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No alerts found"}),(0,a.jsx)("p",{className:"text-xs",children:"Try adjusting your filters"})]}):d.map(e=>(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-sm transition-shadow cursor-pointer",onClick:()=>{h(e),Z(!0)},children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[A(e.severity),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,a.jsx)(x.C,{className:U(e.severity),children:e.severity.toUpperCase()}),(0,a.jsx)(x.C,{className:F(e.status),children:e.status.toUpperCase()})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(T.Z,{className:"h-3 w-3 mr-1"}),I(e.timestamp)]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(O.Z,{className:"h-3 w-3 mr-1"}),e.category]}),(0,a.jsx)("span",{children:e.source})]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1 ml-2",children:"active"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),J(e.id,"acknowledge")},children:(0,a.jsx)(f.Z,{className:"h-3 w-3"})}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),J(e.id,"mute")},children:(0,a.jsx)(M.Z,{className:"h-3 w-3"})})]})})]}),e.tags.length>0&&(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.tags.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:e},e))})]},e.id))}),(0,a.jsx)(o.u,{isOpen:k,onClose:()=>{Z(!1),h(null)},title:"Alert Details",children:u&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[A(u.severity),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:u.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)(x.C,{className:U(u.severity),children:u.severity.toUpperCase()}),(0,a.jsx)(x.C,{className:F(u.status),children:u.status.toUpperCase()})]})]})]})}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:u.message})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Source:"}),(0,a.jsx)("p",{className:"text-gray-600",children:u.source})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Category:"}),(0,a.jsx)("p",{className:"text-gray-600",children:u.category})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Created:"}),(0,a.jsx)("p",{className:"text-gray-600",children:new Date(u.timestamp).toLocaleString()})]}),u.acknowledgedAt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Acknowledged:"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[new Date(u.acknowledgedAt).toLocaleString(),u.acknowledgedBy&&" by ".concat(u.acknowledgedBy)]})]})]}),u.tags.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700 block mb-2",children:"Tags:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:u.tags.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700",children:e},e))})]}),u.actions&&u.actions.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700 block mb-2",children:"Quick Actions:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:u.actions.map((e,s)=>(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>{e.url?window.open(e.url,"_blank"):J(u.id,e.action)},children:[e.url&&(0,a.jsx)(L.Z,{className:"h-3 w-3 mr-1"}),e.label]},s))})]}),(0,a.jsxs)("div",{className:"flex space-x-2 pt-4 border-t",children:["active"===u.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.z,{onClick:()=>J(u.id,"acknowledge"),className:"flex-1",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Acknowledge"]}),(0,a.jsx)(n.z,{variant:"outline",onClick:()=>J(u.id,"resolve"),children:"Resolve"})]}),"acknowledged"===u.status&&(0,a.jsxs)(n.z,{onClick:()=>J(u.id,"resolve"),className:"flex-1",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Resolve"]}),(0,a.jsxs)(n.z,{variant:"outline",onClick:()=>J(u.id,"mute"),children:[(0,a.jsx)(M.Z,{className:"h-4 w-4 mr-2"}),"Mute"]}),(0,a.jsxs)(n.z,{variant:"outline",onClick:()=>J(u.id,"delete"),children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]})},U=t(6259),F=t(5353),J=t(3818),I=e=>{let{data:s,config:t={},isFullscreen:l=!1}=e,[i,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(null),[h,g]=(0,r.useState)(null),[p,j]=(0,r.useState)({search:"",service:"all",status:"all",minDuration:0,maxDuration:0}),[v,w]=(0,r.useState)("timeline"),[C,k]=(0,r.useState)(!1),[Z,z]=(0,r.useState)(!1),R=(0,r.useRef)(null),D=(0,r.useRef)(null);(0,r.useEffect)(()=>{(null==s?void 0:s.traces)&&c(s.traces)},[s]);let O=e=>{switch(e){case"success":return(0,a.jsx)(f.Z,{className:"h-4 w-4 text-green-500"});case"error":return(0,a.jsx)(y.Z,{className:"h-4 w-4 text-red-500"});case"timeout":return(0,a.jsx)(T.Z,{className:"h-4 w-4 text-yellow-500"});default:return(0,a.jsx)(u.Z,{className:"h-4 w-4 text-gray-500"})}},M=e=>{switch(e){case"success":return"bg-green-100 text-green-800";case"error":return"bg-red-100 text-red-800";case"partial":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},L=e=>{let s={database:(0,a.jsx)(N.Z,{className:"h-4 w-4"}),api:(0,a.jsx)(b.Z,{className:"h-4 w-4"}),frontend:(0,a.jsx)(F.Z,{className:"h-4 w-4"}),cache:(0,a.jsx)(S.Z,{className:"h-4 w-4"})},t=Object.keys(s).find(s=>e.toLowerCase().includes(s));return s[t||"api"]||(0,a.jsx)(u.Z,{className:"h-4 w-4"})},E=e=>e>=1e3?"".concat((e/1e3).toFixed(2),"s"):"".concat(e.toFixed(1),"ms"),A=e=>new Date(e).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),I=e=>{let s=new Map(e.map(e=>[e.id,e])),t=[];return e.forEach(e=>{if(e.parentId){let t=s.get(e.parentId);t&&(t.children||(t.children=[]),t.children.push(e))}else t.push(e)}),t},W=e=>{if(!R.current)return;let s=U.Ys(R.current);s.selectAll("*").remove();let t={top:20,right:20,bottom:30,left:200},a=(R.current.clientWidth||800)-t.left-t.right,r=Math.max(400,30*e.spans.length)-t.top-t.bottom,l=s.append("g").attr("transform","translate(".concat(t.left,",").concat(t.top,")")),i=Math.min(...e.spans.map(e=>e.startTime)),n=Math.max(...e.spans.map(e=>e.startTime+e.duration)),c=U.BYU().domain([i,n]).range([0,a]),o=U.tiA().domain(e.spans.map(e=>e.id)).range([0,r]).padding(.1),d=l.selectAll(".span").data(e.spans).enter().append("g").attr("class","span").attr("transform",e=>"translate(0, ".concat(o(e.id),")"));d.append("rect").attr("x",e=>c(e.startTime)).attr("width",e=>Math.max(1,c(e.startTime+e.duration)-c(e.startTime))).attr("height",o.bandwidth()).attr("fill",e=>{switch(e.status){case"success":return"#10b981";case"error":return"#ef4444";case"timeout":return"#f59e0b";default:return"#6b7280"}}).attr("opacity",.7).attr("rx",3).style("cursor","pointer").on("click",(e,s)=>{g(s),z(!0)}),d.append("text").attr("x",-5).attr("y",o.bandwidth()/2).attr("dy","0.35em").attr("text-anchor","end").attr("font-size","12px").attr("fill","#374151").text(e=>"".concat(e.serviceName,": ").concat(e.operationName)),d.append("text").attr("x",e=>c(e.startTime)+5).attr("y",o.bandwidth()/2).attr("dy","0.35em").attr("font-size","10px").attr("fill","white").text(e=>E(e.duration));let m=U.LLu(c).tickFormat(e=>"+".concat((e-i).toFixed(0),"ms"));l.append("g").attr("transform","translate(0, ".concat(r,")")).call(m)},H=e=>{if(!D.current)return;let s=U.Ys(D.current);s.selectAll("*").remove();let t={top:20,right:20,bottom:30,left:20},a=(D.current.clientWidth||800)-t.left-t.right,r=400-t.top-t.bottom,l=s.append("g").attr("transform","translate(".concat(t.left,",").concat(t.top,")")),i=I(e.spans),n=U.bT9({children:i},e=>e.children).sum(e=>e.duration||0).sort((e,s)=>(s.value||0)-(e.value||0)),c=U.uKc().size([a,r]).padding(1)(n),o=U.PKp(U.Cn1),d=l.selectAll(".cell").data(c.descendants()).enter().append("g").attr("class","cell");d.append("rect").attr("x",e=>e.x0).attr("y",e=>e.y0).attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("fill",e=>e.data.serviceName?o(e.data.serviceName):"#f3f4f6").attr("stroke","white").attr("stroke-width",1).style("cursor","pointer").on("click",(e,s)=>{s.data.id&&(g(s.data),z(!0))}),d.append("text").attr("x",e=>(e.x0+e.x1)/2).attr("y",e=>(e.y0+e.y1)/2).attr("dy","0.35em").attr("text-anchor","middle").attr("font-size","10px").attr("fill","white").text(e=>e.x1-e.x0<50||!e.data.operationName?"":e.data.operationName.length>15?e.data.operationName.substring(0,15)+"...":e.data.operationName)};(0,r.useEffect)(()=>{d&&("timeline"===v?W(d):"flamegraph"===v&&H(d))},[d,v]);let q=i.filter(e=>(!p.search||!!e.operationName.toLowerCase().includes(p.search.toLowerCase())||!!e.services.some(e=>e.toLowerCase().includes(p.search.toLowerCase())))&&("all"===p.service||!!e.services.includes(p.service))&&("all"===p.status||e.status===p.status)&&(!(p.minDuration>0)||!(e.duration<p.minDuration))&&(!(p.maxDuration>0)||!(e.duration>p.maxDuration))),B=[...new Set(i.flatMap(e=>e.services))];return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(J.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("span",{className:"font-semibold",children:"Distributed Tracing"}),(0,a.jsxs)(x.C,{variant:"outline",children:[q.length," traces"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.z,{variant:"list"===v?"default":"outline",size:"sm",onClick:()=>w("list"),children:"List"}),(0,a.jsx)(n.z,{variant:"timeline"===v?"default":"outline",size:"sm",onClick:()=>w("timeline"),children:"Timeline"}),(0,a.jsx)(n.z,{variant:"flamegraph"===v?"default":"outline",size:"sm",onClick:()=>w("flamegraph"),children:"Flamegraph"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(P.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search traces...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm",value:p.search,onChange:e=>j(s=>({...s,search:e.target.value}))})]}),(0,a.jsxs)("select",{value:p.service,onChange:e=>j(s=>({...s,service:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Services"}),B.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:p.status,onChange:e=>j(s=>({...s,status:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Statuses"}),(0,a.jsx)("option",{value:"success",children:"Success"}),(0,a.jsx)("option",{value:"error",children:"Error"}),(0,a.jsx)("option",{value:"partial",children:"Partial"})]}),(0,a.jsx)("input",{type:"number",placeholder:"Min duration (ms)",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:p.minDuration||"",onChange:e=>j(s=>({...s,minDuration:Number(e.target.value)||0}))}),(0,a.jsx)("input",{type:"number",placeholder:"Max duration (ms)",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",value:p.maxDuration||"",onChange:e=>j(s=>({...s,maxDuration:Number(e.target.value)||0}))})]}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:"list"===v?(0,a.jsx)("div",{className:"h-full overflow-auto space-y-2",children:0===q.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(J.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No traces found"})]}):q.map(e=>(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-sm transition-shadow cursor-pointer",onClick:()=>{m(e),k(!0)},children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[O(e.status),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.operationName}),(0,a.jsx)(x.C,{className:M(e.status),children:e.status.toUpperCase()}),e.errorCount>0&&(0,a.jsxs)(x.C,{variant:"destructive",children:[e.errorCount," errors"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(T.Z,{className:"h-3 w-3 mr-1"}),E(e.duration)]}),(0,a.jsxs)("span",{children:[e.spans.length," spans"]}),(0,a.jsxs)("span",{children:[e.services.length," services"]}),(0,a.jsx)("span",{children:A(e.startTime)})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e.services.slice(0,3).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[L(e),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:e})]},e)),e.services.length>3&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.services.length-3]})]})]})},e.id))}):(0,a.jsxs)("div",{className:"h-full flex",children:[(0,a.jsxs)("div",{className:"w-1/3 border-r border-gray-200 overflow-auto",children:[(0,a.jsx)("div",{className:"p-2 border-b border-gray-200",children:(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Select Trace"})}),(0,a.jsx)("div",{className:"space-y-1 p-2",children:q.map(e=>(0,a.jsxs)("div",{className:"p-2 rounded cursor-pointer transition-colors ".concat((null==d?void 0:d.id)===e.id?"bg-blue-100 border border-blue-300":"hover:bg-gray-50"),onClick:()=>m(e),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium truncate",children:e.operationName}),O(e.status)]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[E(e.duration)," • ",e.spans.length," spans"]})]},e.id))})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:d?(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:d.operationName}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["Duration: ",E(d.duration)]}),(0,a.jsxs)("span",{children:["Spans: ",d.spans.length]}),(0,a.jsxs)("span",{children:["Services: ",d.services.join(", ")]})]})]}),(0,a.jsx)("div",{className:"w-full",children:"timeline"===v?(0,a.jsx)("svg",{ref:R,width:"100%",height:Math.max(400,30*d.spans.length),className:"border border-gray-200 rounded"}):(0,a.jsx)("svg",{ref:D,width:"100%",height:"400",className:"border border-gray-200 rounded"})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(J.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"Select a trace to view details"})]})})})]})}),(0,a.jsx)(o.u,{isOpen:C,onClose:()=>{k(!1),m(null)},title:"Trace Details",children:d&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Operation:"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.operationName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Status:"}),(0,a.jsx)(x.C,{className:M(d.status),children:d.status.toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Duration:"}),(0,a.jsx)("p",{className:"text-gray-600",children:E(d.duration)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Spans:"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.spans.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Services:"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.services.join(", ")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Start Time:"}),(0,a.jsx)("p",{className:"text-gray-600",children:A(d.startTime)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700 block mb-2",children:"Spans:"}),(0,a.jsx)("div",{className:"max-h-64 overflow-auto space-y-2",children:d.spans.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded cursor-pointer hover:bg-gray-100",onClick:()=>{g(e),z(!0)},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[O(e.status),(0,a.jsxs)("span",{className:"text-sm",children:[e.serviceName,": ",e.operationName]})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:E(e.duration)})]},e.id))})]})]})}),(0,a.jsx)(o.u,{isOpen:Z,onClose:()=>{z(!1),g(null)},title:"Span Details",children:h&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Operation:"}),(0,a.jsx)("p",{className:"text-gray-600",children:h.operationName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Service:"}),(0,a.jsx)("p",{className:"text-gray-600",children:h.serviceName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Status:"}),(0,a.jsx)(x.C,{className:M(h.status),children:h.status.toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Duration:"}),(0,a.jsx)("p",{className:"text-gray-600",children:E(h.duration)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Start Time:"}),(0,a.jsx)("p",{className:"text-gray-600",children:A(h.startTime)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Span ID:"}),(0,a.jsx)("p",{className:"text-gray-600 font-mono text-xs",children:h.id})]})]}),Object.keys(h.tags).length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700 block mb-2",children:"Tags:"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded p-3 max-h-32 overflow-auto",children:(0,a.jsx)("pre",{className:"text-xs text-gray-600",children:JSON.stringify(h.tags,null,2)})})]}),h.logs.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-gray-700 block mb-2",children:"Logs:"}),(0,a.jsx)("div",{className:"max-h-48 overflow-auto space-y-1",children:h.logs.map((e,s)=>(0,a.jsxs)("div",{className:"text-xs bg-gray-50 rounded p-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)(x.C,{variant:"error"===e.level?"destructive":"warn"===e.level?"secondary":"default",children:e.level.toUpperCase()}),(0,a.jsx)("span",{className:"text-gray-500",children:A(e.timestamp)})]}),(0,a.jsx)("p",{className:"text-gray-700",children:e.message}),e.fields&&(0,a.jsx)("pre",{className:"mt-1 text-gray-600",children:JSON.stringify(e.fields,null,2)})]},s))})]})]})})]})},W=t(9523),H=t(3336),q=t(9578),B=t(2348),K=t(2021),_=t(5189);m.kL.register(m.uw,m.f$,m.od,m.jn,m.ZL,m.qi,m.l7,m.Dx,m.u,m.De,m.Gu);var Y=e=>{let{data:s,config:t={},isFullscreen:l=!1}=e,[i,c]=(0,r.useState)([]),[m,u]=(0,r.useState)([]),[g,p]=(0,r.useState)(null),[j,y]=(0,r.useState)(null),[b,N]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),[S,k]=(0,r.useState)("combined"),[T,Z]=(0,r.useState)({});(0,r.useEffect)(()=>{(null==s?void 0:s.customMetrics)&&(c(s.customMetrics.metrics||[]),u(s.customMetrics.kpis||[]),Z(s.customMetrics.data||{}))},[s]);let z=e=>{switch(e){case"normal":return(0,a.jsx)(f.Z,{className:"h-4 w-4 text-green-500"});case"warning":return(0,a.jsx)(v.Z,{className:"h-4 w-4 text-yellow-500"});case"critical":return(0,a.jsx)(v.Z,{className:"h-4 w-4 text-red-500"});default:return(0,a.jsx)(f.Z,{className:"h-4 w-4 text-gray-500"})}},R=e=>{switch(e){case"normal":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=e=>{switch(e){case"up":return(0,a.jsx)(h.Z,{className:"h-3 w-3 text-green-500"});case"down":return(0,a.jsx)(h.Z,{className:"h-3 w-3 text-red-500 transform rotate-180"});default:return(0,a.jsx)(W.Z,{className:"h-3 w-3 text-gray-400"})}},O=(e,s)=>"%"===s?"".concat(e.toFixed(1),"%"):"ms"===s?e>=1e3?"".concat((e/1e3).toFixed(1),"s"):"".concat(e.toFixed(0),"ms"):"bytes"===s?e>=1073741824?"".concat((e/1073741824).toFixed(1),"GB"):e>=1048576?"".concat((e/1048576).toFixed(1),"MB"):e>=1024?"".concat((e/1024).toFixed(1),"KB"):"".concat(e,"B"):e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toLocaleString(),L=e=>{var s;let t=T[e.id];if(!t)return(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(H.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No data available"})]})});let r={labels:t.labels||[],datasets:[{label:e.name,data:t.values||[],borderColor:e.color,backgroundColor:"doughnut"===e.chartType?null===(s=t.values)||void 0===s?void 0:s.map((s,t)=>"".concat(e.color).concat(Math.floor(255*(1-.1*t)).toString(16))):"".concat(e.color,"20"),fill:"line"===e.chartType,tension:.4,pointRadius:2,pointHoverRadius:4,borderWidth:2}]},l={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:s=>"".concat(e.name,": ").concat(O(s.parsed.y,e.unit))}}},scales:"doughnut"===e.chartType||"radar"===e.chartType?{}:{x:{display:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}},y:{display:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},beginAtZero:!0,ticks:{callback:s=>O(s,e.unit)}}}};switch(e.chartType){case"bar":return(0,a.jsx)(d.$Q,{data:r,options:l});case"doughnut":return(0,a.jsx)(d.$I,{data:r,options:l});case"radar":return(0,a.jsx)(d.Fk,{data:r,options:l});default:return(0,a.jsx)(d.x1,{data:r,options:l})}},E=e=>{c(s=>s.map(s=>s.id===e?{...s,enabled:!s.enabled}:s))},A=async e=>{try{let s=await fetch("/api/metrics/custom/".concat(e,"/refresh"),{method:"POST"}),t=await s.json();Z(s=>({...s,[e]:t}))}catch(e){console.error("Error refreshing metric:",e)}},U=i.filter(e=>e.enabled),F=m.filter(e=>"normal"===e.status).length,J=m.filter(e=>"warning"===e.status).length,I=m.filter(e=>"critical"===e.status).length;return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(H.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("span",{className:"font-semibold",children:"Custom Metrics & KPIs"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(x.C,{variant:"outline",children:["Metrics: ",U.length]}),(0,a.jsxs)(x.C,{variant:"outline",children:["KPIs: ",m.length]}),(0,a.jsxs)(x.C,{variant:"default",children:["Normal: ",F]}),(0,a.jsxs)(x.C,{variant:"secondary",children:["Warning: ",J]}),(0,a.jsxs)(x.C,{variant:"destructive",children:["Critical: ",I]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)(n.z,{variant:"metrics"===S?"default":"outline",size:"sm",onClick:()=>k("metrics"),children:"Metrics"}),(0,a.jsx)(n.z,{variant:"kpis"===S?"default":"outline",size:"sm",onClick:()=>k("kpis"),children:"KPIs"}),(0,a.jsx)(n.z,{variant:"combined"===S?"default":"outline",size:"sm",onClick:()=>k("combined"),children:"Combined"})]}),(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>{y(null),N(!0)},children:[(0,a.jsx)(_.Z,{className:"h-3 w-3 mr-1"}),"Add Metric"]}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",children:(0,a.jsx)(D.Z,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto",children:["metrics"===S||"combined"===S?(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Custom Metrics"}),(0,a.jsx)("div",{className:"grid gap-4 ".concat(l?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1 md:grid-cols-2"),children:U.length>0?U.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,a.jsxs)("div",{className:"p-3 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)(x.C,{className:R(e.status||"normal"),children:(e.status||"normal").toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>A(e.id),children:(0,a.jsx)(q.Z,{className:"h-3 w-3"})}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>E(e.id),children:e.enabled?(0,a.jsx)(B.Z,{className:"h-3 w-3"}):(0,a.jsx)(M.Z,{className:"h-3 w-3"})}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>{y(e),N(!0)},children:(0,a.jsx)(K.Z,{className:"h-3 w-3"})})]})]}),void 0!==e.lastValue&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)("span",{className:"text-lg font-bold",style:{color:e.color},children:O(e.lastValue,e.unit)}),P(e.trend||"stable")]})]}),(0,a.jsx)("div",{className:"p-3",children:(0,a.jsx)("div",{className:"h-32",children:e.enabled?L(e):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400",children:(0,a.jsx)(M.Z,{className:"h-8 w-8"})})})}),(0,a.jsx)("div",{className:"px-3 pb-3",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:e},e))})})]},e.id)):(0,a.jsxs)("div",{className:"col-span-full text-center py-8 text-gray-500",children:[(0,a.jsx)(H.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No custom metrics configured"}),(0,a.jsxs)(n.z,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{y(null),N(!0)},children:[(0,a.jsx)(_.Z,{className:"h-3 w-3 mr-1"}),"Add First Metric"]})]})})]}):null,"kpis"===S||"combined"===S?(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Key Performance Indicators"}),(0,a.jsx)("div",{className:"grid gap-4 ".concat(l?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5":"grid-cols-1 md:grid-cols-3"),children:m.length>0?m.map(e=>{let s=e.previousValue>0?(e.value-e.previousValue)/e.previousValue*100:0,t=e.target>0?e.value/e.target*100:0;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.category})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[z(e.status),P(e.trend)]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:O(e.value,e.unit)}),(0,a.jsx)(x.C,{className:R(e.status),children:e.status.toUpperCase()})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"vs Previous:"}),(0,a.jsxs)("span",{className:s>=0?"text-green-600":"text-red-600",children:[s>=0?"+":"",s.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"vs Target:"}),(0,a.jsxs)("span",{className:t>=100?"text-green-600":"text-yellow-600",children:[t.toFixed(1),"%"]})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(t>=100?"bg-green-500":t>=80?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(Math.min(100,t),"%")}})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]},e.id)}):(0,a.jsxs)("div",{className:"col-span-full text-center py-8 text-gray-500",children:[(0,a.jsx)(W.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No KPIs configured"}),(0,a.jsxs)(n.z,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>C(!0),children:[(0,a.jsx)(_.Z,{className:"h-3 w-3 mr-1"}),"Add First KPI"]})]})})]}):null]}),(0,a.jsx)(o.u,{isOpen:b,onClose:()=>{N(!1),y(null)},title:j?"Edit Metric":"Add Custom Metric",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Metric name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"counter",children:"Counter"}),(0,a.jsx)("option",{value:"gauge",children:"Gauge"}),(0,a.jsx)("option",{value:"histogram",children:"Histogram"}),(0,a.jsx)("option",{value:"summary",children:"Summary"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chart Type"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,a.jsx)("option",{value:"line",children:"Line Chart"}),(0,a.jsx)("option",{value:"bar",children:"Bar Chart"}),(0,a.jsx)("option",{value:"doughnut",children:"Doughnut Chart"}),(0,a.jsx)("option",{value:"radar",children:"Radar Chart"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"ms, %, bytes, etc."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),(0,a.jsx)("input",{type:"color",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm h-10"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Query"}),(0,a.jsx)("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",rows:3,placeholder:"PromQL or custom query"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"performance, api, database"})]}),(0,a.jsxs)("div",{className:"flex space-x-2 pt-4",children:[(0,a.jsx)(n.z,{className:"flex-1",children:j?"Update Metric":"Create Metric"}),(0,a.jsx)(n.z,{variant:"outline",onClick:()=>{N(!1),y(null)},children:"Cancel"})]})]})}),(0,a.jsx)(o.u,{isOpen:w,onClose:()=>C(!1),title:"Add KPI",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"KPI Name"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"KPI name"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Performance, Quality, etc."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"%, ms, count, etc."})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Value"}),(0,a.jsx)("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Value"}),(0,a.jsx)("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",rows:2,placeholder:"KPI description"})]}),(0,a.jsxs)("div",{className:"flex space-x-2 pt-4",children:[(0,a.jsx)(n.z,{className:"flex-1",children:"Create KPI"}),(0,a.jsx)(n.z,{variant:"outline",onClick:()=>C(!1),children:"Cancel"})]})]})})]})},$=t(1275),V=e=>{let{data:s,config:t={},isFullscreen:l=!1}=e,[i,n]=(0,r.useState)([]),[c,o]=(0,r.useState)("responseTime"),[d,m]=(0,r.useState)("7d"),[g,p]=(0,r.useState)("all"),[j,f]=(0,r.useState)([]),[v,y]=(0,r.useState)(null),b=(0,r.useRef)(null),N=(0,r.useRef)(null);(0,r.useEffect)(()=>{(null==s?void 0:s.performance)&&n(s.performance)},[s]),(0,r.useEffect)(()=>{w()},[i,c,d,g]);let w=()=>{if(!i.length)return;let e=i.filter(e=>{if("all"!==g&&e.endpoint!==g)return!1;let s=Date.now(),t={"24h":864e5,"7d":6048e5,"30d":2592e6}[d];return e.timestamp>=s-t}),s=new Map;e.forEach(e=>{let t=new Date(e.timestamp),a=t.getDay(),r=t.getHours(),l="".concat(a,"-").concat(r);s.has(l)||s.set(l,[]),s.get(l).push(e)});let t=[];for(let e=0;e<7;e++)for(let a=0;a<24;a++){let r="".concat(e,"-").concat(a),l=s.get(r)||[],i=0,n=0,o=0,d=0,m=0;if(l.length>0){let e=l.map(e=>e.responseTime).sort((e,s)=>e-s);switch(n=e.reduce((e,s)=>e+s,0)/e.length,o=l.reduce((e,s)=>e+s.requests,0),d=l.reduce((e,s)=>e+s.errors,0),m=e[Math.floor(.95*e.length)]||0,c){case"responseTime":i=n;break;case"requests":i=o;break;case"errors":i=d;break;case"errorRate":i=o>0?d/o*100:0}}t.push({hour:a,day:e,value:i,label:C(e)+" "+a+":00",details:{avgResponseTime:n,totalRequests:o,errorRate:o>0?d/o*100:0,p95ResponseTime:m}})}f(t)},C=e=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e],S=e=>{switch(e){case"responseTime":return"Avg Response Time (ms)";case"requests":return"Total Requests";case"errors":return"Total Errors";case"errorRate":return"Error Rate (%)";default:return e}},k=()=>{if(!b.current||!j.length)return;let e=U.Ys(b.current);e.selectAll("*").remove();let s={top:40,right:20,bottom:40,left:80},t=(b.current.clientWidth||800)-s.left-s.right,a=200-s.top-s.bottom,r=t/24,l=a/7,i=e.append("g").attr("transform","translate(".concat(s.left,",").concat(s.top,")")),n=j.map(e=>e.value),o=Math.max(...n),d=Math.min(...n),m="errors"===c||"errorRate"===c?U.cJy(U.bc$).domain([d,o]):U.cJy(U.sY$).domain([d,o]),x=i.selectAll(".cell").data(j).enter().append("g").attr("class","cell");x.append("rect").attr("x",e=>e.hour*r).attr("y",e=>e.day*l).attr("width",r-1).attr("height",l-1).attr("fill",e=>0===e.value?"#f3f4f6":m(e.value)).attr("stroke","#ffffff").attr("stroke-width",1).style("cursor","pointer").on("mouseover",(e,s)=>{y(s),N.current&&U.Ys(N.current).style("opacity",1).style("left","".concat(e.pageX+10,"px")).style("top","".concat(e.pageY-10,"px"))}).on("mouseout",()=>{y(null),N.current&&U.Ys(N.current).style("opacity",0)}),r>30&&l>20&&x.append("text").attr("x",e=>e.hour*r+r/2).attr("y",e=>e.day*l+l/2).attr("dy","0.35em").attr("text-anchor","middle").attr("font-size","10px").attr("fill",e=>e.value>.5*o?"white":"black").text(e=>0===e.value?"":"errorRate"===c?e.value.toFixed(1)+"%":e.value.toFixed(0)),i.append("g").attr("class","y-axis").selectAll(".day-label").data([0,1,2,3,4,5,6]).enter().append("text").attr("class","day-label").attr("x",-10).attr("y",e=>e*l+l/2).attr("dy","0.35em").attr("text-anchor","end").attr("font-size","12px").attr("fill","#374151").text(e=>C(e)),i.append("g").attr("class","x-axis").attr("transform","translate(0, ".concat(a+10,")")).selectAll(".hour-label").data([0,6,12,18]).enter().append("text").attr("class","hour-label").attr("x",e=>e*r+r/2).attr("y",0).attr("dy","0.71em").attr("text-anchor","middle").attr("font-size","12px").attr("fill","#374151").text(e=>"".concat(e,":00")),i.append("text").attr("x",t/2).attr("y",-15).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").attr("fill","#111827").text(S(c))};(0,r.useEffect)(()=>{j.length>0&&k()},[j,c]);let Z=[...new Set(i.map(e=>e.endpoint))],z=(()=>{let e=i.filter(e=>{if("all"!==g&&e.endpoint!==g)return!1;let s=Date.now(),t={"24h":864e5,"7d":6048e5,"30d":2592e6}[d];return e.timestamp>=s-t});if(0===e.length)return{avgResponseTime:0,totalRequests:0,errorRate:0,p95ResponseTime:0};let s=e.map(e=>e.responseTime).sort((e,s)=>e-s),t=s.reduce((e,s)=>e+s,0)/s.length,a=e.reduce((e,s)=>e+s.requests,0),r=e.reduce((e,s)=>e+s.errors,0);return{avgResponseTime:t,totalRequests:a,errorRate:a>0?r/a*100:0,p95ResponseTime:s[Math.floor(.95*s.length)]||0}})();return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)($.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("span",{className:"font-semibold",children:"Performance Heatmap"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm",children:[(0,a.jsx)("option",{value:"responseTime",children:"Response Time"}),(0,a.jsx)("option",{value:"requests",children:"Requests"}),(0,a.jsx)("option",{value:"errors",children:"Errors"}),(0,a.jsx)("option",{value:"errorRate",children:"Error Rate"})]}),(0,a.jsxs)("select",{value:d,onChange:e=>m(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm",children:[(0,a.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,a.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 Days"})]}),(0,a.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Endpoints"}),Z.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-blue-900",children:[z.avgResponseTime.toFixed(0),"ms"]})]}),(0,a.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"Avg Response Time"})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-lg font-bold text-green-900",children:z.totalRequests.toLocaleString()})]}),(0,a.jsx)("p",{className:"text-xs text-green-700 mt-1",children:"Total Requests"})]}),(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(W.Z,{className:"h-4 w-4 text-red-600"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-red-900",children:[z.errorRate.toFixed(1),"%"]})]}),(0,a.jsx)("p",{className:"text-xs text-red-700 mt-1",children:"Error Rate"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 text-purple-600"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-purple-900",children:[z.p95ResponseTime.toFixed(0),"ms"]})]}),(0,a.jsx)("p",{className:"text-xs text-purple-700 mt-1",children:"P95 Response Time"})]})]}),(0,a.jsx)("div",{className:"flex-1 bg-white rounded-lg border border-gray-200 p-4",children:j.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{ref:b,width:"100%",height:l?"400":"300",className:"overflow-visible"}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-center space-x-4 text-sm text-gray-600",children:[(0,a.jsx)("span",{children:"Low"}),(0,a.jsx)("div",{className:"flex space-x-1",children:Array.from({length:10},(e,s)=>{let t=j.map(e=>e.value),r=Math.max(...t),l=Math.min(...t),i="errors"===c||"errorRate"===c?U.cJy(U.bc$).domain([l,r]):U.cJy(U.sY$).domain([l,r]),n=l+s/9*(r-l);return(0,a.jsx)("div",{className:"w-4 h-4 border border-gray-300",style:{backgroundColor:i(n)}},s)})}),(0,a.jsx)("span",{children:"High"})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)($.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No performance data available"}),(0,a.jsx)("p",{className:"text-sm",children:"Data will appear as requests are processed"})]})})}),l&&j.length>0&&(0,a.jsxs)("div",{className:"mt-4 bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Performance Insights"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Peak Hours"}),(0,a.jsx)("div",{className:"space-y-1",children:R("highest").map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:e.label}),(0,a.jsx)(x.C,{variant:"secondary",children:"errorRate"===c?"".concat(e.value.toFixed(1),"%"):e.value.toFixed(0)})]},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Best Performance"}),(0,a.jsx)("div",{className:"space-y-1",children:R("lowest").map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:e.label}),(0,a.jsx)(x.C,{variant:"default",children:"errorRate"===c?"".concat(e.value.toFixed(1),"%"):e.value.toFixed(0)})]},s))})]})]})]}),(0,a.jsx)("div",{ref:N,className:"absolute bg-black bg-opacity-80 text-white p-2 rounded text-xs pointer-events-none opacity-0 transition-opacity z-10",children:v&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:v.label}),(0,a.jsxs)("div",{children:["Avg Response: ",v.details.avgResponseTime.toFixed(0),"ms"]}),(0,a.jsxs)("div",{children:["Requests: ",v.details.totalRequests]}),(0,a.jsxs)("div",{children:["Error Rate: ",v.details.errorRate.toFixed(1),"%"]}),(0,a.jsxs)("div",{children:["P95: ",v.details.p95ResponseTime.toFixed(0),"ms"]})]})})]});function R(e){return[...j].filter(e=>e.value>0).sort((s,t)=>"highest"===e?t.value-s.value:s.value-t.value).slice(0,3)}},Q=t(5144),G=t(9618),X=t(5818),ee=t(9024),es=t(6421),et=t(1406);let ea=(0,l.WidthProvider)(l.Responsive),er={lg:[{i:"realtime-metrics",x:0,y:0,w:8,h:4,minW:4,minH:3},{i:"system-health",x:8,y:0,w:4,h:4,minW:3,minH:3},{i:"alerts-manager",x:0,y:4,w:6,h:3,minW:4,minH:2},{i:"performance-heatmap",x:6,y:4,w:6,h:3,minW:4,minH:2},{i:"distributed-tracing",x:0,y:7,w:12,h:4,minW:8,minH:3},{i:"custom-metrics",x:0,y:11,w:12,h:3,minW:6,minH:2}],md:[{i:"realtime-metrics",x:0,y:0,w:6,h:4},{i:"system-health",x:6,y:0,w:4,h:4},{i:"alerts-manager",x:0,y:4,w:5,h:3},{i:"performance-heatmap",x:5,y:4,w:5,h:3},{i:"distributed-tracing",x:0,y:7,w:10,h:4},{i:"custom-metrics",x:0,y:11,w:10,h:3}],sm:[{i:"realtime-metrics",x:0,y:0,w:6,h:4},{i:"system-health",x:0,y:4,w:6,h:4},{i:"alerts-manager",x:0,y:8,w:6,h:3},{i:"performance-heatmap",x:0,y:11,w:6,h:3},{i:"distributed-tracing",x:0,y:14,w:6,h:4},{i:"custom-metrics",x:0,y:18,w:6,h:3}]},el=[{id:"realtime-metrics",type:"realtime-metrics",title:"Real-time Metrics",enabled:!0,config:{}},{id:"system-health",type:"system-health",title:"System Health",enabled:!0,config:{}},{id:"alerts-manager",type:"alerts-manager",title:"Alerts & Notifications",enabled:!0,config:{}},{id:"performance-heatmap",type:"performance-heatmap",title:"Performance Heatmap",enabled:!0,config:{}},{id:"distributed-tracing",type:"distributed-tracing",title:"Distributed Tracing",enabled:!0,config:{}},{id:"custom-metrics",type:"custom-metrics",title:"Custom Metrics & KPIs",enabled:!0,config:{}}];var ei=()=>{var e;let[s,t]=(0,r.useState)(er),[l,d]=(0,r.useState)(el),[m,x]=(0,r.useState)(null),[h,g]=(0,r.useState)(!0),[p,f]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),[b,N]=(0,r.useState)(null),[w,C]=(0,r.useState)(!1),[S,k]=(0,r.useState)(3e4),[T,z]=(0,r.useState)(!0),[R,P]=(0,r.useState)(null),{socket:O,isConnected:M}=(0,Q.s)(),L=(0,r.useCallback)(async()=>{try{f(null);let[e,s,t,a,r,l]=await Promise.all([G.hi.getRealtimeMetrics(),G.hi.getSystemHealth(),G.hi.getAlerts(),G.hi.getDistributedTraces(),G.hi.getCustomMetrics(),G.hi.getPerformanceData()]);x({realTimeMetrics:e,systemHealth:s,alerts:t,traces:a,customMetrics:r,performance:l}),P(new Date)}catch(e){console.error("Error fetching monitoring data:",e),f("Failed to load monitoring data")}finally{g(!1)}},[]);(0,r.useEffect)(()=>{L()},[L]),(0,r.useEffect)(()=>{if(!T)return;let e=setInterval(L,S);return()=>clearInterval(e)},[T,S,L]),(0,r.useEffect)(()=>{if(O&&M)return O.on("monitoring-update",e=>{x(s=>s?{...s,...e}:null),P(new Date)}),O.on("alert-triggered",e=>{x(s=>s?{...s,alerts:[e,...s.alerts.slice(0,99)]}:null)}),()=>{O.off("monitoring-update"),O.off("alert-triggered")}},[O,M]);let E=e=>{d(s=>s.map(s=>s.id===e?{...s,enabled:!s.enabled}:s))},U=e=>{if(!e.enabled||!m)return null;let s={data:m,config:e.config,isFullscreen:b===e.id,onFullscreen:()=>N(e.id),onExitFullscreen:()=>N(null)};switch(e.type){case"realtime-metrics":return(0,a.jsx)(j,{...s});case"system-health":return(0,a.jsx)(Z,{...s});case"alerts-manager":return(0,a.jsx)(A,{...s});case"performance-heatmap":return(0,a.jsx)(V,{...s});case"distributed-tracing":return(0,a.jsx)(I,{...s});case"custom-metrics":return(0,a.jsx)(Y,{...s});default:return(0,a.jsx)("div",{children:"Unknown widget type"})}};return h?(0,a.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,a.jsx)(c.T,{size:"lg"}),(0,a.jsx)("span",{className:"ml-3 text-lg",children:"Loading monitoring dashboard..."})]}):p?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen",children:(0,a.jsxs)(i.Zb,{className:"w-full max-w-md",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center text-red-600",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 mr-2"}),"Dashboard Error"]})}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("p",{className:"text-red-600 mb-4",children:p}),(0,a.jsxs)(n.z,{onClick:L,variant:"outline",className:"w-full",children:[(0,a.jsx)(q.Z,{className:"h-4 w-4 mr-2"}),"Retry"]})]})]})}):(0,a.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Advanced Monitoring Dashboard"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Real-time system monitoring and analytics",R&&(0,a.jsxs)("span",{className:"ml-2",children:["• Last updated: ",R.toLocaleTimeString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(M?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:M?"Live":"Offline"})]}),(0,a.jsx)(n.z,{variant:T?"default":"outline",size:"sm",onClick:()=>z(!T),children:T?"Auto ON":"Auto OFF"}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:L,disabled:h,children:(0,a.jsx)(q.Z,{className:"h-4 w-4 ".concat(h?"animate-spin":"")})}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>C(!0),children:(0,a.jsx)(D.Z,{className:"h-4 w-4"})}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([JSON.stringify({layouts:s,widgets:l},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="monitoring-dashboard-".concat(new Date().toISOString().split("T")[0],".json"),a.click(),URL.revokeObjectURL(t)},children:(0,a.jsx)(X.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsx)("input",{type:"file",accept:".json",className:"hidden",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a)return;let r=new FileReader;r.onload=e=>{try{var s;let a=JSON.parse(null===(s=e.target)||void 0===s?void 0:s.result);a.layouts&&t(a.layouts),a.widgets&&d(a.widgets)}catch(e){console.error("Error importing config:",e)}},r.readAsText(a)}}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",as:"span",children:(0,a.jsx)(ee.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>y(!v),children:v?(0,a.jsx)(es.Z,{className:"h-4 w-4"}):(0,a.jsx)(et.Z,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-4 ".concat(v?"fixed inset-0 z-50 bg-gray-50":""),children:b?(0,a.jsxs)("div",{className:"h-full",children:[(0,a.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:null===(e=l.find(e=>e.id===b))||void 0===e?void 0:e.title}),(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>N(null),children:[(0,a.jsx)(es.Z,{className:"h-4 w-4 mr-2"}),"Exit Fullscreen"]})]}),(0,a.jsx)("div",{className:"h-full",children:U(l.find(e=>e.id===b))})]}):(0,a.jsx)(ea,{className:"layout",layouts:s,onLayoutChange:(e,s)=>{t(s)},breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:60,margin:[16,16],containerPadding:[0,0],isDraggable:!0,isResizable:!0,children:l.filter(e=>e.enabled).map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)(i.Zb,{className:"h-full",children:[(0,a.jsx)(i.Ol,{className:"pb-2",children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{children:e.title}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>N(e.id),children:(0,a.jsx)(et.Z,{className:"h-3 w-3"})})]})}),(0,a.jsx)(i.aY,{className:"flex-1 pt-0",children:U(e)})]})},e.id))})}),(0,a.jsx)(o.u,{isOpen:w,onClose:()=>C(!1),title:"Dashboard Configuration",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Widget Visibility"}),(0,a.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:e.title}),(0,a.jsx)(n.z,{variant:e.enabled?"default":"outline",size:"sm",onClick:()=>E(e.id),children:e.enabled?"Enabled":"Disabled"})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Refresh Settings"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Auto-refresh"}),(0,a.jsx)(n.z,{variant:T?"default":"outline",size:"sm",onClick:()=>z(!T),children:T?"ON":"OFF"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Refresh Interval"}),(0,a.jsxs)("select",{value:S,onChange:e=>k(Number(e.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,a.jsx)("option",{value:5e3,children:"5 seconds"}),(0,a.jsx)("option",{value:1e4,children:"10 seconds"}),(0,a.jsx)("option",{value:3e4,children:"30 seconds"}),(0,a.jsx)("option",{value:6e4,children:"1 minute"}),(0,a.jsx)("option",{value:3e5,children:"5 minutes"})]})]})]})]})]})})]})};function en(){return(0,a.jsx)("div",{className:"h-screen",children:(0,a.jsx)(ei,{})})}},192:function(e,s,t){"use strict";t.d(s,{C:function(){return r}});var a=t(7821);function r(e){let{children:s,variant:t="default",size:r="md"}=e;return(0,a.jsx)("span",{className:"".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 bg-white text-gray-700"}[t]," ").concat({sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"}[r]),children:s})}t(8078)},1781:function(e,s,t){"use strict";t.d(s,{z:function(){return r}});var a=t(7821);function r(e){let{variant:s="primary",size:t="md",loading:r=!1,children:l,className:i="",disabled:n,...c}=e;return(0,a.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t]," ").concat(i),disabled:n||r,...c,children:[r&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})}t(8078)},1753:function(e,s,t){"use strict";t.d(s,{T:function(){return r}});var a=t(7821);function r(e){let{size:s="md",className:t=""}=e;return(0,a.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-primary-600 ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[s]," ").concat(t),children:(0,a.jsx)("span",{className:"sr-only",children:"Loading..."})})}t(8078)},9955:function(e,s,t){"use strict";t.d(s,{u:function(){return i}});var a=t(7821),r=t(8078),l=t(457);function i(e){let{isOpen:s,onClose:t,title:i,children:n,size:c="md"}=e;if((0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return s&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[s,t]),!s)return null;let o=(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[c]," w-full max-h-[90vh] overflow-hidden"),children:[i&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:n})]})]})});return(0,l.createPortal)(o,document.body)}},8006:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},SZ:function(){return n},Zb:function(){return r},aY:function(){return c},ll:function(){return i}});var a=t(7821);t(8078);let r=e=>{let{className:s="",children:t}=e;return(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm ".concat(s),children:t})},l=e=>{let{className:s="",children:t}=e;return(0,a.jsx)("div",{className:"p-6 pb-0 ".concat(s),children:t})},i=e=>{let{className:s="",children:t}=e;return(0,a.jsx)("h3",{className:"text-lg font-semibold leading-none tracking-tight ".concat(s),children:t})},n=e=>{let{className:s="",children:t}=e;return(0,a.jsx)("p",{className:"text-sm text-gray-600 ".concat(s),children:t})},c=e=>{let{className:s="",children:t}=e;return(0,a.jsx)("div",{className:"p-6 pt-0 ".concat(s),children:t})}},5144:function(e,s,t){"use strict";t.d(s,{s:function(){return i}});var a=t(1143),r=t(7093),l=t(9792);let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.env.NEXT_PUBLIC_WEBSOCKET_URL||"http://localhost:3001",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[t,i]=(0,a.eJ)(!1),n=(0,a.mT)(null),c=(0,a.mT)(null),{autoConnect:o=!0,reconnection:d=!0,reconnectionAttempts:m=5,reconnectionDelay:x=1e3}=s,u=()=>{n.current&&n.current.connected||(console.log("Connecting to WebSocket server:",e),n.current=(0,r.io)(e,{autoConnect:!1,reconnection:d,reconnectionAttempts:m,reconnectionDelay:x}),n.current.on("connect",()=>{console.log("WebSocket connected"),i(!0),c.current&&(clearTimeout(c.current),c.current=null)}),n.current.on("disconnect",e=>{console.log("WebSocket disconnected:",e),i(!1),"io server disconnect"===e&&d&&m>0&&(c.current=setTimeout(()=>{u()},x))}),n.current.on("connect_error",e=>{console.error("WebSocket connection error:",e),i(!1)}),n.current.on("reconnect",e=>{console.log("WebSocket reconnected after",e,"attempts"),i(!0)}),n.current.on("reconnect_error",e=>{console.error("WebSocket reconnection error:",e)}),n.current.on("reconnect_failed",()=>{console.error("WebSocket reconnection failed"),i(!1)}),n.current.connect())},h=()=>{n.current&&(console.log("Disconnecting from WebSocket server"),n.current.disconnect(),n.current=null,i(!1)),c.current&&(clearTimeout(c.current),c.current=null)};return(0,a.d4)(()=>(o&&u(),()=>{h()}),[o]),{socket:n.current,isConnected:t,connect:u,disconnect:h,subscribeToTest:e=>{n.current&&t&&(console.log("Subscribing to test execution:",e),n.current.emit("subscribe-test",e))},unsubscribeFromTest:e=>{n.current&&t&&(console.log("Unsubscribing from test execution:",e),n.current.emit("unsubscribe-test",e))},subscribeToProgress:()=>{n.current&&t&&(console.log("Subscribing to progress updates"),n.current.emit("subscribe-progress"))},unsubscribeFromProgress:()=>{n.current&&t&&(console.log("Unsubscribing from progress updates"),n.current.emit("unsubscribe-progress"))},cancelExecution:(e,s)=>{n.current&&t&&(console.log("Cancelling execution:",e,"reason:",s),n.current.emit("cancel-execution",{execution_id:e,reason:s,cleanup_partial_results:!0,notify_stakeholders:!0}))},getProgress:e=>{n.current&&t&&n.current.emit("get-progress",e)},getActiveExecutions:()=>{n.current&&t&&n.current.emit("get-active-executions")}}}},9618:function(e,s,t){"use strict";t.d(s,{hi:function(){return i}});let a="http://localhost:3001";class r extends Error{constructor(e,s){super(s),this.status=e,this.name="ApiError"}}async function l(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(a).concat(e),l={headers:{"Content-Type":"application/json",...s.headers},...s};try{let e=await fetch(t,l),s=await e.json();if(!e.ok)throw new r(e.status,s.error||"Request failed");if(!s.success)throw Error(s.error||"API request failed");return s.data}catch(e){if(e instanceof r)throw e;throw Error("Network error: "+e.message)}}let i={getPromptCards:e=>{let s=new URLSearchParams;(null==e?void 0:e.page)&&s.set("page",e.page.toString()),(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&s.set("search",e.search);let t=s.toString();return l("/prompt-cards".concat(t?"?".concat(t):""))},getPromptCard:e=>l("/prompt-cards/".concat(e)),createPromptCard:e=>l("/prompt-cards",{method:"POST",body:JSON.stringify(e)}),updatePromptCard:(e,s)=>l("/prompt-cards/".concat(e),{method:"PUT",body:JSON.stringify(s)}),deletePromptCard:e=>l("/prompt-cards/".concat(e),{method:"DELETE"}),getTestCases:e=>l("/test-cases/prompt-cards/".concat(e,"/test-cases")),createTestCase:e=>l("/test-cases",{method:"POST",body:JSON.stringify(e)}),updateTestCase:(e,s)=>l("/test-cases/".concat(e),{method:"PUT",body:JSON.stringify(s)}),deleteTestCase:e=>l("/test-cases/".concat(e),{method:"DELETE"}),importYAML:e=>l("/yaml/import",{method:"POST",body:JSON.stringify({yamlContent:e})}),validateYAML:e=>l("/yaml/validate",{method:"POST",body:JSON.stringify({yamlContent:e})}),exportYAML:e=>fetch("".concat(a).concat(e?"/yaml/export/".concat(e):"/yaml/export")),getHealth:()=>l("/health"),runTests:e=>l("/test-execution/run",{method:"POST",body:JSON.stringify(e)}),getTestExecution:e=>l("/test-execution/".concat(e)),getTestExecutionResults:e=>l("/test-execution/".concat(e,"/results")),runSingleTest:(e,s)=>l("/test-execution/test-case/".concat(e,"/run"),{method:"POST",body:JSON.stringify(s||{})}),getDashboardMetrics:()=>l("/analytics/dashboard"),getRealtimeMetrics:()=>l("/analytics/realtime"),getHistoricalMetrics:()=>l("/analytics/historical"),getTrends:(e,s)=>{let t=new URLSearchParams;e&&t.set("period",e),s&&t.set("limit",s.toString());let a=t.toString();return l("/analytics/trends".concat(a?"?".concat(a):""))},getInsights:()=>l("/analytics/insights"),recordTestExecution:e=>l("/analytics/events/test-execution",{method:"POST",body:JSON.stringify(e)}),recordBatchExecution:e=>l("/analytics/events/batch-execution",{method:"POST",body:JSON.stringify(e)}),recordModelUsage:(e,s)=>l("/analytics/events/model-usage",{method:"POST",body:JSON.stringify({model:e,usage:s})}),recordSystemMetrics:e=>l("/analytics/events/system-metrics",{method:"POST",body:JSON.stringify({metrics:e})}),getSystemHealth:()=>l("/monitoring/system-health"),getAlerts:e=>{let s=new URLSearchParams;(null==e?void 0:e.status)&&s.set("status",e.status),(null==e?void 0:e.severity)&&s.set("severity",e.severity),(null==e?void 0:e.category)&&s.set("category",e.category),(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString()),(null==e?void 0:e.offset)&&s.set("offset",e.offset.toString());let t=s.toString();return l("/monitoring/alerts".concat(t?"?".concat(t):""))},updateAlertStatus:(e,s)=>l("/monitoring/alerts/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:s})}),acknowledgeAlert:(e,s)=>l("/monitoring/alerts/".concat(e,"/acknowledge"),{method:"POST",body:JSON.stringify({acknowledgedBy:s})}),resolveAlert:e=>l("/monitoring/alerts/".concat(e,"/resolve"),{method:"POST"}),getDistributedTraces:e=>{let s=new URLSearchParams;(null==e?void 0:e.timeRange)&&s.set("timeRange",e.timeRange),(null==e?void 0:e.service)&&s.set("service",e.service),(null==e?void 0:e.operation)&&s.set("operation",e.operation),(null==e?void 0:e.minDuration)&&s.set("minDuration",e.minDuration.toString()),(null==e?void 0:e.maxDuration)&&s.set("maxDuration",e.maxDuration.toString()),(null==e?void 0:e.status)&&s.set("status",e.status),(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString());let t=s.toString();return l("/monitoring/traces".concat(t?"?".concat(t):""))},getTrace:e=>l("/monitoring/traces/".concat(e)),getPerformanceData:e=>{let s=new URLSearchParams;(null==e?void 0:e.timeRange)&&s.set("timeRange",e.timeRange),(null==e?void 0:e.endpoint)&&s.set("endpoint",e.endpoint),(null==e?void 0:e.method)&&s.set("method",e.method),(null==e?void 0:e.groupBy)&&s.set("groupBy",e.groupBy);let t=s.toString();return l("/monitoring/performance".concat(t?"?".concat(t):""))},getCustomMetrics:()=>l("/monitoring/custom-metrics"),createCustomMetric:e=>l("/monitoring/custom-metrics",{method:"POST",body:JSON.stringify(e)}),updateCustomMetric:(e,s)=>l("/monitoring/custom-metrics/".concat(e),{method:"PUT",body:JSON.stringify(s)}),deleteCustomMetric:e=>l("/monitoring/custom-metrics/".concat(e),{method:"DELETE"}),refreshCustomMetric:e=>l("/monitoring/custom-metrics/".concat(e,"/refresh"),{method:"POST"}),getKpis:()=>l("/monitoring/kpis"),createKpi:e=>l("/monitoring/kpis",{method:"POST",body:JSON.stringify(e)}),updateKpi:(e,s)=>l("/monitoring/kpis/".concat(e),{method:"PUT",body:JSON.stringify(s)}),deleteKpi:e=>l("/monitoring/kpis/".concat(e),{method:"DELETE"}),getDashboardConfig:()=>l("/monitoring/dashboard/config"),saveDashboardConfig:e=>l("/monitoring/dashboard/config",{method:"POST",body:JSON.stringify(e)}),exportDashboardConfig:()=>fetch("".concat(a,"/monitoring/dashboard/export")),importDashboardConfig:e=>l("/monitoring/dashboard/import",{method:"POST",body:JSON.stringify(e)})}},5565:function(e,s,t){"use strict";t.d(s,{Gp:function(){return a.forwardRef},az:function(){return a.createElement}});var a=t(8078)},1143:function(e,s,t){"use strict";t.d(s,{d4:function(){return a.useEffect},eJ:function(){return a.useState},mT:function(){return a.useRef}});var a=t(8078)}},function(e){e.O(0,[172,642,280,115,364,744],function(){return e(e.s=6641)}),_N_E=e.O()}]);