(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{1911:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(5155),a=r(2115),n=r(6874),l=r.n(n);function i(e){let{value:t,onChange:r,placeholder:a="Search...",className:n=""}=e;return(0,s.jsxs)("div",{className:"relative ".concat(n),children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:a,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}var o=r(3741),c=r(4338),d=r(2814);function m(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(""),[u,g]=(0,a.useState)({page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1}),f=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{n(!0);let s=new URLSearchParams({page:e.toString(),limit:"10"});r.trim()&&s.append("search",r.trim());let a=await fetch("/api/prompt-cards?".concat(s)),l=await a.json();l.success?(t(l.data),g(l.pagination),x(null)):x(l.error||"Failed to fetch prompt cards")}catch(e){x("Network error: Failed to fetch prompt cards")}finally{n(!1)}},j=e=>{f(e,h)},y=async e=>{if(confirm("Are you sure you want to delete this prompt card?"))try{let t=await fetch("/api/prompt-cards/".concat(e),{method:"DELETE"}),r=await t.json();r.success?f(u.page,h):x(r.error||"Failed to delete prompt card")}catch(e){x("Network error: Failed to delete prompt card")}};return((0,a.useEffect)(()=>{f()},[]),r&&0===e.length)?(0,s.jsx)("div",{className:"flex justify-center items-center min-h-64",children:(0,s.jsx)(c.k,{})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Prompt Cards"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your prompt templates and test cases"})]}),(0,s.jsx)(l(),{href:"/prompt-cards/new",children:(0,s.jsx)(o.$,{children:"Create New Card"})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(i,{placeholder:"Search prompt cards...",value:h,onChange:e=>{p(e),f(1,e)},className:"max-w-md"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[u.total," cards total"]})]}),m&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,s.jsx)("p",{className:"text-red-800",children:m})}),0!==e.length||r?(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.title}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(l(),{href:"/prompt-cards/".concat(e.id),children:(0,s.jsx)(o.$,{variant:"outline",size:"sm",children:"Edit"})}),(0,s.jsx)(l(),{href:"/prompt-cards/".concat(e.id,"/test"),children:(0,s.jsx)(o.$,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Run Tests"})}),(0,s.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>y(e.id),className:"text-red-600 border-red-200 hover:bg-red-50",children:"Delete"})]})]}),e.description&&(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Prompt Template:"}),(0,s.jsx)("p",{className:"text-sm text-gray-700 bg-gray-50 rounded p-2 font-mono line-clamp-3",children:e.prompt_template})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(d.E,{variant:"outline",children:[e.test_case_count||0," tests"]}),e.variables.length>0&&(0,s.jsxs)(d.E,{variant:"outline",children:[e.variables.length," variables"]})]}),(0,s.jsx)("span",{className:"text-xs",children:new Date(e.updated_at).toLocaleDateString()})]})]})},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-gray-500 mb-4",children:(0,s.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No prompt cards found"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:h?"No cards match your search criteria.":"Get started by creating your first prompt card."}),(0,s.jsx)(l(),{href:"/prompt-cards/new",children:(0,s.jsx)(o.$,{children:"Create Your First Card"})})]}),u.totalPages>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,s.jsx)(o.$,{variant:"outline",disabled:!u.hasPrev||r,onClick:()=>j(u.page-1),children:"Previous"}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:Array.from({length:Math.min(5,u.totalPages)},(e,t)=>{let a=t+1,n=a===u.page;return(0,s.jsx)(o.$,{variant:n?"default":"outline",size:"sm",disabled:r,onClick:()=>j(a),children:a},a)})}),(0,s.jsx)(o.$,{variant:"outline",disabled:!u.hasNext||r,onClick:()=>j(u.page+1),children:"Next"})]}),r&&e.length>0&&(0,s.jsx)("div",{className:"flex justify-center mt-4",children:(0,s.jsx)(c.k,{size:"sm"})})]})}var x=r(7650);function h(e){let{isOpen:t,onClose:r,title:n,children:l,size:i="md"}=e;if((0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,r]),!t)return null;let o=(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[i]," w-full max-h-[90vh] overflow-hidden"),children:[n&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:n}),(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:l})]})]})});return(0,x.createPortal)(o,document.body)}function p(e){let{onImportSuccess:t}=e,[r,n]=(0,a.useState)(!1),[l,i]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[u,g]=(0,a.useState)(null),f=async()=>{if(!l.trim())return void p("Please enter YAML content");try{m(!0),p(null);let e=await fetch("/api/yaml/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yamlContent:l})}),r=await e.json();r.success?(g(r.message),i(""),null==t||t(r.data.length),setTimeout(()=>{n(!1),g(null)},2e3)):p(r.error||"Failed to import YAML")}catch(e){p("Network error: Failed to import YAML")}finally{m(!1)}},j=async()=>{if(!l.trim())return void p("Please enter YAML content");try{m(!0),p(null);let e=await fetch("/api/yaml/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yamlContent:l})}),t=await e.json();t.success?g("✓ YAML is valid (".concat(t.configCount," configuration").concat(t.configCount>1?"s":"",")")):p(t.error||"YAML validation failed")}catch(e){p("Network error: Failed to validate YAML")}finally{m(!1)}},y=async()=>{try{m(!0);let e=await fetch("/api/yaml/export");if(e.ok){let t=await e.blob(),r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="prompt-cards-export-".concat(Date.now(),".yaml"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(r),document.body.removeChild(s),g("Export downloaded successfully")}else{let t=await e.json();p(t.error||"Failed to export YAML")}}catch(e){p("Network error: Failed to export YAML")}finally{m(!1)}},b=()=>{i(""),p(null),g(null),n(!1)};return(0,s.jsxs)("div",{className:"space-y-4",children:[(x||u)&&(0,s.jsx)("div",{className:"p-4 rounded-md ".concat(x?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"),children:(0,s.jsx)("p",{className:x?"text-red-800":"text-green-800",children:x||u})}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(o.$,{onClick:()=>n(!0),variant:"outline",children:"Import YAML"}),(0,s.jsx)(o.$,{onClick:y,disabled:d,variant:"outline",children:d?(0,s.jsx)(c.k,{size:"sm"}):"Export All to YAML"})]}),(0,s.jsx)(h,{isOpen:r,onClose:b,title:"Import Prompt Cards from YAML",size:"lg",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promptfoo YAML Configuration"}),(0,s.jsx)("textarea",{value:l,onChange:e=>i(e.target.value),rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:'Paste your Promptfoo YAML configuration here:\n\nprompts:\n  - "Translate the following text to French: {{input}}"\nproviders:\n  - ollama:chat:llama2:7b\ntests:\n  - vars:\n      input: "Hello world"\n    assert:\n      - type: contains\n        value: "Bonjour"\ndescription: "Translation prompt example"'})]}),x&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-red-800 text-sm",children:x})}),u&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-green-800 text-sm",children:u})}),(0,s.jsxs)("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[(0,s.jsx)("div",{className:"space-x-2",children:(0,s.jsx)(o.$,{onClick:j,variant:"outline",disabled:d,children:d?(0,s.jsx)(c.k,{size:"sm"}):"Validate"})}),(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(o.$,{onClick:b,variant:"outline",disabled:d,children:"Cancel"}),(0,s.jsx)(o.$,{onClick:f,disabled:d||!l.trim(),children:d?(0,s.jsx)(c.k,{size:"sm"}):"Import"})]})]})]})}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"YAML Import/Export"}),(0,s.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"Import:"})," Paste Promptfoo-compatible YAML to create prompt cards with test cases"]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"Export:"})," Download all prompt cards as Promptfoo YAML configuration"]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"Format:"})," Compatible with ",(0,s.jsx)("a",{href:"https://github.com/promptfoo/promptfoo",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Promptfoo"})," evaluation framework"]})]})]})]})}function u(){let[e,t]=(0,a.useState)(0);return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8 bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"YAML Operations"}),(0,s.jsx)(p,{onImportSuccess:e=>{t(e=>e+1)}})]}),(0,s.jsx)(m,{},e)]})})}},2814:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var s=r(5155);function a(e){let{children:t,variant:r="default",size:a="md"}=e;return(0,s.jsx)("span",{className:"".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 bg-white text-gray-700"}[r]," ").concat({sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"}[a]),children:t})}r(2115)},3741:(e,t,r)=>{"use strict";r.d(t,{$:()=>a});var s=r(5155);function a(e){let{variant:t="primary",size:r="md",loading:a=!1,children:n,className:l="",disabled:i,...o}=e;return(0,s.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[r]," ").concat(l),disabled:i||a,...o,children:[a&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]})}r(2115)},4338:(e,t,r)=>{"use strict";r.d(t,{k:()=>a});var s=r(5155);function a(e){let{size:t="md",className:r=""}=e;return(0,s.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-primary-600 ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t]," ").concat(r),children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})}r(2115)},5675:(e,t,r)=>{Promise.resolve().then(r.bind(r,1911))}},e=>{e.O(0,[874,441,964,358],()=>e(e.s=5675)),_N_E=e.O()}]);