(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{8437:function(e,t,r){Promise.resolve().then(r.bind(r,9793))},9793:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(7821),a=r(9429),n=r(4542);function i(e){let{value:t,onChange:r,placeholder:a="Search...",className:n=""}=e;return(0,s.jsxs)("div",{className:"relative ".concat(n),children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:a,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}r(8078);var l=r(1781),o=r(1753),c=r(192);function d(){let[e,t]=(0,a.eJ)([]),[r,d]=(0,a.eJ)(!0),[m,x]=(0,a.eJ)(null),[u,h]=(0,a.eJ)(""),[p,f]=(0,a.eJ)({page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1}),g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{d(!0);let s=new URLSearchParams({page:e.toString(),limit:"10"});r.trim()&&s.append("search",r.trim());let a=await fetch("/api/prompt-cards?".concat(s)),n=await a.json();n.success?(t(n.data),f(n.pagination),x(null)):x(n.error||"Failed to fetch prompt cards")}catch(e){x("Network error: Failed to fetch prompt cards")}finally{d(!1)}},j=e=>{g(e,u)},y=async e=>{if(confirm("Are you sure you want to delete this prompt card?"))try{let t=await fetch("/api/prompt-cards/".concat(e),{method:"DELETE"}),r=await t.json();r.success?g(p.page,u):x(r.error||"Failed to delete prompt card")}catch(e){x("Network error: Failed to delete prompt card")}};return((0,a.d4)(()=>{g()},[]),r&&0===e.length)?(0,s.jsx)("div",{className:"flex justify-center items-center min-h-64",children:(0,s.jsx)(o.T,{})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Prompt Cards"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your prompt templates and test cases"})]}),(0,s.jsx)(n.default,{href:"/prompt-cards/new",children:(0,s.jsx)(l.z,{children:"Create New Card"})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(i,{placeholder:"Search prompt cards...",value:u,onChange:e=>{h(e),g(1,e)},className:"max-w-md"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[p.total," cards total"]})]}),m&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,s.jsx)("p",{className:"text-red-800",children:m})}),0!==e.length||r?(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.title}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(n.default,{href:"/prompt-cards/".concat(e.id),children:(0,s.jsx)(l.z,{variant:"outline",size:"sm",children:"Edit"})}),(0,s.jsx)(n.default,{href:"/prompt-cards/".concat(e.id,"/test"),children:(0,s.jsx)(l.z,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Run Tests"})}),(0,s.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>y(e.id),className:"text-red-600 border-red-200 hover:bg-red-50",children:"Delete"})]})]}),e.description&&(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Prompt Template:"}),(0,s.jsx)("p",{className:"text-sm text-gray-700 bg-gray-50 rounded p-2 font-mono line-clamp-3",children:e.prompt_template})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(c.C,{variant:"outline",children:[e.test_case_count||0," tests"]}),e.variables.length>0&&(0,s.jsxs)(c.C,{variant:"outline",children:[e.variables.length," variables"]})]}),(0,s.jsx)("span",{className:"text-xs",children:new Date(e.updated_at).toLocaleDateString()})]})]})},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-gray-500 mb-4",children:(0,s.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No prompt cards found"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:u?"No cards match your search criteria.":"Get started by creating your first prompt card."}),(0,s.jsx)(n.default,{href:"/prompt-cards/new",children:(0,s.jsx)(l.z,{children:"Create Your First Card"})})]}),p.totalPages>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,s.jsx)(l.z,{variant:"outline",disabled:!p.hasPrev||r,onClick:()=>j(p.page-1),children:"Previous"}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:Array.from({length:Math.min(5,p.totalPages)},(e,t)=>{let a=t+1,n=a===p.page;return(0,s.jsx)(l.z,{variant:n?"default":"outline",size:"sm",disabled:r,onClick:()=>j(a),children:a},a)})}),(0,s.jsx)(l.z,{variant:"outline",disabled:!p.hasNext||r,onClick:()=>j(p.page+1),children:"Next"})]}),r&&e.length>0&&(0,s.jsx)("div",{className:"flex justify-center mt-4",children:(0,s.jsx)(o.T,{size:"sm"})})]})}var m=r(1227),x=r(9955);function u(e){let{onImportSuccess:t}=e,[r,a]=(0,m.eJ)(!1),[n,i]=(0,m.eJ)(""),[c,d]=(0,m.eJ)(!1),[u,h]=(0,m.eJ)(null),[p,f]=(0,m.eJ)(null),g=async()=>{if(!n.trim()){h("Please enter YAML content");return}try{d(!0),h(null);let e=await fetch("/api/yaml/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yamlContent:n})}),r=await e.json();r.success?(f(r.message),i(""),null==t||t(r.data.length),setTimeout(()=>{a(!1),f(null)},2e3)):h(r.error||"Failed to import YAML")}catch(e){h("Network error: Failed to import YAML")}finally{d(!1)}},j=async()=>{if(!n.trim()){h("Please enter YAML content");return}try{d(!0),h(null);let e=await fetch("/api/yaml/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yamlContent:n})}),t=await e.json();t.success?f("✓ YAML is valid (".concat(t.configCount," configuration").concat(t.configCount>1?"s":"",")")):h(t.error||"YAML validation failed")}catch(e){h("Network error: Failed to validate YAML")}finally{d(!1)}},y=async()=>{try{d(!0);let e=await fetch("/api/yaml/export");if(e.ok){let t=await e.blob(),r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="prompt-cards-export-".concat(Date.now(),".yaml"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(r),document.body.removeChild(s),f("Export downloaded successfully")}else{let t=await e.json();h(t.error||"Failed to export YAML")}}catch(e){h("Network error: Failed to export YAML")}finally{d(!1)}},b=()=>{i(""),h(null),f(null),a(!1)};return(0,s.jsxs)("div",{className:"space-y-4",children:[(u||p)&&(0,s.jsx)("div",{className:"p-4 rounded-md ".concat(u?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"),children:(0,s.jsx)("p",{className:u?"text-red-800":"text-green-800",children:u||p})}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(l.z,{onClick:()=>a(!0),variant:"outline",children:"Import YAML"}),(0,s.jsx)(l.z,{onClick:y,disabled:c,variant:"outline",children:c?(0,s.jsx)(o.T,{size:"sm"}):"Export All to YAML"})]}),(0,s.jsx)(x.u,{isOpen:r,onClose:b,title:"Import Prompt Cards from YAML",size:"lg",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promptfoo YAML Configuration"}),(0,s.jsx)("textarea",{value:n,onChange:e=>i(e.target.value),rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:'Paste your Promptfoo YAML configuration here:\n\nprompts:\n  - "Translate the following text to French: {{input}}"\nproviders:\n  - ollama:chat:llama2:7b\ntests:\n  - vars:\n      input: "Hello world"\n    assert:\n      - type: contains\n        value: "Bonjour"\ndescription: "Translation prompt example"'})]}),u&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-red-800 text-sm",children:u})}),p&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-green-800 text-sm",children:p})}),(0,s.jsxs)("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[(0,s.jsx)("div",{className:"space-x-2",children:(0,s.jsx)(l.z,{onClick:j,variant:"outline",disabled:c,children:c?(0,s.jsx)(o.T,{size:"sm"}):"Validate"})}),(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(l.z,{onClick:b,variant:"outline",disabled:c,children:"Cancel"}),(0,s.jsx)(l.z,{onClick:g,disabled:c||!n.trim(),children:c?(0,s.jsx)(o.T,{size:"sm"}):"Import"})]})]})]})}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-md",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"YAML Import/Export"}),(0,s.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"Import:"})," Paste Promptfoo-compatible YAML to create prompt cards with test cases"]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"Export:"})," Download all prompt cards as Promptfoo YAML configuration"]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"Format:"})," Compatible with ",(0,s.jsx)("a",{href:"https://github.com/promptfoo/promptfoo",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Promptfoo"})," evaluation framework"]})]})]})]})}function h(){let[e,t]=(0,m.eJ)(0);return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8 bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"YAML Operations"}),(0,s.jsx)(u,{onImportSuccess:e=>{t(e=>e+1)}})]}),(0,s.jsx)(d,{},e)]})})}},192:function(e,t,r){"use strict";r.d(t,{C:function(){return a}});var s=r(7821);function a(e){let{children:t,variant:r="default",size:a="md"}=e;return(0,s.jsx)("span",{className:"".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 bg-white text-gray-700"}[r]," ").concat({sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"}[a]),children:t})}r(8078)},1781:function(e,t,r){"use strict";r.d(t,{z:function(){return a}});var s=r(7821);function a(e){let{variant:t="primary",size:r="md",loading:a=!1,children:n,className:i="",disabled:l,...o}=e;return(0,s.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[r]," ").concat(i),disabled:l||a,...o,children:[a&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]})}r(8078)},1753:function(e,t,r){"use strict";r.d(t,{T:function(){return a}});var s=r(7821);function a(e){let{size:t="md",className:r=""}=e;return(0,s.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-primary-600 ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t]," ").concat(r),children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})}r(8078)},9955:function(e,t,r){"use strict";r.d(t,{u:function(){return i}});var s=r(7821),a=r(8078),n=r(457);function i(e){let{isOpen:t,onClose:r,title:i,children:l,size:o="md"}=e;if((0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,r]),!t)return null;let c=(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[o]," w-full max-h-[90vh] overflow-hidden"),children:[i&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:l})]})]})});return(0,n.createPortal)(c,document.body)}},9429:function(e,t,r){"use strict";r.d(t,{d4:function(){return s.useEffect},eJ:function(){return s.useState}});var s=r(8078)},1227:function(e,t,r){"use strict";r.d(t,{eJ:function(){return s.useState}});var s=r(8078)}},function(e){e.O(0,[542,115,364,744],function(){return e(e.s=8437)}),_N_E=e.O()}]);