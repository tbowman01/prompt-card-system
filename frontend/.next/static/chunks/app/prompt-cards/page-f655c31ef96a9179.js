(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{8816:function(e,t,r){Promise.resolve().then(r.bind(r,489))},489:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s={};r.r(s);var a={};r.r(a);var n=r(7437),i=r(2265),l=r(7648),o=r(6334),c=r(2496),d=r(8711);function m(){let[e,t]=(0,i.useState)([]),[r,a]=(0,i.useState)(!0),[m,x]=(0,i.useState)(null),[p,h]=(0,i.useState)(""),[u,g]=(0,i.useState)({page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1}),f=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{a(!0);let s=new URLSearchParams({page:e.toString(),limit:"10"});r.trim()&&s.append("search",r.trim());let n=await fetch("/api/prompt-cards?".concat(s)),i=await n.json();i.success?(t(i.data),g(i.pagination),x(null)):x(i.error||"Failed to fetch prompt cards")}catch(e){x("Network error: Failed to fetch prompt cards")}finally{a(!1)}},j=e=>{f(e,p)},b=async e=>{if(confirm("Are you sure you want to delete this prompt card?"))try{let t=await fetch("/api/prompt-cards/".concat(e),{method:"DELETE"}),r=await t.json();r.success?f(u.page,p):x(r.error||"Failed to delete prompt card")}catch(e){x("Network error: Failed to delete prompt card")}};return((0,i.useEffect)(()=>{f()},[]),r&&0===e.length)?(0,n.jsx)("div",{className:"flex justify-center items-center min-h-64",children:(0,n.jsx)(c.T,{})}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Prompt Cards"}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your prompt templates and test cases"})]}),(0,n.jsx)(l.default,{href:"/prompt-cards/new",children:(0,n.jsx)(o.z,{children:"Create New Card"})})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)(s.SearchInput,{placeholder:"Search prompt cards...",value:p,onChange:e=>{h(e),f(1,e)},className:"max-w-md"}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:[u.total," cards total"]})]}),m&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,n.jsx)("p",{className:"text-red-800",children:m})}),0!==e.length||r?(0,n.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,n.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.title}),(0,n.jsxs)("div",{className:"flex space-x-1",children:[(0,n.jsx)(l.default,{href:"/prompt-cards/".concat(e.id),children:(0,n.jsx)(o.z,{variant:"outline",size:"sm",children:"Edit"})}),(0,n.jsx)(l.default,{href:"/prompt-cards/".concat(e.id,"/test"),children:(0,n.jsx)(o.z,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Run Tests"})}),(0,n.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>b(e.id),className:"text-red-600 border-red-200 hover:bg-red-50",children:"Delete"})]})]}),e.description&&(0,n.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Prompt Template:"}),(0,n.jsx)("p",{className:"text-sm text-gray-700 bg-gray-50 rounded p-2 font-mono line-clamp-3",children:e.prompt_template})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)(d.C,{variant:"outline",children:[e.test_case_count||0," tests"]}),e.variables.length>0&&(0,n.jsxs)(d.C,{variant:"outline",children:[e.variables.length," variables"]})]}),(0,n.jsx)("span",{className:"text-xs",children:new Date(e.updated_at).toLocaleDateString()})]})]})},e.id))}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"text-gray-500 mb-4",children:(0,n.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No prompt cards found"}),(0,n.jsx)("p",{className:"text-gray-500 mb-4",children:p?"No cards match your search criteria.":"Get started by creating your first prompt card."}),(0,n.jsx)(l.default,{href:"/prompt-cards/new",children:(0,n.jsx)(o.z,{children:"Create Your First Card"})})]}),u.totalPages>1&&(0,n.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,n.jsx)(o.z,{variant:"outline",disabled:!u.hasPrev||r,onClick:()=>j(u.page-1),children:"Previous"}),(0,n.jsx)("div",{className:"flex items-center space-x-2",children:Array.from({length:Math.min(5,u.totalPages)},(e,t)=>{let s=t+1,a=s===u.page;return(0,n.jsx)(o.z,{variant:a?"default":"outline",size:"sm",disabled:r,onClick:()=>j(s),children:s},s)})}),(0,n.jsx)(o.z,{variant:"outline",disabled:!u.hasNext||r,onClick:()=>j(u.page+1),children:"Next"})]}),r&&e.length>0&&(0,n.jsx)("div",{className:"flex justify-center mt-4",children:(0,n.jsx)(c.T,{size:"sm"})})]})}function x(e){let{onImportSuccess:t}=e,[r,s]=(0,i.useState)(!1),[l,d]=(0,i.useState)(""),[m,x]=(0,i.useState)(!1),[p,h]=(0,i.useState)(null),[u,g]=(0,i.useState)(null),f=async()=>{if(!l.trim()){h("Please enter YAML content");return}try{x(!0),h(null);let e=await fetch("/api/yaml/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yamlContent:l})}),r=await e.json();r.success?(g(r.message),d(""),null==t||t(r.data.length),setTimeout(()=>{s(!1),g(null)},2e3)):h(r.error||"Failed to import YAML")}catch(e){h("Network error: Failed to import YAML")}finally{x(!1)}},j=async()=>{if(!l.trim()){h("Please enter YAML content");return}try{x(!0),h(null);let e=await fetch("/api/yaml/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yamlContent:l})}),t=await e.json();t.success?g("✓ YAML is valid (".concat(t.configCount," configuration").concat(t.configCount>1?"s":"",")")):h(t.error||"YAML validation failed")}catch(e){h("Network error: Failed to validate YAML")}finally{x(!1)}},b=async()=>{try{x(!0);let e=await fetch("/api/yaml/export");if(e.ok){let t=await e.blob(),r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="prompt-cards-export-".concat(Date.now(),".yaml"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(r),document.body.removeChild(s),g("Export downloaded successfully")}else{let t=await e.json();h(t.error||"Failed to export YAML")}}catch(e){h("Network error: Failed to export YAML")}finally{x(!1)}},y=()=>{d(""),h(null),g(null),s(!1)};return(0,n.jsxs)("div",{className:"space-y-4",children:[(p||u)&&(0,n.jsx)("div",{className:"p-4 rounded-md ".concat(p?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"),children:(0,n.jsx)("p",{className:p?"text-red-800":"text-green-800",children:p||u})}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)(o.z,{onClick:()=>s(!0),variant:"outline",children:"Import YAML"}),(0,n.jsx)(o.z,{onClick:b,disabled:m,variant:"outline",children:m?(0,n.jsx)(c.T,{size:"sm"}):"Export All to YAML"})]}),(0,n.jsx)(a.Modal,{isOpen:r,onClose:y,title:"Import Prompt Cards from YAML",size:"lg",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promptfoo YAML Configuration"}),(0,n.jsx)("textarea",{value:l,onChange:e=>d(e.target.value),rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:'Paste your Promptfoo YAML configuration here:\n\nprompts:\n  - "Translate the following text to French: {{input}}"\nproviders:\n  - ollama:chat:llama2:7b\ntests:\n  - vars:\n      input: "Hello world"\n    assert:\n      - type: contains\n        value: "Bonjour"\ndescription: "Translation prompt example"'})]}),p&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,n.jsx)("p",{className:"text-red-800 text-sm",children:p})}),u&&(0,n.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:(0,n.jsx)("p",{className:"text-green-800 text-sm",children:u})}),(0,n.jsxs)("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[(0,n.jsx)("div",{className:"space-x-2",children:(0,n.jsx)(o.z,{onClick:j,variant:"outline",disabled:m,children:m?(0,n.jsx)(c.T,{size:"sm"}):"Validate"})}),(0,n.jsxs)("div",{className:"space-x-2",children:[(0,n.jsx)(o.z,{onClick:y,variant:"outline",disabled:m,children:"Cancel"}),(0,n.jsx)(o.z,{onClick:f,disabled:m||!l.trim(),children:m?(0,n.jsx)(c.T,{size:"sm"}):"Import"})]})]})]})}),(0,n.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-md",children:[(0,n.jsx)("h4",{className:"font-medium mb-2",children:"YAML Import/Export"}),(0,n.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,n.jsxs)("li",{children:["• ",(0,n.jsx)("strong",{children:"Import:"})," Paste Promptfoo-compatible YAML to create prompt cards with test cases"]}),(0,n.jsxs)("li",{children:["• ",(0,n.jsx)("strong",{children:"Export:"})," Download all prompt cards as Promptfoo YAML configuration"]}),(0,n.jsxs)("li",{children:["• ",(0,n.jsx)("strong",{children:"Format:"})," Compatible with ",(0,n.jsx)("a",{href:"https://github.com/promptfoo/promptfoo",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Promptfoo"})," evaluation framework"]})]})]})]})}function p(){let[e,t]=(0,i.useState)(0);return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsxs)("div",{className:"mb-8 bg-white rounded-lg border border-gray-200 p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"YAML Operations"}),(0,n.jsx)(x,{onImportSuccess:e=>{t(e=>e+1)}})]}),(0,n.jsx)(m,{},e)]})})}r(4887)},8711:function(e,t,r){"use strict";r.d(t,{C:function(){return a}});var s=r(7437);function a(e){let{children:t,variant:r="default",size:a="md"}=e;return(0,s.jsx)("span",{className:"".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 bg-white text-gray-700"}[r]," ").concat({sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"}[a]),children:t})}r(2265)},6334:function(e,t,r){"use strict";r.d(t,{z:function(){return a}});var s=r(7437);function a(e){let{variant:t="primary",size:r="md",loading:a=!1,children:n,className:i="",disabled:l,...o}=e;return(0,s.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[r]," ").concat(i),disabled:l||a,...o,children:[a&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]})}r(2265)},2496:function(e,t,r){"use strict";r.d(t,{T:function(){return a}});var s=r(7437);function a(e){let{size:t="md",className:r=""}=e;return(0,s.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-primary-600 ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t]," ").concat(r),children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})}r(2265)}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=8816)}),_N_E=e.O()}]);